!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)".."===(n=i[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var i,o={id:t,exports:{},hot:v&&v.createHot(t)};return n[t]=o,r(o.exports,(i=t,function(t){var n=a(u(i),t);return e.require(n,i)}),o),o.exports},l=function(e){var t=r[e];return t&&e!==t?l(t):e},c=function(e,r){null==r&&(r="/");var o=l(e);if(i.call(n,o))return n[o].exports;if(i.call(t,o))return s(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};c.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/;c.register=c.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&c.register(a,e[a]);else t[e]=o,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");i.call(r,n)||(r[n]=e)}}(e)},c.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var v=e._hmr&&new e._hmr(function(e,t){return l(a(u(e),t))},c,t,n);c._cache=n,c.hmr=v&&v.wrap,c.brunch=!0,e.require=c}}(),function(){"undefined"==typeof window||window;require.register("fs",function(e,t,n){n.exports={}});var e=function(e,t,n){var r={},i=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var o=n.split("/"),a=o.lastIndexOf("node_modules"),u=o.slice(0,a).join("/");return i(t,u)}}return r};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&n){var a=i(o,n);if(a!==r)return a}return e(o)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var r=n("./Bindable"),i=n("./Mixin"),o=n("../mixin/EventTargetMixin");function a(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=l(t);if(n){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=Symbol("Mapped"),f=Symbol("Has"),p=Symbol("Add"),v=Symbol("Remove"),h=Symbol("Delete"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(d,i.Mixin.with(o.EventTargetMixin));var t,n,l,y=s(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=y.call(this)).changeCallback=t,e.content=new Map,e.current=0,e.length=0,e.list=r.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}return t=d,(n=[{key:"has",value:function(e){return this[c]?this[c].has(e):this[f](e)}},{key:f,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[c]?this[c].add(e):this[p](e)}},{key:p,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=r.Bindable.make(e),!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,i=(n=this.current++,Number(n));this.content.set(e,i),this.list[i]=e,this.changeCallback&&this.changeCallback(e,this.meta,d.ITEM_ADDED,i);var o=new CustomEvent("added",{detail:{item:e,id:i}});return this.dispatchEvent(o),this.length=this.size,i}}}},{key:"remove",value:function(e){return this[c]?this[c].remove(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=r.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,d.ITEM_REMOVED,n);var i=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){if(this[c])return this[c].delete(e);this[h](e)}},{key:h,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new WeakMap,r=new d;return r[c]=this,this.addEventListener("added",function(i){var o=i.detail.item;if(t(o)&&!n.has(o)){var a=e(o);n.set(o,a),r[p](a)}}),this.addEventListener("removed",function(e){var t=e.detail.item;if(n.has(t)){var i=n.get(t);n.delete(t),r[v](i)}}),r}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&a(t.prototype,n),l&&a(t,l),Object.defineProperty(t,"prototype",{writable:!1}),d}();t.Bag=y,Object.defineProperty(y,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(y,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,i){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function s(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var f=Symbol("ref"),p=Symbol("original"),v=Symbol("deck"),h=Symbol("binding"),y=Symbol("subBinding"),d=Symbol("bindingAll"),b=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),S=Symbol("stack"),j=(Symbol("object"),Symbol("wrapped")),O=Symbol("unwrapped"),P=Symbol("getProto"),k=Symbol("onGet"),E=Symbol("onAllGet"),_=Symbol("bindChain"),A=Symbol("Descriptors"),T=Symbol("Before"),x=Symbol("After"),R=Symbol("NoGetters"),C=Object.getPrototypeOf(Int8Array),B=Set.prototype[Symbol.iterator],M=Map.prototype[Symbol.iterator],D="object"===("undefined"==typeof globalThis?"undefined":c(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":c(window))?window:"object"===("undefined"==typeof self?"undefined":c(self))?self:void 0,I=[D.Node,D.File,D.Map,D.Set,D.WeakMap,D.WeakSet,D.ArrayBuffer,D.ResizeObserver,D.MutationObserver,D.PerformanceObserver,D.IntersectionObserver,D.IDBCursor,D.IDBCursorWithValue,D.IDBDatabase,D.IDBFactory,D.IDBIndex,D.IDBKeyRange,D.IDBObjectStore,D.IDBOpenDBRequest,D.IDBRequest,D.IDBTransaction,D.IDBVersionChangeEvent,D.Event,D.CustomEvent,D.FileSystemFileHandle].filter(function(e){return"function"==typeof e}),N=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,o,a;return n=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[b])&&e[b]===t}},{key:"onDeck",value:function(e,t){return e[v][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r=Object.create({});if(e instanceof C||e instanceof ArrayBuffer){var i=e.slice(0);return n.set(e,i),i}var o=Object.keys(e);for(var a in o){var u=o[a];if("___"!==u.substring(0,3)){var s=n.get(e[u]);if(s)r[u]=s;else if(e[u]!==e){if(e[u]&&"object"===c(e[u])){var l=e[u];t.isBindable(e[u])&&(l=e[u][p]),r[u]=this.shuck(l,n)}else r[u]=e[u];n.set(e[u],r[u])}else n.set(e[u],r),r[u]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(n){var o=this;if(!n||!["function","object"].includes(c(n)))return n;if(n[f])return n[f];if(n[b])return n;if(Object.isSealed(n)||Object.isFrozen(n)||!Object.isExtensible(n)||I.find(function(e){return n instanceof e}))return n;Object.defineProperty(n,b,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(n,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:new Set}),Object.defineProperty(n,w,{enumerable:!1,writable:!0}),Object.defineProperty(n,m,{enumerable:!1,writable:!0}),Object.defineProperty(n,S,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,T,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,x,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,j,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(n,O,{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}),Object.defineProperty(n,A,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=!1;if(Array.isArray(r)){var s=r.map(function(t){return e(t,i,a)});return function(){return s.forEach(function(e){return e()})}}if(r instanceof Function&&(a=i||{},i=r,u=!0),a.delay>=0&&(i=o.wrapDelayCallback(i,a.delay)),a.throttle>=0&&(i=o.wrapThrottleCallback(i,a.throttle)),a.wait>=0&&(i=o.wrapWaitCallback(i,a.wait)),a.frame&&(i=o.wrapFrameCallback(i,a.frame)),a.idle&&(i=o.wrapIdleCallback(i)),u){if(n[d].add(i),!("now"in a)||a.now)for(var l in n)i(n[l],l,n,!1);return function(){n[d].delete(i)}}if(n[h][r]||(n[h][r]=new Set),a.children){var f=i;i=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r[0],u=n[y].get(f);if(u&&(n[y].delete(f),u()),"object"===c(o)){var s=t.make(o);t.isBindable(s)&&n[y].set(f,s.bindTo(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,r.concat(t))},Object.assign({},a,{children:!1}))),f.apply(void 0,r)}else f.apply(void 0,r)}}n[h][r].add(i),"now"in a&&!a.now||i(n[r],r,n,!1);var p=function(){var e=n[y].get(i);e&&(n[y].delete(i),e()),n[h][r]&&n[h][r].has(i)&&n[h][r].delete(i)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return p}),p}});Object.defineProperty(n,_,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var r=e.split("."),i=r.shift(),a=r.slice(0),u=[];return u.push(n.bindTo(i,function(e,n,r,i){var s=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=o.make({})),u=u.concat(e[_](s,t))):t(e,n,r,i)})),function(){return u.forEach(function(e){return e()})}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[T].length;n[T].push(e);var r=!1;return function(){r||(r=!0,delete n[T][t])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[x].length;n[x].push(e);var r=!1;return function(){r||(r=!0,delete n[x][t])}}});Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){if(n[d].size)return!0;for(var e in n[h]){var t,r=i(n[h][e]);try{for(r.s();!(t=r.n()).done;)if(t.value)return!0}catch(e){r.e(e)}finally{r.f()}}return!1}});var a=function(e){n[e]&&n[e]instanceof Object&&!n[e]instanceof Promise&&(I.find(function(t){return n[e]instanceof t})||!Object.isExtensible(n[e])||Object.isSealed(n[e])||(n[e]=t.make(n[e])))};for(var u in n)a(u);var s=n[A],l=n[j],D=n[S],N={get:function(r,o){if(l.has(o))return l.get(o);if(o===f||o===p||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return n[o];var a;if(s.has(o)?a=s.get(o):(a=Object.getOwnPropertyDescriptor(n,o),s.set(o,a)),a&&!a.configurable&&!a.writable)return n[o];if(E in n)return n[E](o);if(k in n&&!(o in n))return n[k](o);if(a&&!a.configurable&&!a.writable)return l.set(o,n[o]),n[o];if("function"==typeof n[o]){if(g in n[o])return n[o];Object.defineProperty(n[O],o,{configurable:!1,enumerable:!1,writable:!0,value:n[o]});var u=Object.getPrototypeOf(n)[o]===n[o],c="function"==typeof Promise&&n instanceof Promise||"function"==typeof Map&&n instanceof Map||"function"==typeof Set&&n instanceof Set||"function"==typeof M&&n.prototype===M||"function"==typeof B&&n.prototype===B||"function"==typeof B&&n.prototype===B||"function"==typeof WeakMap&&n instanceof WeakMap||"function"==typeof WeakSet&&n instanceof WeakSet||"function"==typeof Date&&n instanceof Date||"function"==typeof C&&n instanceof C||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"function"==typeof EventTarget&&n instanceof EventTarget||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||"function"==typeof MutationObserver&&n instanceof MutationObserver||"function"==typeof PerformanceObserver&&n instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&n instanceof IntersectionObserver||"function"==typeof n[Symbol.iterator]&&"next"===o?n:n[f],v=function t(){n[w]=o,D.unshift(o);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var l,f,p=i(n[T]);try{for(p.s();!(l=p.n()).done;)(0,l.value)(n,o,D,n,a)}catch(e){p.e(e)}finally{p.f()}if(this instanceof t?this.constructor:void 0)f=e(n[O][o],a);else{var v=n[O][o];f=u?v.apply(c||n,a):v.apply(void 0,a)}var h,y=i(n[x]);try{for(y.s();!(h=y.n()).done;)(0,h.value)(n,o,D,n,a)}catch(e){y.e(e)}finally{y.f()}return n[w]=null,D.shift(),f};(v[g]=v[g]||new WeakMap).set(n,o),v[E]=function(e){var t=v[g].get(n);return n[t][e]};var h=t.make(v);return l.set(o,h),h}return n[o]},set:function(e,r,o){if(l.has(r)&&l.delete(r),r===p)return!0;var a=n[v];if(r in a&&a[r]===o)return!0;if(r.slice&&"___"===r.slice(-3))return!0;if(e[r]===o||"number"==typeof o&&isNaN(a[r])&&isNaN(o))return!0;if(o&&o instanceof Object&&Object.isExtensible(n)&&!Object.isSealed(n)&&!I.find(function(e){return n instanceof e})&&(o=t.make(o),e[r]===o))return!0;a[r]=o;var u,s=i(n[d]);try{for(s.s();!(u=s.n()).done;)(0,u.value)(o,r,e,!1)}catch(e){s.e(e)}finally{s.f()}if(r in n[h]){var c,f=i(n[h][r]);try{for(f.s();!(c=f.n()).done;)(0,c.value)(o,r,e,!1,e[r])}catch(e){f.e(e)}finally{f.f()}}if(delete a[r],e instanceof File&&"lastModifiedDate"==r||Reflect.set(e,r,o),Array.isArray(e)&&n[h].length)for(var y in n[h].length)(0,n[h].length[y])(e.length,"length",e,!1,e.length);return!0},construct:function(i,o){var a="constructor";for(var u in i[T])i[T][u](i,a,n[S],void 0,o);var s=t.make(e(i[p],r(o)));for(var l in i[x])i[x][l](i,a,n[S],s,o);return s},getPrototypeOf:function(e){return P in n?n[P]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){var r=n[v];if(void 0!==r[t])return!0;if(!(t in e))return!0;if(s.has(t)){var o=s.get(t);if(o&&!o.configurable)return!1;s.delete(t)}r[t]=null,l.has(t)&&l.delete(t);var a,u=i(n[d]);try{for(u.s();!(a=u.n()).done;)(0,a.value)(void 0,t,e,!0,e[t])}catch(e){u.e(e)}finally{u.f()}if(t in n[h]){var c,f=i(n[h][t]);try{for(f.s();!(c=f.n()).done;)(0,c.value)(void 0,t,e,!0,e[t])}catch(e){f.e(e)}finally{f.f()}}return delete r[t],delete e[t],!0}};return n[R]&&(delete N.getPrototypeOf,delete N.get),Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(n,N)}),n[f]}},{key:"clearBindings",value:function(e){var t,n=(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)});e[d].clear(),n(e[j],e[h],e[x],e[T])}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(r&&1===i.length)return[this.make(e),i.shift(),o];(n=i.shift())in e&&e[n]&&e[n]instanceof Object||(e[n]=Object.create(null)),e=this.make(e[n])}return[this.make(e),n,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,i)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],(o=null)&&u(n.prototype,o),a&&u(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Bindable=N,s(N,"waiters",new WeakMap),s(N,"throttles",new WeakMap),Object.defineProperty(N,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:k}),Object.defineProperty(N,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:R}),Object.defineProperty(N,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(N,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:E})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var o=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(o)&&this.buckets.get(r).set(e,{value:t,expiration:i})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var i=this.buckets.get(n).get(e);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Cache=r}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===r(a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i={},o=n,a="object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":r(window))?window:"object"===("undefined"==typeof self?"undefined":r(self))?self:void 0;try{i=o("/Config").Config}catch(e){!0===a.devMode&&console.error(e),i={}}var u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r,i;return n=t,i=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var i=t[r];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],(r=null)&&e(n.prototype,r),i&&e(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Config=u,Object.defineProperty(u,"configs",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"mapTags",value:function(e,t,n,r,i){var o=[],a=!0;r&&(a=!1);var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)o.push(n(s.currentNode,s));return o}},{key:"dispatchEvent",value:function(t,n){t.dispatchEvent(n),e.mapTags(t,!1,function(e){e.dispatchEvent(n)})}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Dom=r}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),r)}var o,a}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=Symbol("constructor"),b=(Symbol("mixinList"),function(){function t(){v(this,t)}return y(t,null,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var a=l(u);function u(){var n;v(this,u);for(var s=arguments.length,l=new Array(s),p=0;p<s;p++)l[p]=arguments[p];var h,y=e.constructor?n=a.call.apply(a,[this].concat(l)):null,d=o(r);try{for(d.s();!(h=d.n()).done;){var b=h.value;switch(b[t.Constructor]&&b[t.Constructor].apply(f(n)),i(b)){case"function":t.mixClass(b,u);break;case"object":t.mixObject(b,f(n))}}}catch(e){d.e(e)}finally{d.f()}return c(n,y)}return y(u)}()}},{key:"make",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.pop();return t.to.apply(t,[i].concat(n))}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.map(function(n){switch(i(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[function(){return y(function e(){v(this,e)})}()].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!["name","prototype","length"].includes(i)){var a=Object.getOwnPropertyDescriptor(t,i);a&&!a.writable||("function"==typeof e[i]?t.prototype[i]=e.prototype[i].bind(t.prototype):t.prototype[i]=e.prototype[i])}}}catch(e){r.e(e)}finally{r.f()}var u,s=o(Object.getOwnPropertySymbols(e.prototype));try{for(s.s();!(u=s.n()).done;){var l=u.value;"function"==typeof e[l]?t.prototype[l]=e.prototype[l].bind(t.prototype):t.prototype[l]=e.prototype[l]}}catch(e){s.e(e)}finally{s.f()}var c,f=o(Object.getOwnPropertyNames(e));try{var p=function(){var n=c.value;if(["name","prototype","length"].includes(n))return"continue";var r=Object.getOwnPropertyDescriptor(t,n);if(r&&!r.writable)return"continue";if("function"!=typeof e[n])return t[n]=e[n],"continue";var i=t[n]||!1,o=e[n].bind(t);t[n]=function(){return i&&i.apply(void 0,arguments),o.apply(void 0,arguments)}};for(f.s();!(c=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}var v,h=o(Object.getOwnPropertySymbols(e));try{var y=function(){var n=v.value;if("function"!=typeof e[n])return t.prototype[n]=e[n],"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(h.s();!(v=h.n()).done;)y()}catch(e){h.e(e)}finally{h.f()}}},{key:"mix",value:function(t){for(var n={},i={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,l=o(Object.getOwnPropertyNames(e));try{var c=function(){var i=t.value,o=i.match(s);if(o){switch(o[1]){case"before":a.___before(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))})}return"continue"}return n[i]?"continue":"function"!=typeof e[i]?"continue":void(n[i]=e[i])};for(l.s();!(t=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}var f,p=o(u);try{var v=function(){var t=f.value,n=t.match(s);if(n){switch(n[1]){case"before":a.___before(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))})}return"continue"}return i[t]?"continue":"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(p.s();!(f=p.n()).done;)v()}catch(e){p.e(e)}finally{p.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var l in n)t[l]=n[l].bind(t);var c=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i[e].apply(this,n)}};for(var f in i)c(f);return a}}]),t}());t.Mixin=b,b.Constructor=d}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e,r=n("./View"),i=(n("./Cache"),n("./Config")),o=n("./Routes");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===f(o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=Symbol("NotFound"),v=Symbol("Internal"),h="object"===("undefined"==typeof globalThis?"undefined":f(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":f(window))?window:"object"===("undefined"==typeof self?"undefined":f(self))?self:void 0;h.CustomEvent=null!==(e=h.CustomEvent)&&void 0!==e?e:h.Event;var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=e||this.listener,this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){n.preventDefault(),n.state&&"routedId"in n.state?(n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId),t.state=n.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),t.isOriginLimited(location)?t.match(t.nextPath,e):t.match(location.pathname,e)};window.addEventListener("cvUrlChanged",r),window.addEventListener("popstate",r);var i=!this.isOriginLimited(location)&&location.pathname+location.search;!this.isOriginLimited(location)&&location.hash&&(i+=location.hash);var o={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};this.isOriginLimited(location)||history.replaceState(o,null,location.pathname),this.go(!1!==i?i:"/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.Config.get("title");n&&(document.title=n);var r={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):this.isOriginLimited(location)?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(r,null,e):location.pathname!==e&&history.pushState(r,null,e),(!t||t<0)&&(!1===t&&(this.path=null),t||("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,n){return"function"==typeof e[t]?e[t].prototype instanceof r.View?new e[t](n):e[t](n):e[t]}},{key:"handleError",value:function(e,t,n,r,i,o,a,u){"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:o,prev:a,view:i,routes:t,selected:n}}));var s=h.devMode?"Unexpected error: "+String(e):"Unexpected error.";t[v]&&(r[v]=e,s=this.processRoute(t,v,r)),this.update(i,o,s,t,n,r,u)}},{key:"match",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,s=!1;if(!0===r&&(s=r),r&&"object"===f(r)&&(s=r.forceRefresh,i=r.event),"undefined"==typeof document||this.path!==e||s){var l="http://example.com";"undefined"!=typeof document&&(l=this.isOriginLimited(location)?l:location.origin,this.queryString=location.search);var c=new URL(e,l);e=this.path=c.pathname,"undefined"==typeof document&&(this.queryString=c.search);var v=this.prevPath,h=t&&t.args?t.args.content:null,y=this.routes||t&&t.routes||o.Routes.dump(),d=new URLSearchParams(this.queryString);for(var b in i&&i.request&&(this.request=i.request),Object.keys(this.query))delete this.query[b];var m,g=u(d);try{for(g.s();!(m=g.n()).done;){var w=a(m.value,2),S=w[0],j=w[1];this.query[S]=j}}catch(e){g.e(e)}finally{g.f()}var O={},P=!1,k="";for(var E in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)O[E]=this.query[E];e:for(var _ in y){var A=_.split("/");if(!(A.length<e.length&&"*"!==A[A.length-1])){for(var T in A)if("%"==A[T].substr(0,1)){var x=null,R=/^%(\w+)\??/.exec(A[T]);if(R&&R[1]&&(x=R[1]),!x)throw new Error("".concat(A[T],' is not a valid argument segment in route "').concat(_,'"'));if(e[T])O[x]=e[T];else{if("?"!=A[T].substr(A[T].length-1,1))continue e;O[x]=""}}else if("*"!==A[T]&&e[T]!==A[T])continue e;P=_,k=y[_],"*"===A[A.length-1]&&(O.pathparts=e.slice(A.length-1));break}}var C=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:v,root:t,selected:P,routes:y}});if("undefined"==typeof document||document.dispatchEvent(C)){if(!s&&t&&h&&k instanceof Object&&h instanceof k&&!(k instanceof Promise)&&h.update(O))return t.args.content=h,!0;P in y||(y[P]=y[p]);try{return!1===(k=this.processRoute(y,P,O))&&(k=this.processRoute(y,p,O)),"undefined"==typeof document?k instanceof Promise?k:Promise.resolve(k):k instanceof Promise?k.then(function(r){return n.update(t,e,r,y,P,O,s)}).catch(function(r){n.handleError(r,y,P,O,t,e,v,s)}):this.update(t,e,k,y,P,O,s)}catch(n){this.handleError(n,y,P,O,t,e,v,s)}}}}},{key:"update",value:function(e,t,n,i,o,a,u){if(e){var s=this.prevPath,l=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:t,prev:s,view:e,routes:i,selected:o}});!1!==n&&(e.args.content instanceof r.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(l)&&(e.args.content=n),n instanceof r.View&&(n.pause(!1),n.update(a,u)));var c=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:t,prev:s,view:e,routes:i,selected:o}});document.dispatchEvent(c)}}},{key:"isOriginLimited",value:function(e){var t=e.origin;return"null"===t||"file://"===t}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},i=u(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var o=e.value;r[o[0]]=o[1]}}catch(e){i.e(e)}finally{i.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var i in t||(r=this.queryOver(e)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var i=this.queryToString(r,!0);this.go(location.pathname+(i?"?"+i:"?"),n)}}],(n=null)&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Router=y,Object.defineProperty(y,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(y,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(y,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(y,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(y,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(y,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:v}),Object.defineProperty(y,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:p})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var i={},o=n,a=!1,u=function(){if(!a){try{Object.assign(i,o("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}a=!0}},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"get",value:function(e){return u(),this.routes[e]}},{key:"dump",value:function(){return u(),this.routes}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Routes=s,Object.defineProperty(s,"routes",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;n("./Dom");var e=n("./Tag"),r=n("./View");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),r)}var o,a}var c=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,o=this.globalRules[n][r],u=this.wrap(e,o,t),s=a(e.querySelectorAll(n));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=n;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(o=function(){return n}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(n)){var a,u;i&&(a=u=i,i.viewList&&(u=i.viewList.parent));var s=new e.Tag(t,u,null,void 0,a),l=s.element.parentNode,c=s.element.nextSibling,f=o(s);if(!1!==f&&t.___cvApplied___.add(n),f instanceof HTMLElement&&(f=new e.Tag(f)),f instanceof e.Tag){if(!f.element.contains(s.element)){for(;s.element.firstChild;)f.element.appendChild(s.element.firstChild);s.remove()}c?l.insertBefore(f.element,c):l.appendChild(f.element)}f&&f.prototype&&f.prototype instanceof r.View&&(f=new f({},i)),f instanceof r.View&&(i&&(i.cleanup.push(function(){return f.remove()}),i.cleanup.push(i.args.bindTo(function(e,t,n){n[t]=e,f.args[t]=e})),i.cleanup.push(f.args.bindTo(function(e,t,n,r){n[t]=e,i.args[t]=e}))),s.clear(),f.render(s.element))}}}}],(i=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var o,u=this.rules[r][i],s=t.wrap(e,u,n),l=a(e.querySelectorAll(r));try{for(l.s();!(o=l.n()).done;){s(o.value)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=o(t[e],2),r=n[0];n[1];if(this.rules[r])for(var i in this.rules[r])delete this.rules[r][i]}}}])&&l(n.prototype,i),u&&l(n,u),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.RuleSet=c}()}),require.register("curvature/base/SetMap.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(e,t,i){return(n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var l=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="_map",r=new Map,(n=s(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,r,a;return t=e,(r=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;){return t.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return n(Set,i(i(this._map.values()).map(function(e){return i(e.values())})))}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SetMap=l}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===r(a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}var o=Symbol("CurrentStyle"),a=function(e){if(this.node)for(var t in e){var n=String(e[t]);this[o].has(t)&&this[o].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,n):this.node.style[t]=n,void 0!==e[t]?this[o].set(t,e[t]):this[o].delete(t))}},u=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var n;return(n=t.node)[e].apply(n,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},s=function(){function t(n,r,i,s,l){var c=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var f=document.createRange().createContextualFragment(n);n=f.firstChild}this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=l,this.ref=i,this.index=s,this.cleanup=[],this[e.Bindable.OnAllGet]=u.bind(this),this[o]=new Map;var p=e.Bindable.make(a.bind(this));return Object.defineProperty(this,"style",{value:p}),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t,n,r){c[o].has(t)&&c[o].get(t)===e||(c.node.style[t]=e,r||void 0===e?c[o].delete(t):c[o].set(t,e))}),this.proxy.bindTo(function(e,t){if("index"!==t)return t in n&&n[t]!==e&&(n[t]=e),!1}),this.proxy}var n,r,s;return n=t,(r=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var i=function(){r.removeEventListener(e,t,n)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return o()}),o}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Tag=s}()}),require.register("curvature/base/Uuid.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";var e;function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function r(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Uuid=void 0;var a=("object"===("undefined"==typeof globalThis?"undefined":o(globalThis))?globalThis:"object"===("undefined"==typeof window?"undefined":o(window))?window:"object"===("undefined"==typeof self?"undefined":o(self))?self:void 0).crypto;e=Symbol.toPrimitive;var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"uuid",null),r(this,"version",4),e){if("string"!=typeof e&&!(e instanceof t)||!e.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(e,'"'));this.version=n,this.uuid=e}else if(a&&"function"==typeof a.randomUUID)this.uuid=a.randomUUID();else{var i=a&&"function"==typeof a.randomUUID?function(){return a.getRandomValues(new Uint8Array(1))[0]}:function(){return Math.trunc(256*Math.random())};this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^i()&15>>e/4).toString(16)})}Object.freeze(this)}var i,o,u;return i=t,(o=[{key:e,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&n(i.prototype,o),u&&n(i,u),Object.defineProperty(i,"prototype",{writable:!1}),t}();t.Uuid=u}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),i=n("./Router"),o=n("./Uuid"),a=n("./Dom"),u=n("./Tag"),s=n("./Bag"),l=n("./RuleSet"),c=n("./Mixin"),f=n("../mixin/EventTargetMixin");function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function d(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===v(o=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,n)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Symbol("dontParse"),P=Symbol("expandBind"),k=Symbol("uuid"),E=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(_,c.Mixin.with(f.EventTargetMixin));var d,b,j,E=w(_);function _(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=E.call(this,n,r))[f.EventTargetMixin.Parent]=r,Object.defineProperty(S(t),"args",{value:e.Bindable.make(n)}),Object.defineProperty(S(t),k,{value:t.constructor.uuid()}),Object.defineProperty(S(t),"nodesAttached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"nodesDetached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"_onRemove",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"cleanup",{value:[]}),Object.defineProperty(S(t),"parent",{value:r,writable:!0}),Object.defineProperty(S(t),"views",{value:new Map}),Object.defineProperty(S(t),"viewLists",{value:new Map}),Object.defineProperty(S(t),"withViews",{value:new Map}),Object.defineProperty(S(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(S(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(S(t),"timeouts",{value:new Map}),Object.defineProperty(S(t),"intervals",{value:new Map}),Object.defineProperty(S(t),"frames",{value:[]}),Object.defineProperty(S(t),"ruleSet",{value:new l.RuleSet}),Object.defineProperty(S(t),"preRuleSet",{value:new l.RuleSet}),Object.defineProperty(S(t),"subBindings",{value:{}}),Object.defineProperty(S(t),"templates",{value:{}}),Object.defineProperty(S(t),"postMapping",{value:new Set}),Object.defineProperty(S(t),"eventCleanup",{value:[]}),Object.defineProperty(S(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(S(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(S(t),"rendered",{value:new Promise(function(e,n){return Object.defineProperty(S(t),"renderComplete",{value:e})})}),t.onRemove(function(){t[f.EventTargetMixin.Parent]&&(t[f.EventTargetMixin.Parent]=null)}),t.controller=S(t),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,t.loaded=Promise.resolve(S(t)),t}return d=_,b=[{key:"_id",get:function(){return this[k]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(i){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},i=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},o=setTimeout(i,e);return r.callback=i,r.timeout=o,this.timeouts.set(r.timeout,r),o}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(this.timeouts.has(e)){var t=this.timeouts.get(e);clearTimeout(t.timeout),this.timeouts.delete(t.timeout)}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.set(n,{timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){if(this.intervals.has(e)){var t=this.intervals.get(e);clearTimeout(t.timeout),this.intervals.delete(t.timeout)}}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=y(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=(r[0],r[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=Math.max(0,i.time-(Date.now()-i.created)))}}catch(e){n.e(e)}finally{n.f()}var o,a=y(this.intervals);try{for(a.s();!(o=a.n()).done;){var u=h(o.value,2),s=(u[0],u[1]);clearInterval(s.timeout),s.paused=!0}}catch(e){a.e(e)}finally{a.f()}}else{var l,c=y(this.timeouts);try{for(c.s();!(l=c.n()).done;){var f=h(l.value,2),p=(f[0],f[1]);p.paused&&(p.fired?this.timeouts.delete(p.timeout):(p.timeout=setTimeout(p.callback,p.time),p.paused=!1))}}catch(e){c.e(e)}finally{c.f()}var v,d=y(this.intervals);try{for(d.s();!(v=d.n()).done;){var b=h(v.value,2),m=(b[0],b[1]);m.paused&&(m.timeout=setInterval(m.callback,m.time),m.paused=!1)}}catch(e){d.e(e)}finally{d.f()}var g,w=y(this.unpauseCallbacks);try{for(w.s();!(g=w.n()).done;){(0,h(g.value,2)[1])()}}catch(e){w.e(e)}finally{w.f()}this.unpauseCallbacks.clear()}var S,j=y(this.viewLists);try{for(j.s();!(S=j.n()).done;){var O=h(S.value,2);O[0];O[1].pause(!!e)}}catch(e){j.e(e)}finally{j.f()}for(var P in this.tags)if(Array.isArray(this.tags[P]))for(var k in this.tags[P])this.tags[P][k].pause(!!e);else this.tags[P].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n instanceof _&&(n=n.firstNode.parentNode),r instanceof _&&(r=r.firstNode),this.firstNode)return this.reRender(n,r,i);this.dispatchEvent(new CustomEvent("render"));var o,a="object"===v(this.template)&&"function"==typeof this.template.cloneNode,u=a||_.templates.has(this.template);if(o=u?a?this.template.cloneNode(!0):_.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template),u||a||_.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(p(Array.from(o.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(o,this.lastNode),0;var s=n.getRootNode();if(s.isConnected)this.attached(s,n),this.dispatchAttached(s,n,i);else if(i){i.addEventListener("attached",function e(r){var o=n.getRootNode();t.attached(o,n),t.dispatchAttached(o,n,i),i.removeEventListener("attached",e)})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(n);var r,i=y(this.nodesAttached.items());try{for(i.s();!(r=i.n()).done;){(0,r.value)(e,t)}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).forEach(function(n){n.matches&&(n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})),a.Dom.mapTags(n,!1,function(n,r){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))}))})}},{key:"reRender",value:function(e,t,n){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this,view:n})){var r=new DocumentFragment;if(this.firstNode.isConnected){var i=this.nodesDetached.items();for(var o in i)i[o]()}if(r.append.apply(r,p(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(r,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this,view:n});var a=e.getRootNode();a.isConnected&&(this.attached(a,e),this.dispatchAttached(a,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,function(e,n){e[O]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)}),this.postMapping.forEach(function(e){return e()})}},{key:"mapExpandableTag",value:function(t){var n=t[P];n&&(n(),t[P]=!1);var r=h(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),i=r[0],o=r[1];return t.removeAttribute("cv-expand"),i[o]||(i[o]={}),i[o]=e.Bindable.make(i[o]),this.onRemove(t[P]=i[o].bindTo(function(e,n,r,i,o){i||void 0===e?t.removeAttribute(n,e):null!==e?t.setAttribute(n,e):t.setAttribute(n,"")})),t}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(/[,;]/).map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var i=t.cloneNode(!0),o=function(){var t=n[a][1]||n[a][0],o=h(e.Bindable.resolve(r.args,t,!0),2),u=o[0],s=o[1],l=n[a][0];r.onRemove(u.bindTo(s,function(e,t,n,r){r||void 0===e?i.removeAttribute(l,e):null!==e?i.setAttribute(l,e):i.setAttribute(l,"")}))};for(var a in n)o();return i}}},{key:"mapInterpolatableTag",value:function(t){var n=this,r=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var i=t.nodeValue;if(!this.interpolatable(i))return t;for(var o,a=0,s=function(){var r=o[2],s=!1,l=!1,c=r.split("|"),p=!1;if(c.length>1&&(p=n.stringTransformer(c.slice(1)),r=c[0]),"$$"===r.substr(0,2)&&(s=!0,l=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var y=i.substring(a,o.index);a=o.index+o[1].length;var d,b=document.createTextNode(y);b[O]=!0,t.parentNode.insertBefore(b,t),(d=s?document.createElement("div"):document.createTextNode(""))[O]=!0;var m=n.args,g=r;if(r.match(/\./)){var w=h(e.Bindable.resolve(n.args,r,!0),2);m=w[0],g=w[1]}if(t.parentNode.insertBefore(d,t),"object"!==v(m))return"break";var S=(m=e.Bindable.make(m)).bindTo(g,function(e,r,i){if(i[r]!==e&&(i[r]instanceof _||i[r]instanceof Node||i[r]instanceof u.Tag)&&(i[r].preserve||i[r].remove()),d.nodeValue="",l&&!(e instanceof _)){var o,a=null!==(o=e)&&void 0!==o?o:"";(e=new _(n.args,n)).template=a}if(p&&(e=p(e)),e instanceof _){e[f.EventTargetMixin.Parent]=n,e.render(t.parentNode,d,n);var c=function(){e.preserve||e.remove()};n.onRemove(c),e.onRemove(function(){return n._onRemove.remove(c)})}else e instanceof Node?(t.parentNode.insertBefore(e,d),n.onRemove(function(){return e.remove()})):e instanceof u.Tag?e.node?(t.parentNode.insertBefore(e.node,d),n.onRemove(function(){return e.remove()})):e.remove():(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),s?d.innerHTML=e:d.nodeValue=e);d[O]=!0});n.onRemove(S)};o=r.exec(i);){var l=s();if("continue"!==l&&"break"===l)break}var c=i.substring(a),p=document.createTextNode(c);p[O]=!0,t.parentNode.insertBefore(p,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var y=function(){if(!n.interpolatable(t.attributes[d].value))return"continue";for(var i,o=0,a=t.attributes[d].value,u=t.attributes[d],s={},l=[];i=r.exec(a);)l.push(a.substring(o,i.index)),s[i[2]]||(s[i[2]]=[]),s[i[2]].push(l.length),l.push(i[1]),o=i.index+i[1].length;l.push(a.substring(o));var c=function(){var r=n.args,i=f,o=f.split("|"),a=!1,c=f;if(o.length>1&&(a=n.stringTransformer(o.slice(1)),i=o[0]),i.match(/\./)){var p=h(e.Bindable.resolve(n.args,i,!0),2);r=p[0],i=p[1]}s[c];n.onRemove(r.bindTo(i,function(e,r,o,f){for(var p in a&&(e=a(e)),s)for(var v in s[c])l[s[c][v]]=o[p],r===i&&(l[s[c][v]]=e);n.paused?n.unpauseCallbacks.set(u,function(){return t.setAttribute(u.name,l.join(""))}):t.setAttribute(u.name,l.join(""))}))};for(var f in s)c()},d=0;d<t.attributes.length;d++)y();return t}},{key:"mapRefTag",value:function(e){var t=h(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],i=void 0===r?null:r,o=t[2],a=void 0===o?null:o,s=u.Tag;i&&(s=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var l=this;this.viewList&&(l=this.viewList.parent);var c=new s(e,this,n,void 0,this);for(e.___tag___=c,this.tags[n]=c;l;){var f=this.args[a];if(void 0!==f?(l.tags[n]||(l.tags[n]=[]),l.tags[n][f]=c):l.tags[n]=c,!l.parent)break;l=l.parent}return e}},{key:"mapBindTag",value:function(t){var n=this,r=t.getAttribute("cv-bind"),i=this.args,o=r,s=null;if(r.match(/\./)){var l=h(e.Bindable.resolve(this.args,r,!0),3);i=l[0],o=l[1],s=l[2]}i!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var c=!1;"$"===o.substr(0,1)&&(o=o.substr(1),c=!0);var p=!1,v=i.bindTo(o,function(e,r,i,o,s){if((s instanceof _||s instanceof Node||s instanceof u.Tag)&&s!==e&&s.remove(),["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var l=t.getAttribute("type");if(l&&"checkbox"===l.toLowerCase())t.checked=!!e;else if(l&&"radio"===l.toLowerCase())t.checked=e==t.value;else if("file"!==l)if("SELECT"===t.tagName){var v=function(){for(var n=0;n<t.options.length;n++){t.options[n].value==e&&(t.selectedIndex=n)}};v(),n.nodesAttached.add(v)}else t.value=null==e?"":e;p&&t.dispatchEvent(new CustomEvent("cvAutoChanged",{bubbles:!0})),p=!0}else if(e instanceof _){var h,d=y(t.childNodes);try{for(d.s();!(h=d.n()).done;){h.value.remove()}}catch(e){d.e(e)}finally{d.f()}e[f.EventTargetMixin.Parent]=n,e.render(t,null,n)}else if(e instanceof Node)t.insert(e);else if(e instanceof u.Tag)t.append(e.node);else if(c){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var b,m=y(t.childNodes);try{for(m.s();!(b=m.n()).done;){b.value.remove()}}catch(e){m.e(e)}finally{m.f()}t.innerHTML=e}a.Dom.mapTags(t,!1,function(e){return e[O]=!0})}}else if(t.textContent!==e){var g,w=y(t.childNodes);try{for(w.s();!(g=w.n()).done;){g.value.remove()}}catch(e){w.e(e)}finally{w.f()}t.textContent=e}});i!==this.args&&this.subBindings[r].push(v),this.onRemove(v);var d=t.getAttribute("type"),b=t.getAttribute("multiple"),m=function(n){if(n.target===t)if(d&&"checkbox"===d.toLowerCase())t.checked?i[o]=n.target.getAttribute("value"):i[o]=!1;else if(n.target.matches("[contenteditable=true]"))i[o]=n.target.innerHTML;else if("file"===d&&b){var r=Array.from(n.target.files),a=i[o]||e.Bindable.onDeck(i,o);if(a&&r.length){var u=function(e){if(r[e]!==a[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=r[e],"break"};for(var s in r){if("break"===u(s))break}}else i[o]=r}else if("file"===d&&!b&&n.target.files.length){var l=n.target.files.item(0);l.toJSON=function(){return{name:l.name,size:l.size,type:l.type,date:l.lastModified}},i[o]=l}else i[o]=n.target.value};return"file"===d||"radio"===d?t.addEventListener("change",m):(t.addEventListener("input",m),t.addEventListener("change",m),t.addEventListener("value-changed",m)),this.onRemove(function(){"file"===d||"radio"===d?t.removeEventListener("change",m):(t.removeEventListener("input",m),t.removeEventListener("change",m),t.removeEventListener("value-changed",m))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).forEach(function(n){var r,i=(n=n.map(function(e){return e.trim()})).length,o=String(n.shift()).trim(),a=String(n.shift()||o).trim(),u=String(n.shift()||"").trim(),s=[],l=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);l&&(a=l[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),l[2]&&(s=l[2].split(",").map(function(e){return e.trim()}))),s.length||s.push("$event"),o&&1!==i||(o=a);for(var c=t,f=function(){var e=c.controller;return"function"==typeof e[a]?(r=function(){e[a].apply(e,arguments)},"break"):"function"==typeof c[a]?(r=function(){var e;(e=c)[a].apply(e,arguments)},"break"):c.parent?void(c=c.parent):"break"};c;){if("break"===f())break}var v=function(n){var i=s.map(function(r){var i;return Number(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?c:"$controller"===r?controller:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(i=/^['"]([\w-]+?)["']$/.exec(r))?i[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,p(i))},h={};switch(u.includes("p")?h.passive=!0:u.includes("P")&&(h.passive=!1),u.includes("c")?h.capture=!0:u.includes("C")&&(h.capture=!1),u.includes("o")?h.once=!0:u.includes("O")&&(h.once=!1),o){case"_init":v();break;case"_attach":t.nodesAttached.add(v);break;case"_detach":t.nodesDetached.add(v);break;default:e.addEventListener(o,v,h),t.onRemove(function(){e.removeEventListener(o,v,h)})}return[o,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return e.removeAttribute("cv-prerender"),n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&this.postMapping.add(function(){return e.parentNode.removeChild(e)}),e}},{key:"mapWithTag",value:function(t){var n=this,r=t.getAttribute("cv-with"),i=t.getAttribute("cv-carry"),o=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):_,u=new DocumentFragment;p(t.childNodes).forEach(function(e){return u.appendChild(e)});var s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var l=this.args.bindTo(r,function(r,i,o,l){for(n.withViews.has(t)&&n.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var c=new a({},n);n.onRemove(function(e){return function(){e.remove()}}(c)),c.template=u;var f=function(){var e=n.args.bindTo(s[p],function(e,t){c.args[t]=e});c.onRemove(e),n.onRemove(function(){e(),c.remove()})};for(var p in s)f();var h=function(){if("object"!==v(r))return"continue";var t=(r=e.Bindable.make(r)).bindTo(y,function(e,t,n,r){r?t in c.args&&delete c.args[t]:c.args[t]=e});c.args.bindTo(y,function(e,t,n,i){i?t in r&&delete r[t]:r[t]=e});n.onRemove(function(){t(),r.isBound()||e.Bindable.clearBindings(r),c.remove()}),c.onRemove(function(){t(),r.isBound()||e.Bindable.clearBindings(r)})};for(var y in r)h();c.render(t,null,n),n.withViews.set(t,c)});return this.onRemove(function(){n.withViews.delete(t),l()}),t}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;p(e.childNodes).forEach(function(e){return r.appendChild(e)});var i=n.split(":"),o=i.shift(),a=new(i.length?this.stringToClass(i[0]):_)(this.args,this);return this.views.set(e,a),this.views.set(o,a),this.onRemove(function(){a.remove(),t.views.delete(e),t.views.delete(o)}),a.template=r,a.render(e,null,this),e}},{key:"mapEachTag",value:function(t){var n=this,i=t.getAttribute("cv-each"),o=t.getAttribute("cv-view");t.removeAttribute("cv-each"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):_,u=new DocumentFragment;p(t.childNodes).forEach(function(e){return u.appendChild(e)});var l=h(i.split(":"),3),c=l[0],f=l[1],v=l[2],y=this.args,d=c;if(c.match(/\./)){var b=h(e.Bindable.resolve(this.args,c,!0),2);y=b[0],d=b[1]}var m=y.bindTo(d,function(e,i,o,l,c){e instanceof s.Bag&&(e=e.list),n.viewLists.has(t)&&n.viewLists.get(t).remove();var p=new r.ViewList(u,f,e,n,v,a),h=function(){return p.remove()};n.onRemove(h),p.onRemove(function(){return n._onRemove.remove(h)});var y=n.args.bindTo(function(e,t,n,r){"_id"!==t&&(r?t in p.subArgs&&delete p.subArgs[t]:p.subArgs[t]=e)}),d=p.args.bindTo(function(e,t,r,i,o){"_id"!==t&&"value"!==t&&"___"!==String(t).substring(0,3)&&(i?delete n.args[t]:t in n.args&&(n.args[t]=e))});for(p.onRemove(y),p.onRemove(d),n.onRemove(y),n.onRemove(d);t.firstChild;)t.removeChild(t.firstChild);n.viewLists.set(t,p),p.render(t,null,n)});return this.onRemove(m),t}},{key:"mapIfTag",value:function(t){var n=this,r=t,i=r.getAttribute("cv-view"),o=r.getAttribute("cv-if"),u=r.getAttribute("cv-is"),l=!1,c=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var f=i?this.stringToClass(i):_;"!"===o.substr(0,1)&&(o=o.substr(1),l=!0),"?"===o.substr(0,1)&&(o=o.substr(1),c=!0);var v=new DocumentFragment;p(r.childNodes).forEach(function(e){return v.appendChild(e)});var y=this,d=new DocumentFragment,b=new f(this.args,y);b.tags.bindTo(function(e,t){return n.tags[t]=e},{removeWith:this}),b.template=v;var m=y.args,g=o;if(o.match(/\./)){var w=h(e.Bindable.resolve(y.args,o,!0),2);m=w[0],g=w[1]}b.render(d,null,this);var S=m.bindTo(g,function(e,r){var i=e;c&&(e=null!==e&&void 0!==e),e instanceof s.Bag&&(e=e.list),Array.isArray(e)&&(e=!!e.length),null!==u&&(e=i==u),l&&(e=!e),e?(t.appendChild(d),p(d.childNodes).forEach(function(e){return a.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:b||n,mainView:n}}))})})):(b.nodes.forEach(function(e){return d.appendChild(e)}),a.Dom.mapTags(d,!1,function(e,t){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:b||n,mainView:n}})}))},{children:Array.isArray(m[g])});y.onRemove(S);return y.onRemove(function(){S(),y._onRemove.remove(S)}),this.onRemove(function(){b.remove(),y!==n&&y.remove()}),t}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");e.removeAttribute("cv-template");var n=e.innerHTML;return _.templates.has(n)||_.templates.set(n,document.createRange().createContextualFragment(e.innerHTML)),this.templates[t]=_.templates.get(n),this.postMapping.add(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(n.cloneNode(!0)),e}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var n=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?n():requestAnimationFrame(n);var r,i=y(this._onRemove.items());try{for(i.s();!(r=i.n()).done;){var o=r.value;o(),this._onRemove.remove(o)}}catch(e){i.e(e)}finally{i.f()}var a,u=y(this.cleanup);try{for(u.s();!(a=u.n()).done;){var s=a.value;s&&s()}}catch(e){u.e(e)}finally{u.f()}this.cleanup.length=0;var l,c=y(this.viewLists);try{for(c.s();!(l=c.n()).done;){var f=h(l.value,2);f[0];f[1].remove()}}catch(e){c.e(e)}finally{c.f()}this.viewLists.clear();var p,v=y(this.timeouts);try{for(v.s();!(p=v.n()).done;){var d=h(p.value,2),b=(d[0],d[1]);clearTimeout(b.timeout),this.timeouts.delete(b.timeout)}}catch(e){v.e(e)}finally{v.f()}var m,g=y(this.intervals);try{for(g.s();!(m=g.n()).done;){var w=m.value;clearInterval(w)}}catch(e){g.e(e)}finally{g.f()}this.intervals.length=0;var S,j=y(this.frames);try{for(j.s();!(S=j.n()).done;){(0,S.value)()}}catch(e){j.e(e)}finally{j.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new u.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this,n=this.nodes.filter(function(t){return t.matches&&t.matches(e)}),r=this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return p(t.querySelectorAll(e))}).flat().map(function(e){return new u.Tag(e,t,void 0,void 0,t)})||[];return n.concat(r)}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var i=t,o=e[r];i&&!i[o];)i=i.parent;if(!i)return;n=i[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(_.refClasses.has(e))return _.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],i=n(e);return _.refClasses.set(e,i[r]),i[r]}},{key:"preventParsing",value:function(e){e[O]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var i=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof _)return this.listen(e.nodes,t,n,r);if(Array.isArray(e))return e.map(function(e){return i.listen(e,t,n,r)});if(e instanceof u.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var o=function(){return e.removeEventListener(t,n,r)},a=function(){o(),o=function(){}};return this.onRemove(function(){return a()}),a}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],j=[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return _}},{key:"uuid",value:function(){return new o.Uuid}}],b&&m(d.prototype,b),j&&m(d,j),Object.defineProperty(d,"prototype",{writable:!1}),_}();t.View=E,Object.defineProperty(E,"templates",{value:new Map}),Object.defineProperty(E,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./SetMap"),i=n("./Bag");function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===u(o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}var l=function(){function t(n,r,o,a){var s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.removed=!1,this.args=e.Bindable.makeBindable(Object.create(null)),this.args.value=e.Bindable.makeBindable(o||Object.create(null)),this.subArgs=e.Bindable.makeBindable(Object.create(null)),this.views=[],this.cleanup=[],this.viewClass=c,this._onRemove=new i.Bag,this.template=n,this.subProperty=r,this.keyProperty=l,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.viewCount=0,this.rendered=new Promise(function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,i){"bindTo"!=t&&(s.paused=!0)}),this.args.___after(function(e,t,n,r,i){"bindTo"!=t&&(s.paused=n.length>1,s.reRender())});var f=this.args.value.bindTo(function(e,t,n,r){if(!s.paused){var i=t;if("symbol"!==u(t))if(isNaN(t)&&(i="_"+t),r)for(var o in s.views[i]&&s.views[i].remove(!0),delete s.views[i],s.views)isNaN(o)?s.views[o].args[s.keyProperty]=o.substr(1):s.views[o].args[s.keyProperty]=o;else s.views[i]?s.views[i]&&s.views[i].args&&(s.views[i].args[s.keyProperty]=t,s.views[i].args[s.subProperty]=e):!1===s.willReRender&&(s.willReRender=requestAnimationFrame(function(){s.willReRender=!1,s.reRender()}))}});this._onRemove.add(f),Object.preventExtensions(this)}var n,a,l;return n=t,(a=[{key:"render",value:function(e){var t,n=this,r=[],i=o(this.views);try{var a=function(){var i=t.value;i.viewList=n,i.render(e,null,n.parent),r.push(i.rendered.then(function(){return i}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new r.SetMap;for(var i in this.views){var a=this.views[i],u=a.args[this.subProperty];n.add(u,a),t[i]=a}var s=[],l=new Set;this.downDebind.length&&this.downDebind.forEach(function(e){return e&&e()}),this.upDebind.length&&this.upDebind.forEach(function(e){return e&&e()}),this.upDebind.length=0,this.downDebind.length=0;var c=1/0,f=1/0,p=function(){var t=!1,r=v;if(isNaN(r)?r="_"+v:String(r).length&&(r=Number(r)),void 0!==e.args.value[v]&&n.has(e.args.value[v])){var i=n.getOne(e.args.value[v]);i&&(i.args[e.keyProperty]=v,s[r]=i,l.add(i),t=!0,isNaN(r)||(c=Math.min(c,r),r>0&&(f=Math.min(f,r))),n.remove(e.args.value[v],i))}if(!t){var o=Object.create(null),a=s[r]=new e.viewClass(o,e.parent);isNaN(r)||(c=Math.min(c,r),r>0&&(f=Math.min(f,r))),s[r].template=e.template,s[r].viewList=e,s[r].args[e.keyProperty]=v,s[r].args[e.subProperty]=e.args.value[v],e.upDebind[r]=o.bindTo(e.subProperty,function(t,n,r,i){var a=o[e.keyProperty];i?delete e.args.value[a]:e.args.value[a]=t}),e.downDebind[r]=e.subArgs.bindTo(function(e,t,n,r){r?delete o[t]:o[t]=e});var u=function(){e.upDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.upDebind.length=0},p=function(){e.downDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.downDebind.length=0};a.onRemove(function(){e._onRemove.remove(u),e._onRemove.remove(p),e.upDebind[r]&&e.upDebind[r](),e.downDebind[r]&&e.downDebind[r](),delete e.upDebind[r],delete e.downDebind[r]}),e._onRemove.add(u),e._onRemove.add(p),o[e.subProperty]=e.args.value[v]}};for(var v in this.args.value)p();for(var h in t)l.has(t[h])||t[h].remove(!0);if(Array.isArray(this.args.value)){var y=0===c&&void 0!==s[1]&&s.length>1||f===1/0?c:f;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=s.length-n-1;r>y&&void 0===s[r];)r--;if(r<y)return Promise.resolve();if(s[r]===e.views[r])return s[r]&&!s[r].firstNode?(s[r].render(e.tag,s[r+1],e.parent),s[r].rendered.then(function(){return t(Number(n)+1)})):0===n||n%500?t(Number(n)+1):new Promise(function(e){return requestAnimationFrame(function(){return e(t(Number(n)+1))})});return s[r].render(e.tag,s[r+1],e.parent),e.views.splice(r,0,s[r]),s[r].rendered.then(function(){return t(n+1)})}()}else{var d,b=[],m=Object.assign(Object.create(null),s),g=function(e){return parseInt(e)===e-0},w=o(Object.keys(s).sort(function(e,t){return g(e)&&g(t)?Math.sign(e-t):g(e)||g(t)?!g(e)&&g(t)?-1:g(e)&&!g(t)?1:void 0:0}));try{var S=function(){var t=d.value;if(delete m[t],s[t].firstNode&&s[t]===e.views[t])return"continue";s[t].render(e.tag,null,e.parent),b.push(s[t].rendered.then(function(){return s[t]}))};for(w.s();!(d=w.n()).done;)S()}catch(e){w.e(e)}finally{w.f()}for(var j in m)delete this.args.views[j],m.remove(!0);this.rendered=Promise.all(b)}for(var O in s)isNaN(O)?s[O].args[this.keyProperty]=O.substr(1):s[O].args[this.keyProperty]=O;return this.views=Array.isArray(this.args.value)?[].concat(s):s,this.viewCount=l.size,l.clear(),this.willReRender=!1,this.rendered.then(function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))}),this.rendered}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove(!0);var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.removed=!0}}])&&s(n.prototype,a),l&&s(n,l),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.ViewList=l}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var r,i=n("../base/Mixin");function o(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=Symbol("EventTargetParent"),p=Symbol("CallHandler"),v=Symbol("Capture"),h=Symbol("Bubble"),y=(Symbol("Target"),Symbol("HandlersBubble")),d=Symbol("HandlersCapture"),b=(o(r={},i.Mixin.Constructor,function(){this[d]=new Map,this[y]=new Map}),o(r,"dispatchEvent",function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];"string"==typeof i&&(i=new CustomEvent(i),n[0]=i),i.cvPath=i.cvPath||[],i.cvTarget=i.cvCurrentTarget=this;var o=this[v].apply(this,n);if(i.cancelable&&(!1===o||i.cancelBubble))return o;var a=[];if(this[d].has(i.type)){var l=this[d].get(i.type),c=s(l);c.forEach(function(e){return e.push(l)}),a.push.apply(a,s(c))}if(this[y].has(i.type)){var b=this[y].get(i.type),m=s(b);m.forEach(function(e){return e.push(b)}),a.push.apply(a,s(m))}a.push([function(){return e[p].apply(e,n)},{},null]);for(var g=0,w=a;g<w.length;g++){var S=u(w[g],3),j=S[0],O=S[1],P=S[2];if(O.once&&P.delete(j),o=j(i),i.cancelable&&!1===o)break}return i.cancelable&&(i.cancelBubble||!1===o)||this[h].apply(this,n),this[f]||Object.freeze(i.cvPath),i.returnValue}),o(r,"addEventListener",function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===r&&(r={useCapture:!0});var i=y;r.useCapture&&(i=d),this[i].has(e)||this[i].set(e,new Map),this[i].get(e).set(t,r),r.signal&&r.signal.addEventListener("abort",function(i){return n.removeEventListener(e,t,r)},{once:!0})}),o(r,"removeEventListener",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===n&&(n={useCapture:!0});var r=y;n.useCapture&&(r=d),this[r].has(e)&&this[r].get(e).delete(t)}),o(r,v,function(){var e,t=arguments.length<=0?void 0:arguments[0];if(t.cvPath.push(this),this[f]){var n=(e=this[f])[v].apply(e,arguments);if((!t.cancelable||!1!==n&&!t.cancelBubble)&&this[f][d].has(t.type)){t.cvCurrentTarget=this[f];var r,i=t.type,o=this[f][d].get(i),s=a(o);try{for(s.s();!(r=s.n()).done;){var l=u(r.value,2),c=l[0];if(l[1].once&&o.delete(c),n=c(t),t.cancelable&&(!1===n||t.cancelBubble))break}}catch(e){s.e(e)}finally{s.f()}return n}}}),o(r,h,function(){var e,t,n=arguments.length<=0?void 0:arguments[0];if(n.bubbles&&this[f]&&!n.cancelBubble){var r,i;if(!this[f][y].has(n.type))return(r=this[f])[h].apply(r,arguments);n.cvCurrentTarget=this[f];n.type;var o,s=this[f][y].get(n.type),l=a(s);try{for(l.s();!(o=l.n()).done;){var c=u(o.value,2),v=c[0];if(c[1].once&&s.delete(v),i=v(n),n.cancelable&&!1===i)return i}}catch(e){l.e(e)}finally{l.f()}return i=(e=this[f])[p].apply(e,arguments),n.cancelable&&(!1===i||n.cancelBubble)?i:(t=this[f])[h].apply(t,arguments)}}),o(r,p,function(){var e=arguments.length<=0?void 0:arguments[0];if(!e.defaultPrevented){var t="on".concat(e.type[0].toUpperCase()+e.type.slice(1));return"function"==typeof this[t]?this[t](e):void 0}}),r);t.EventTargetMixin=b,Object.defineProperty(b,"Parent",{value:f})}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Symbol("Promise"),u=Symbol("Accept"),s=Symbol("Reject"),l=(o(e={},r.Mixin.Constructor,function(){var e=this;this[a]=new Promise(function(t,n){e[u]=t,e[s]=n})}),o(e,"then",function(){var e;return(e=this[a]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[a]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[a]).finally.apply(e,arguments)}),e);t.PromiseMixin=l,Object.defineProperty(l,"Reject",{value:s}),Object.defineProperty(l,"Accept",{value:u})}()}),require.register("curvature/model/Database.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;var r=n("../base/Bindable"),i=n("../base/Mixin"),o=n("../mixin/EventTargetMixin");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=b(t);if(n){var o=b(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=Symbol("BeforeWrite"),g=Symbol("AfterWrite"),w=Symbol("BeforeDelete"),S=Symbol("AfterDelete"),j=Symbol("BeforeInsert"),O=Symbol("AfterInsert"),P=Symbol("BeforeUpdate"),k=Symbol("AfterUpdate"),E=Symbol("BeforeRead"),_=Symbol("AfterRead"),A=Symbol("PrimaryKey"),T=Symbol("Connection"),x=Symbol("Instances"),R=(Symbol("HighWater"),Symbol("Metadata")),C=Symbol("Timers"),B=Symbol("Target"),M=(Symbol("Store"),Symbol("Each")),D=Symbol("Name"),I=Symbol("Bank"),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(v,i.Mixin.with(o.EventTargetMixin));var t,n,c,f=y(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),t=f.call(this),Object.defineProperty(d(t),T,{value:e}),Object.defineProperty(d(t),D,{value:e.name}),Object.defineProperty(d(t),C,{value:{}}),Object.defineProperty(d(t),R,{value:{}}),Object.defineProperty(d(t),I,{value:{}}),t}return t=v,c=[{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[x][e]?this[x][e]:this[x][e]=new Promise(function(r,i){var o=indexedDB.open(e,n);o.onerror=function(e){v.dispatchEvent(new CustomEvent("error",{detail:{database:t[D],error:e,store:void 0,type:"read",subType:"select"}})),i(e)},o.onsuccess=function(e){var n=new t(e.target.result);r(n)},o.onupgradeneeded=function(e){var r=e.target.result;r.addEventListener("error",function(e){return console.error(e)});for(var i=new t(r),o=e.oldVersion+1;o<=n;o+=1)i["_version_"+o](r,i,e)}})}},{key:"getPrimaryKey",value:function(e){return e[A]?e[A]:null}},{key:"destroyDatabase",value:function(){var e=this;return new Promise(function(t,n){var r=indexedDB.delete(dbName);r.onerror=function(e){v.dispatchEvent(new CustomEvent("error",{detail:{database:dbName,error:e,type:"destroy"}})),n(e)},r.onsuccess=function(n){delete e[x][dbName],t(dbName)}})}}],(n=[{key:"select",value:function(e){var t=this,n=e.store,r=e.index,i=e.range,o=void 0===i?void 0:i,a=e.ranges,u=void 0===a?[]:a,s=e.direction,c=void 0===s?"next":s,f=e.limit,p=void 0===f?0:f,v=e.offset,h=void 0===v?0:v,y=e.type,d=void 0!==y&&y,b=e.origin,m=void 0===b?void 0:b,g=e.map,w=void 0===g?void 0:g,S=this[T].transaction(n,"readonly").objectStore(n),j=r?S.index(r):S;void 0===o||u&&u.length||(u=[o]);var O=[d,j,c,u,p,h,m,w],P=null;return{finally:function(e){return(P||(P=t[M].apply(t,O)(function(e){return e}))).finally(e)},catch:function(e){return(P||(P=t[M].apply(t,O)(function(e){return e}))).catch(e)},then:function(e){return(P||(P=t[M].apply(t,O)(function(e){return e}))).then(e)},each:function(e){return P||(P=t[M].apply(t,O)(e))},one:function(e){return P||(P=t[M].apply(t,l(Object.assign(O,[,,,,1])))(e))}}}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.inserts(s({},e,t),n)[0]}},{key:"inserts",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(e),o=this[T].transaction(i,"readwrite"),a=[],s=function(){var e=u(c[l],2),i=e[0],s=e[1],f=o.objectStore(i),p=t[I][i]=t[I][i]||{},h=!0;Array.isArray(s)||(s=[s],h=!1);var y,d=s.map(function(e){return new Promise(function(a,u){e=r.Bindable.make(e);var s={database:t,record:e,store:i,type:"write",subType:"insert",origin:n};s.key=v.getPrimaryKey(e);var l=new CustomEvent("write",{cancelable:!0,detail:s});if(t.dispatchEvent(l)){var c=e[v.BeforeWrite]?e[v.BeforeWrite](s):null,h=e[v.BeforeInsert]?e[v.BeforeInsert](s):null,y=f.add(Object.assign({},r.Bindable.shuck(e)));!1!==c&&!1!==h?(y.onerror=function(e){t.dispatchEvent(new CustomEvent("writeError",{detail:s})),o.abort&&o.abort(),u(e)},y.onsuccess=function(r){var u=r.target.result;o.addEventListener("complete",function(r){if(f.autoIncrement&&(e.id=u),e[v.AfterInsert]&&e[v.AfterInsert](s),e[v.AfterWrite]&&e[v.AfterWrite](s),p[u]=e,e[A]=Symbol.for(u),a(e),t[R][i]||(t[R][i]=t.getStoreMeta(i,"store",{})),t[R][i]){var o=t.checkHighWaterMark(i,e),l=t.checkLowWaterMark(i,e),c=t[R][i],h=e[c.highWater];n.setHighWater&&o<h&&t.setHighWaterMark(i,e,n,"insert"),n.setLowWater&&l>h&&t.setLowWaterMark(i,e,n,"insert")}})}):o.abort&&o.abort()}else o.abort&&o.abort()})});y=h?Promise.all(d):d[0],a.push(y)},l=0,c=Object.entries(e);l<c.length;l++)s();return a}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.updates(s({},e,[t]),n)[0]}},{key:"updates",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(e),o=this[T].transaction(i,"readwrite"),s=[],l=function(){var e,i=u(f[c],2),l=i[0],p=i[1],h=o.objectStore(l),y=a(p);try{var d=function(){var i=e.value;if(!i[A])throw Error("Value provided is not a DB record!");s.push(new Promise(function(e,a){var u={database:t,key:v.getPrimaryKey(i),record:i,store:l,type:"write",subType:"update",origin:n},s=new CustomEvent("write",{cancelable:!0,detail:u});if(t.dispatchEvent(s)){var c=i[v.BeforeWrite]?i[v.BeforeWrite](u):null,f=i[v.BeforeUpdate]?i[v.BeforeUpdate](u):null;if(!1!==c&&!1!==f){var p=h.delete(i.id);p.onerror=function(e){t.dispatchEvent(new CustomEvent("writeError",{detail:u})),a(e)},p.onsuccess=function(c){var f=h.put(Object.assign({},r.Bindable.shuck(i)));f.onerror=function(e){t.dispatchEvent(new CustomEvent("writeError",{detail:u})),a(e)},f.onsuccess=function(r){e(s),o.oncomplete=function(e){if(i[v.AfterInsert]&&i[v.AfterInsert](u),i[v.AfterWrite]&&i[v.AfterWrite](u),t[R][l]||(t[R][l]=t.getStoreMeta(l,"store",{})),t[R][l]){var r=t.checkHighWaterMark(l,i),o=t.checkLowWaterMark(l,i),a=t[R][l],s=i[a.highWater];n.setHighWater&&r<s&&t.setHighWaterMark(l,i,n,"insert"),n.setLowWater&&o>s&&t.setLowWaterMark(l,i,n,"insert")}}}}}else o.abort&&o.abort()}else o.abort&&o.abort()}))};for(y.s();!(e=y.n()).done;)d()}catch(e){y.e(e)}finally{y.f()}},c=0,f=Object.entries(e);c<f.length;c++)l();return Promise.all(s).then(function(){return o.commit&&o.commit()}),s}},{key:"delete",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.deletes(s({},e,[t]),n)[0]}},{key:"deletes",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(e),i=this[T].transaction(r,"readwrite"),o=[],s=function(){var e,r=u(c[l],2),s=r[0],f=r[1],p=i.objectStore(s),h=a(f);try{var y=function(){var r=e.value;if(!r[A])throw Error("Value provided is not a DB record!");o.push(new Promise(function(e,o){var a={database:t,record:r,key:v.getPrimaryKey(r),store:s,type:"write",subType:"delete",origin:n},u=new CustomEvent("write",{cancelable:!0,detail:a});if(t.dispatchEvent(u))if(!1!==(r[v.BeforeDelete]?r[v.BeforeDelete](a):null)){var l=p.delete(r.id);l.onerror=function(e){a.original=e;var n=new CustomEvent("writeError",{detail:a});t.dispatchEvent(n),o(e)},l.onsuccess=function(t){e(u),i.oncomplete=function(e){r[A]=void 0,r[v.AfterDelete]&&r[v.AfterDelete](a),a.original=e}}}else i.abort&&i.abort();else i.abort&&i.abort()}))};for(h.s();!(e=h.n()).done;)y()}catch(e){h.e(e)}finally{h.f()}},l=0,c=Object.entries(e);l<c.length;l++)s();return Promise.all(o).then(function(){return i.commit&&i.commit()}),o}},{key:"clear",value:function(e){var t=this;return new Promise(function(n,r){var i=t[T].transaction([e],"readwrite"),o=i.objectStore(e).clear(),a={database:t[D],store:e,type:"write",subType:"clear",origin:origin};o.onerror=function(e){a.original=e;var n=new CustomEvent("writeError",{detail:a});t.dispatchEvent(n),r(e)},o.onsuccess=function(e){a.original=e;var r=new CustomEvent("write",{detail:a});t.dispatchEvent(r),i.commit&&i.commit(),n(r)}})}},{key:"listStores",value:function(){return l(this[T].objectStoreNames)}},{key:"listIndexes",value:function(e){return l(this[T].transaction([e]).objectStore(e).indexNames)}},{key:M,value:function(e,t,n,i,o,a,u,s){var l=this,c=function(i,c){return new Promise(function(f,p){if(i instanceof IDBKeyRange);else if(Array.isArray(i))if(0===i.length)i=void 0;else if(1===i.length)i=IDBKeyRange.only(i[0]);else if(void 0===i[0]&&void 0===i[1])i=void 0;else if(void 0===i[0]){var h;i=IDBKeyRange.upperBound(i[1],null===(h=i[2])||void 0===h||h)}else if(void 0===i[1]){var y;i=IDBKeyRange.lowerBound(i[0],null!==(y=i[2])&&void 0!==y&&y)}else{var d,b;i=IDBKeyRange.bound(i[0],i[1],null!==(d=i[2])&&void 0!==d&&d,null===(b=i[3])||void 0===b||b)}else void 0!==i&&null!==i&&(i=IDBKeyRange.only(i));var m=0;t.openCursor(i,n).addEventListener("success",function(n){var i=n.target.result;if(!i)return f({record:null,result:null,index:m});var p=i.source,h=p.objectStore?p.objectStore.name:t.name;l[I][h]=l[I][h]||{};var y=l[I][h],d=i.primaryKey,b=e?e.from(i.value):i.value,g=r.Bindable.makeBindable(b),w={database:l[D],key:v.getPrimaryKey(g),record:b,store:t.name,type:"read",subType:"select",origin:u},S=b[v.BeforeRead]?b[v.BeforeRead](w):null;if(a>m++||!1===S)return i.continue();y[d]?Object.assign(y[d],b):(b[A]=Symbol.for(d),y[d]=b),w.record=b,y[d][v.AfterRead]&&y[d][v.AfterRead](w);if(l.dispatchEvent(new CustomEvent("read",{detail:w,cancelable:!0}))){var j=e?e.from(y[d]):y[d];j[A]=Symbol.for(d);var O=s?s(j):j,P=c?c(O,m):O;if(o&&m-a>=o)return a+=o,f({mapped:O,result:P,index:m})}i.continue()})})},f=[];i=i&&i.length?i.slice():[[]];return function(e){return c(i.shift(),e).then(function(t){return function e(t,n){return f.push(t),i.length?c(i.shift(),n).then(function(t){return e(t,n)}):1===f.length?f[0]:f}(t,e)})}}},{key:"getObjectStores",value:function(e){return l(this[T].objectStoreNames)}},{key:"getStoreIndexes",value:function(e){var t=this[T].transaction([e],"readonly"),n=l(t.objectStore(e).indexNames);return t.abort(),n}},{key:"setStoreMeta",value:function(e,t,n){localStorage.setItem("::::cvdb::".concat(e,"::").concat(t),JSON.stringify(n))}},{key:"getStoreMeta",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("::::cvdb::".concat(e,"::").concat(t)),i=null!==r?JSON.parse(r):n;return null===i?n:i}},{key:"createObjectStore",value:function(e,t){var n=this[T].createObjectStore(e,t);return this.setStoreMeta(e,"store",t),n}},{key:"deleteObjectStore",value:function(e){return this[T].deleteObjectStore(e)}},{key:"checkHighWaterMark",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(e,"highWater",0)}},{key:"setHighWaterMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=t[this[R][e].highWater],o=this.getStoreMeta(e,"highWater",0);this.setStoreMeta(e,"highWater",i),this.dispatchEvent(new CustomEvent("highWaterMoved",{detail:{database:this[D],record:t,store:e,type:"highWaterMoved",subType:r,origin:n,oldValue:o,value:i}}))}},{key:"checkLowWaterMark",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getStoreMeta(e,"lowWater",1/0)}},{key:"setLowWaterMark",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=t[this[R][e].highWater],o=this.getStoreMeta(e,"lowWater",null);this.setStoreMeta(e,"lowWater",i),this.dispatchEvent(new CustomEvent("lowWaterMoved",{detail:{database:this[D],record:t,store:e,type:"lowWaterMoved",subType:r,origin:n,oldValue:o,value:i}}))}}])&&p(t.prototype,n),c&&p(t,c),Object.defineProperty(t,"prototype",{writable:!1}),v}();t.Database=N,Object.defineProperty(N,x,{value:[]}),Object.defineProperty(N,"BeforeDelete",{value:w}),Object.defineProperty(N,"AfterDelete",{value:S}),Object.defineProperty(N,"BeforeWrite",{value:m}),Object.defineProperty(N,"AfterWrite",{value:g}),Object.defineProperty(N,"BeforeInsert",{value:j}),Object.defineProperty(N,"AfterInsert",{value:O}),Object.defineProperty(N,"BeforeUpdate",{value:P}),Object.defineProperty(N,"AfterUpdate",{value:k}),Object.defineProperty(N,"BeforeRead",{value:E}),Object.defineProperty(N,"AfterRead",{value:_}),Object.defineProperty(N,"PKSymbol",{value:A}),Object.defineProperty(N,"PrimaryKey",{value:A});try{Object.defineProperty(N,B,{value:new EventTarget})}catch(e){Object.defineProperty(N,B,{value:document.createDocumentFragment()})}for(var L=function(){var e=q[F];Object.defineProperty(N,e,{value:function(){var t;return(t=N[B])[e].apply(t,arguments)}})},F=0,q=["addEventListener","removeEventListener","dispatchEvent"];F<q.length;F++)L()}()}),require.register("curvature/model/Model.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var e=n("../base/Cache"),r=n("../base/Bindable"),i=n("./Database");function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}var v=Symbol("Changed"),h=Symbol("Deleted"),y=Symbol("Saved"),d=Symbol("Keys"),b=function(){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"id",void 0),f(this,"class",void 0),Object.defineProperty(this,v,{value:r.Bindable.make({})}),Object.defineProperty(this,h,{writable:!0,value:!1}),Object.defineProperty(this,y,{writable:!0,value:!1}),Object.defineProperty(this,d,{writable:!0,value:new Set}),r.Bindable.make(this)}var n,u,s;return n=t,s=[{key:"keyProps",get:function(){return["id","class"]}},{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.keyProps,i=r.map(function(e){return t[e]});i.unshift(this.name);var a,u=i.join("::"),s="models-by-type-and-publicId",c=e.Cache.load(u,!1,s),f=c||new this,p=o(r);try{for(p.s();!(a=p.n()).done;){var h,d,b=a.value;f[b]=null!==(h=null!==(d=f[b])&&void 0!==d?d:t[b])&&void 0!==h?h:null}}catch(e){p.e(e)}finally{p.f()}if(f.consume(t),!c){e.Cache.store(u,f,0,s);var m=!1;f.bindTo(function(e,t,n,r){"symbol"!==l(t)&&e!==n[t]&&(f[v][t]=m,f[y]=!(m||!f[y]))}),0===Object.keys(f[v]).length&&(f[y]=n),m=!0}return f}}],(u=[{key:"consume",value:function(n){var r=this,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=t.keyProps,c=function(t,n){if(n&&"object"===l(n)&&n.constructor.keyProps){var i=n.constructor.keyProps.map(function(e){return n[e]}).join("::"),o=e.Cache.load(i,!1,"models-by-type-and-publicId");o&&(o.consume(n),n=o)}!u&&r[v][t]||(r[t]=n)};i.Database.PKSymbol in n&&c(i.Database.PKSymbol,n[i.Database.PKSymbol]),this[d]=new Set([].concat(a(this[d]),a(Object.keys(this)),a(Object.keys(n))));var f,p=o(this[d]);try{for(p.s();!(f=p.n()).done;){var h=f.value;!u&&this[v][h]||(s.includes(h)||h in n&&c(h,n[h]))}}catch(e){p.e(e)}finally{p.f()}}},{key:"changed",value:function(){this[y]=!1}},{key:"markDeleted",value:function(){for(var e in this[v])this[v][e]=!1;this[h]=!0,this[y]=!1}},{key:"markStored",value:function(){for(var e in this)this[v][e]=!1;this[h]=!1,this[y]=!0}},{key:"isSaved",value:function(){return this[y]}}])&&c(n.prototype,u),s&&c(n,s),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Model=b,Object.defineProperty(b,"Changed",{value:v}),Object.defineProperty(b,"Deleted",{value:h}),Object.defineProperty(b,"Saved",{value:y})}()}),require.register("curvature/net/Elicit.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Elicit=void 0;var e=n("curvature/base/Mixin"),r=n("curvature/mixin/EventTargetMixin"),i=n("curvature/mixin/PromiseMixin");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}var p=Symbol("IterateDownload"),v=Symbol("Retry"),h=Symbol("HandleFirstByte"),y=Symbol("HandleProgress"),d=Symbol("HandleComplete"),b=Symbol("HandleHeaders"),m=Symbol("HandleClose"),g=Symbol("HandleError"),w=Symbol("HandleOpen"),S=Symbol("HandleFail"),j=Symbol("FetchDeferrer"),O=Symbol("LastChunkSize"),P=Symbol("LastChunkTime"),k=Symbol("Options"),E=Symbol("Fetch"),_=Symbol("Type"),A=Symbol("Url"),T=Symbol("RetriesLeft"),x=Symbol("TimeoutLeft"),R=Symbol("Timeout"),C=Symbol("Timer"),B=Symbol("Canecller"),M=Symbol("Caneclled"),D=Symbol("Paused"),I=Symbol("Received"),N=Symbol("Length"),L=Symbol("Opened"),F=Symbol("Closed"),q=Symbol("Start"),W=Symbol("First"),z=Symbol("End"),U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e.Mixin.with(r.EventTargetMixin,i.PromiseMixin));var n,o,l,c=s(f);function f(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=c.call(this))[T]=n.retries||5,t[R]=n.timeout||4500,t[x]=n.maxTimeout||t[R]*t[T],t[j]=null,t[P]=0,t[O]=0,t[M]=!1,t[I]=0,t[D]=!1,t[F]=0,t[k]=Object.assign({},n),t[A]=e,n.defer?t[E]=new Promise(function(e){return t[j]=e}):t.open(),t}return n=f,l=[{key:"pool",value:function(e){var t=this;e.finally(function(){if(t.running.delete(e),t.backlog.length){var n=t.backlog.shift();t.running.add(n),n.open()}}),this.running.size<5?(this.running.add(e),e.open()):this.backlog.push(e)}}],(o=[{key:"open",value:function(){var e=this;if(!this[L]||this[F]){this[q]||(this[q]=Date.now()),this[B]=new AbortController,this[k].signal=this[B].signal,this[L]=Date.now(),this[F]=0,this[W]=0,this[E]=fetch(this[A],this[k]).then(function(t){return e[w](t)}).catch(function(t){return e[g](t)});this[C]=setTimeout(function(){if(!e[W]){if(e[B].abort(),e[m](),e[x]=Math.max(0,e[x]-e[R]),e[x])return;e[S](new Error("Timed out."))}},this[R])}}},{key:"headers",value:function(){return this[E].then(function(e){var t=e.response;e.stream;return t.headers})}},{key:"json",value:function(){return this[E].then(function(e){e.response;var t=e.stream;return new Response(t,{headers:{"Content-Type":"application/json"}}).json()})}},{key:"text",value:function(){var e=this;return this[E].then(function(t){t.response;var n=t.stream;return new Response(n,{headers:{"Content-Type":e.type}}).text()})}},{key:"css",value:function(){return this.text().then(function(e){var t=new CSSStyleSheet;return t.replace(e),t})}},{key:"blob",value:function(){return this[E].then(function(e){var t=e.response,n=e.stream;return new Response(n,{headers:{"Content-Type":t.headers.get("Content-Type")}}).blob()})}},{key:"objectUrl",value:function(){return this.blob().then(function(e){return URL.createObjectURL(e)})}},{key:"dataUri",value:function(){return this.blob().then(function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.onabort=function(e){return n(new Error("Read aborted"))},r.readAsDataURL(e)})})}},{key:"buffer",value:function(){return this[E].then(function(e){var t=e.response,n=e.stream;return new Response(n,{headers:{"Content-Type":t.headers.get("Content-Type")}}).arrayBuffer()})}},{key:"bytes",value:function(){return this.buffer().then(function(e){return new Uint8Array(e)})}},{key:"cancel",value:function(){this.emitCancelEvent()&&(this[B].abort(),this[M]=!0,this.emitCancelledEvent())}},{key:"pause",value:function(){this[z]||this[D]||this[F]||this.emitPauseEvent()&&(this[D]=!0,this.emitPausedEvent())}},{key:"unpause",value:function(){!this[z]&&this[D]&&this.emitUnpauseEvent()&&(this[D]=!1,this.emitUnpausedEvent())}},{key:"done",get:function(){return!!this[z]}},{key:"type",get:function(){return this[_]}},{key:"totalTime",get:function(){return this[z]?this[z]-this[q]:Date.now()-this[q]}},{key:"waitTime",get:function(){return this[W]?this[W]-this[L]:Date.now()-this[L]}},{key:"loadTime",get:function(){return this[L]?this[F]?this[F]-this[W]:Date.now()-this[W]:0}},{key:"speed",get:function(){return this[L]?((e=this[z]?this[z]-this[P]:Date.now()-this[P])||(e=.01),this[O]/e):0;var e}},{key:"received",get:function(){return this[I]}},{key:"length",get:function(){return this[N]}},{key:"isPaused",get:function(){return this[D]}},{key:p,value:function(e,t,n){var r=this;this[y](n,0,null);var i=Date.now(),o=1,a=function(e){var a=e.done,s=e.value;return a?(t.close(),r[d]()):(t.enqueue(s),r[I]+=s.length,r[W]||r[h](s),r[y](n,r[I],s),r[P]=i,r[O]=o,i=Date.now(),o=s.length,u())},u=function t(){return r[M]?e.cancel():r[D]?new Promise(function(e){setTimeout(function(){return e(t())},100)}):e.read().then(function(e){return a(e)}).catch(function(e){return r[g](e)})};return u()}},{key:v,value:function(){if(this.emitRetryEvent()&&!(this[T]<=0))return this[B].abort(),this[m](),this[I]=0,this[T]--,this.open()}},{key:w,value:function(e){var t=e.body.getReader(),n=this[N]||Number(e.headers.get("Content-Length")),r=this[r]||e.headers.get("Content-Type");this[N]=n,this[_]=r,this[b](e.headers),this[j]&&this[j](this[E]);var i=this;return{response:e,stream:new ReadableStream({start:function(e){i[p](t,e,n)}})}}},{key:m,value:function(){this[F]=Date.now(),this.emitCloseEvent()}},{key:b,value:function(e){this.emitHeadersEvent(e)}},{key:y,value:function(e,t,n){this.emitProgressEvent(e,t,n)}},{key:d,value:function(){this[z]=Date.now(),this[m](),this.emitCompleteEvent(),this[i.PromiseMixin.Accept]()}},{key:g,value:function(e){return console.warn("[".concat(e.constructor.name,"] ").concat(e.code,": ").concat(e.message),e),this.emitErrorEvent(e)?this[S](e):this[v]()}},{key:S,value:function(e){return this[z]=Date.now(),this[m](),this.emitFailEvent(e),this[i.PromiseMixin.Reject](e)}},{key:h,value:function(e){clearInterval(this[C]),this[W]=Date.now(),this.emitFirstByteEvent(e)}},{key:"emitProgressEvent",value:function(e,t,n){var r=e?t/e:0,i=this.totalTime,o=this.loadTime,a=this.waitTime,u=this.speed;return this.dispatchEvent(new CustomEvent("progress",{detail:{length:e,received:t,done:r,speed:u,loadTime:o,waitTime:a,totalTime:i,value:n}}))}},{key:"emitOpenEvent",value:function(){return this.dispatchEvent(new CustomEvent("open"))}},{key:"emitCloseEvent",value:function(){return this.dispatchEvent(new CustomEvent("close"))}},{key:"emitFirstByteEvent",value:function(e){return this.dispatchEvent(new CustomEvent("firstByte",{detail:{received:e}}))}},{key:"emitHeadersEvent",value:function(e){return this.dispatchEvent(new CustomEvent("headers",{detail:{headers:e}}))}},{key:"emitCompleteEvent",value:function(){return this.dispatchEvent(new CustomEvent("complete"))}},{key:"emitErrorEvent",value:function(){return this.dispatchEvent(new CustomEvent("error",{cancelable:this[T]>0}))}},{key:"emitRetryEvent",value:function(){return this.dispatchEvent(new CustomEvent("retry",{cancelable:!0}))}},{key:"emitFailEvent",value:function(){return this.dispatchEvent(new CustomEvent("fail"))}},{key:"emitPauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("pause",{cancelable:!0}))}},{key:"emitPausedEvent",value:function(){this.dispatchEvent(new CustomEvent("paused"))}},{key:"emitUnpauseEvent",value:function(){return this.dispatchEvent(new CustomEvent("unpause",{cancelable:!0}))}},{key:"emitUnpausedEvent",value:function(){this.dispatchEvent(new CustomEvent("unpaused"))}},{key:"emitCancelEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancel",{cancelable:!0}))}},{key:"emitCancelledEvent",value:function(){return this.dispatchEvent(new CustomEvent("cancelled"))}}])&&a(n.prototype,o),l&&a(n,l),Object.defineProperty(n,"prototype",{writable:!1}),f}();t.Elicit=U,c(U,"backlog",[]),c(U,"running",new Set)}()}),require.register("pokemon-parser/BitArray.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.BitArray=void 0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e&&(e=[]),"number"==typeof e&&(e=Array.from(Array(e))),Array.isArray(e)&&(e=new Uint8Array(e)),e instanceof t&&(e=e.buffer),this.buffer=e,this.done=!1,this.i=this.j=0}var n,r,i;return n=t,(r=[{key:"clone",value:function(){return new this.constructor(this)}},{key:"get",value:function(e){var t=Math.floor(e/8),n=e%8;return(1<<n&this.buffer[t])>>n}},{key:"set",value:function(e,t){var n=Math.floor(e/8),r=e%8,i=t?1<<r:~(1<<r);t?this.buffer[n]|=i:this.buffer[n]&=i}},{key:"next",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,n=this.buffer[this.i];e-- >0;){var r=n>>7-this.j&1;this.j++,this.j>7&&(this.j=0,n=this.buffer[++this.i]),this.i>=this.buffer.length&&(this.done=!0),t<<=1,t|=r}return t}},{key:"length",get:function(){return 8*this.buffer.length}}])&&e(n.prototype,r),i&&e(n,i),t}();t.BitArray=n}()}),require.register("pokemon-parser/PokemonRom.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PokemonRom=void 0;n("./BitArray");var e=n("./gameboy/Rom"),r=n("./decompress/Gameboy2bpp"),i=n("./decompress/RleDelta"),o=n("./decompress/Merge");function a(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(d,e.Rom);var n,c,f,y=h(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=y.call(this,e)).textCodes={79:"  ",87:"#",81:"*",82:"A1",83:"A2",84:"POKé",85:"+",88:"$",117:"…",127:" ",128:"A",129:"B",130:"C",131:"D",132:"E",133:"F",134:"G",135:"H",136:"I",137:"J",138:"K",139:"L",140:"M",141:"N",142:"O",143:"P",144:"Q",145:"R",146:"S",147:"T",148:"U",149:"V",150:"W",151:"X",152:"Y",153:"Z",154:"(",155:")",156:":",157:";",158:"[",159:"]",160:"a",161:"b",162:"c",163:"d",164:"e",165:"f",166:"g",167:"h",168:"i",169:"j",170:"k",171:"l",172:"m",173:"n",174:"o",175:"p",176:"q",177:"r",178:"s",179:"t",180:"u",181:"v",182:"w",183:"x",184:"y",185:"z",186:"é",187:"'d",188:"'l",189:"'s",190:"'t",191:"'v",224:"'",225:"PK",226:"MN",227:"-",228:"'r",229:"'m",230:"?",231:"!",232:".",237:"→",238:"↓",239:"♂",240:"¥",241:"×",243:"/",244:",",245:"♀",246:"0",247:"1",248:"2",249:"3",250:"4",251:"5",252:"6",253:"7",254:"8",255:"9"},t}return n=d,(c=[{key:"decodeText",value:function(e){for(var t="",n=0;n<e.length;n++)e[n]in this.textCodes?t+=this.textCodes[e[n]]:t+=" ";return t.trim()}},{key:"getAllTypes",value:function(){var e=this;return this.types=this.types||this.piece(163300,163401).then(function(t){return e.decodeText(t).split(" ")})}},{key:"getAllMoves",value:function(){var e=this;return this.moves=this.moves||this.piece(720896,722446).then(function(t){var n=[],r=[];for(var i in t){if(80!==t[i])n.push(t[i]);else{var o=e.decodeText(n.splice(0));r.push(o)}}var a=e.decodeText(n.splice(0));return r.push(a),r})}},{key:"getAllNumbers",value:function(){return this.numbers=this.numbers=this.slice(266276,190)}},{key:"getAllIndexNumbers",value:function(){var e=this;return this.indexNumbers?this.indexNumbers:(this.indexNumbers=[],this.getAllNumbers().then(function(t){for(var n in t)e.indexNumbers[t[n]]=n;return e.indexNumbers}))}},{key:"getSprites",value:function(){var e=[this.piece(65536,70528),this.piece(81920,96320),this.piece(97469,97661),this.piece(60062,61086),this.piece(492030,494910)];return Promise.all(e).then(function(e){return e.map(function(e){for(var t=new Uint8Array(32*e.length),n=new r.Gameboy2bpp(e,t,16);n.next(););return t})})}},{key:"getBlockFromSet",value:function(e,t){return this.buffer.slice(e+16*(0+t),e+16*(1+t))}},{key:"getAllTilesets",value:function(){var e=this;return this.piece(51134,51422).then(function(t){for(var n=[],r=0;r<24;r++){var i=t.slice(12*(0+r),12*(1+r)),o=i[0],a=e.makeRef(o,i.slice(1,3)),u=e.makeRef(o,i.slice(3,5)),s=e.makeRef(0,i.slice(5,7)),l=(i.slice(7,10),i[10]),c=i[11];n.push({tilePointer:u,blockPointer:a,collisionPointer:s,grass:l,animation:c})}return n})}},{key:"getAllMaps",value:function(){var e=this,t=[this.piece(430,926),this.piece(49725,49973)];return Promise.all(t).then(function(t){var n=l(t,2),r=n[0],i=n[1],o=[];for(var a in i){var u=i[a],s=r.slice(2*a,2*a+2),c=e.makeRef(u,s);o.push([u,c,a])}for(var f=[],p=0,v=o;p<v.length;p++){for(var h=l(v[p],3),y=h[0],d=h[1],b=h[2],m=e.buffer[0+d],g=e.buffer[1+d],w=e.buffer[2+d],S=e.makeRef(y,e.buffer.slice(3+d,5+d)),j=e.buffer.slice(5+d,7+d),O=e.buffer.slice(7+d,9+d),P=e.buffer[9+d],k=1&P,E=2&P,_=4&P,A=8&P,T=[A,_,E,k].filter(function(e){return e}).length,x=e.buffer[10+11*T+d],R=[],C=0;C<T;C++){var B=e.buffer.slice(11*(0+C)+d,11*(1+C)+d);R.push(B)}var M=e.deref(S,null,w*g);f.push({id:Number(b),tilesetId:m,tileset:null,height:g,width:w,bank:y,tilePointer:S,textPointers:j,scriptPointer:O,connectionByte:P,north:A,south:_,west:E,east:k,objectPointer:x,blockIds:M})}return Promise.all([f,e.getAllTilesets()])}).then(function(t){var n,r=l(t,2),i=r[0],o=r[1],c=s(i);try{var f=function(){var t=n.value,r=t.tileset=o[t.tilesetId];if(!r)return"continue";console.log(r.collisionPointer);var i=e.deref(r.collisionPointer,255);t.collision=Object.values(i);var u={},s={};if(!t.tileset)return"continue";var l=new Uint8Array(t.width*t.height*4*4),c=new Uint8Array(t.width*t.height*4*4);for(var f in t.blockIds){var p=t.blockIds[f],v=t.tileset.blockPointer+16*p,h=e.buffer.slice(0+v,16+v);for(var y in u[p]=h,h){var d=h[y],b=t.tileset.tilePointer+16*d,m=e.buffer.slice(0+b,16+b);s[d]=m;var g=f%t.width,w=Math.floor(f/t.width),S=y%4+4*g+(Math.floor(y/4)+4*w)*t.width*4;l[S]=1+d,c[S]=!t.collision.includes(d)}}if(t.tilePlane=l,t.solidPlane=c,console.log(t),!s)return{v:void 0};var j={};Object.keys(s).forEach(function(e){for(var t=s[e],n=[],r=0;r<16;){var i=t[r++],o=t[r++],a=[((128&i)<<1|128&o)>>7,((64&i)<<1|64&o)>>6,((32&i)<<1|32&o)>>5,((16&i)<<1|16&o)>>4,((8&i)<<1|8&o)>>3,((4&i)<<1|4&o)>>2,((2&i)<<1|2&o)>>1,((1&i)<<1|1&o)>>0];n.push.apply(n,a)}j[e]=n}),t.renderedTiles=j;var O={};for(var P in u){var k;if(!O[P]){var E=u[P],_=Array(32).fill().map(function(e){return Array(32).fill(0)});for(var A in E){var T=E[A],x=j[T];if(x)for(var R=A%4*8,C=8*Math.floor(A/4),B=0;B<8;B++)for(var M=B+R,D=0;D<8;D++){_[D+C][M]=x[B+8*D]}}O[P]=(k=[]).concat.apply(k,a(_))}}t.renderedBlocks=O,t.blocks=u};for(c.s();!(n=c.n()).done;){var p=f();if("continue"!==p&&"object"===u(p))return p.v}}catch(e){c.e(e)}finally{c.f()}return[i,o]})}},{key:"getPokemonName",value:function(e){var t=this;return this.slice(12195,1).then(function(n){var r=n[0];return t.slice(12206,2).then(function(n){var i=t.makeRef(r,n),o=t.deref(i+10*e,80,10);return t.decodeText(o)})})}},{key:"getPokemonNumber",value:function(e){return this.slice(266276,190).then(function(t){return t[e]})}},{key:"getPokemonStats",value:function(e){var t,n=this;return t=20===e?1:181===e?11:e<31?9:e<73?10:e<115?11:e<152?12:13,this.getPokemonNumber(e).then(function(r){var i=230366+28*(r-1);return 20===e&&(i=16987),n.slice(i,28).then(function(r){return{index:Number(e)||e,number:r[0],hp:r[1],attack:r[2],defense:r[3],speed:r[4],special:r[5],type1:r[6],type2:r[7],catchRate:r[8],expYield:r[9],frontSpriteSize:r[10],frontSprite:n.formatRef(t,r.slice(11,13)),backSprite:n.formatRef(t,r.slice(13,15)),basicMoves:[r[15],r[16],r[17],r[18]]}})})}},{key:"getAllPokemon",value:function(){var e=this;return this.slice(266276,190).then(function(t){for(var n=[],r=0;r<t.length;r++)n.push(e.getPokemon(r));return Promise.all(n)})}},{key:"getAllPokemonPalettes",value:function(){return this.slice(468425,150).then(function(e){var t,n=[],r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n})}},{key:"getAllPalettes",value:function(){var e=this;return this.piece(468576,468879).then(function(t){var n=0,r=[];e.palettes=[];var i,o=s(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(e.palettes[n]||(e.palettes[n]=[]),r.push(a),r.length>=8){for(var u=e.palettes[n],l=0;l<r.length;l+=2){var c=r[l]+(r[l+1]<<8);u.push({r:(31&c)>>0,g:(992&c)>>5,b:(31744&c)>>10})}r.splice(0),n++}}}catch(e){o.e(e)}finally{o.f()}return e.palettes})}},{key:"getPokemon",value:function(e){var t=this,n=this.getAllTypes(),r=this.getAllMoves(),i=this.getPokedexEntry(e),o=this.getPokemonNumber(e),a=this.getPokemonName(e),u=this.getPokemonStats(e),s=this.getLevelUpActions(e),c=this.getBackSpriteLength(e),f=Promise.all([n,r,o,i,a,u,s,c]);return f.then(function(n){var r=l(n,8),i=r[0],o=r[1],a=r[2],u=r[3],s=r[4],c=r[5],f=r[6],p=r[7],v=[0,1,2,3,10,11,12,13,null,null,null,null,null,null,null,null,null,null,null,14,4,5,6,7,8,9,15],h=function(e){return i[v[e]]},y=[h(c.type1)];for(var d in c.type1!==c.type2&&(y[1]=h(c.type2)),c.basicMoves){var b=-1+c.basicMoves[d];if(-1!==b&&o[b]){var m=o[b];c.basicMoves[d]={moveId:b,move:m}}}c.basicMoves=c.basicMoves.filter(function(e){return e});var g=c.basicMoves,w={front:c.frontSprite,back:c.backSprite};w.front.length=8*c.frontSpriteSize,w.back.length=p,delete c.type1,delete c.type2,delete c.basicMoves,delete c.frontSprite,delete c.frontSpriteSize,delete c.backSprite;var S=[];for(var j in f.learnset){var O=f.learnset[j].move-1,P=f.learnset[j].level;if(-1!==o[O]){var k=o[O];S[j]={moveId:O,move:k,level:P}}}var E=[],_=function(e){var n=f.evolutions[e].index,r=f.evolutions[e].type,i=f.evolutions[e].level,o=t.getPokemonNumber(n-1).then(function(o){return t.getPokemonName(n-1).then(function(t){var a;switch(r){case 1:a="Level";break;case 2:a="Stone";break;case 3:a="Trade"}return{name:t,type:a,level:i,index:n,number:o,item:f.evolutions[e].item||void 0}})});E.push(o)};for(var A in f.evolutions)_(A);return Promise.all(E).then(function(t){return{name:s,number:a,index:e,types:y,dex:u,evolutions:t,stats:c,sprites:w,basicMoves:g,levelUpMoves:S}})})}},{key:"getPokedexEntry",value:function(e){var t=this;return this.piece(263294,263674).then(function(n){var r=0+(n[2*e+1]<<8)+(n[2*e+0]<<0);r-=16384,r+=262144;var i=t.deref(r,80),o=t.decodeText(i),a=r+i.length+1;if(266217!=a)return t.slice(a,9).then(function(e){var n=e[0],r=e[1],i=t.byteVal(e.slice(2,4))/10,a=16384*e[7]+t.byteVal(e.slice(5,7));a-=16384;var u=t.deref(a,80,512),s=t.decodeText(u);return{type:o,feet:n,inches:r,pounds:i,entry:s}})})}},{key:"getLevelUpActions",value:function(e){var t=this;return this.slice(2*e+241756,2).then(function(e){var n=t.makeRef(14,e),r=t.deref(n,0),i=n+r.length+1,o=t.deref(i,0);return{evolutions:t.parseEvolutions(r),learnset:t.parseLearnset(o)}})}},{key:"parseEvolutions",value:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=void 0,o=void 0,a=void 0;switch(r){case 1:i=e[n++],o=e[n++],t.push({type:r,level:i,index:o});break;case 2:a=e[n++],i=e[n++],o=e[n++],t.push({type:r,item:a,level:i,index:o});break;case 3:i=e[n++],o=e[n++],t.push({type:r,level:i,index:o})}}return t}},{key:"parseLearnset",value:function(e){for(var t=[],n=0;n<e.length;n+=2){var r=e[n+0],i=e[n+1];t.push({level:r,move:i})}return t}},{key:"getFrontSprite",value:function(e){var t=this;return this.getPokemonStats(e).then(function(e){return t.slice(e.frontSprite.offset)}).then(function(e){var t=new i.RleDelta(e);t.decompress();var n=new o.Merge(t.buffer,t.xSize);return n.decompress(),n.buffer})}},{key:"getBackSpriteLength",value:function(e){return this.getBackSpriteMeta(e).then(function(e){return e[0]})}},{key:"getBackSprite",value:function(e){return this.getBackSpriteMeta(e).then(function(e){return e[1]})}},{key:"getBackSpriteMeta",value:function(e){var t=this;return this.getPokemonStats(e).then(function(e){return t.slice(e.backSprite.offset)}).then(function(e){var t=new i.RleDelta(e);t.decompress();var n=new o.Merge(t.buffer,t.xSize);return n.decompress(),[t.bits.i,n.buffer]})}}])&&p(n.prototype,c),f&&p(n,f),d}();t.PokemonRom=d}()}),require.register("pokemon-parser/base/Rom.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rom=void 0;var e,r=(e=n("../factory/fsRom"))&&e.__esModule?e:{default:e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.filename=t,this.buffer=null,this.index={},this.segments={},this.ordered=!1}var t,n,o;return t=e,(n=[{key:"preload",value:function(e){var t=this;return e?(this.buffer=e,Promise.resolve(e)):this.buffer?Promise.resolve(this.buffer):(0,r.default)(this.filename).then(function(e){return t.buffer=e,e})}},{key:"slice",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new Promise(function(r,i){t.buffer||t.preload(),r(n?t.buffer.slice(e,e+n):t.buffer.slice(e))})}},{key:"piece",value:function(e,t){return this.slice(e,t-e)}},{key:"byteVal",value:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n]<<8*n;return t}},{key:"indexSegments",value:function(){var e=[];for(var t in this.index)e.push({position:this.index[t],title:t});e.sort(function(e,t){return t.position-e.position});var n=null;for(var r in e)e[r].length=n?n.position-e[r].position:0,n=e[r];for(var i in e)this.segments[e[i].title]=e[i]}},{key:"segment",value:function(e){var t=this;if(this.indexSegments(),e in this.segments)return this.segments[e].length?this.slice(this.segments[e].position,this.segments[e].length):new Promise(function(n,r){t.preload().then(function(r){t.segments[e].length=r.length-t.segments[e].position,n(t.slice(t.segments[e].position,t.segments[e].length))})})}}])&&i(t.prototype,n),o&&i(t,o),e}();t.Rom=o}()}),require.register("pokemon-parser/decompress/Gameboy2bpp.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.Gameboy2bpp=void 0;var r=function(){function t(e,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"outputPos",0),n(this,"inputPos",0),n(this,"tileWidth",8),n(this,"tileHeight",8),n(this,"depth",2),this.inputBuffer=e,this.outputBuffer=r,this.width=i}var r,i,o;return r=t,(i=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){var e=[[255,255,255],[51,51,51],[102,102,102],[0,0,0]],t=this.inputBuffer[this.inputPos++],n=this.inputBuffer[this.inputPos++],r=Math.floor(this.width/this.tileWidth),i=[((128&t)<<1|128&n)>>7,((64&t)<<1|64&n)>>6,((32&t)<<1|32&n)>>5,((16&t)<<1|16&n)>>4,((8&t)<<1|8&n)>>3,((4&t)<<1|4&n)>>2,((2&t)<<1|2&n)>>1,((1&t)<<1|1&n)>>0],o=this.tileWidth*this.tileHeight;for(var a in i){var u=Math.floor(this.outputPos/o),s=u%r,l=Math.floor(u/r),c=this.outputPos%o,f=Math.floor(c/this.tileWidth),p=c%this.tileWidth,v=s*this.tileWidth+p,h=l*this.tileHeight+f,y=r*this.tileWidth*h+v;this.outputBuffer[4*y+0]=e[i[a]][0],this.outputBuffer[4*y+1]=e[i[a]][1],this.outputBuffer[4*y+2]=e[i[a]][2],this.outputBuffer[4*y+3]=255,this.outputPos++}return 4*this.outputPos<this.outputBuffer.length}}}])&&e(r.prototype,i),o&&e(r,o),t}();t.Gameboy2bpp=r}()}),require.register("pokemon-parser/decompress/Merge.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;var e=n("../BitArray");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=r,this.size=n.length,this.input=new e.BitArray(n),this.buffer=new Uint8Array(Math.pow(r,2)),this.i=0}var n,i,o;return n=t,(i=[{key:"decompress",value:function(){for(;this.iterate(););}},{key:"iterate",value:function(){var e=this.input.length/2;if(this.i<e){var t=this.input.get(this.pixelToRowPixel(this.i))<<1|this.input.get(this.pixelToRowPixel(this.i)+Math.pow(this.width,2));return this.buffer[this.i]=[255,128,196,64][t],this.i++,!0}return!1}},{key:"pixelToRowPixel",value:function(e){var t=this.width,n=e%2==0,r=Math.floor(e/t);return 2*r+e%t*t+(n?0:-(t-1))}}])&&r(n.prototype,i),o&&r(n,o),t}();t.Merge=i}()}),require.register("pokemon-parser/decompress/RleDelta.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RleDelta=void 0;var e=n("../BitArray");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"tileSize",8),i(this,"lastBit",0),i(this,"fillMode",null),i(this,"fillCount",0),i(this,"deltaCount",0),i(this,"xorCount",0),this.mode=null,this.bits=new e.BitArray(n),this.input=n,this.xSize=this.bits.next(4)||7,this.ySize=this.bits.next(4)||7,this.sideSize=this.xSize,this.xSize*=this.tileSize,this.size=this.xSize*this.ySize,this.xSize=this.xSize<=56?this.xSize:56,this.ySize=this.ySize<=7?this.ySize:7,this.buffSize=Math.pow(this.sideSize,2)*this.tileSize,this.buffer=new Uint8Array(2*this.buffSize),this.bufferA=new Uint8Array(this.buffer.buffer,0*this.buffSize,1*this.buffSize),this.bufferB=new Uint8Array(this.buffer.buffer,1*this.buffSize,1*this.buffSize),this.step1=-1,this.step2=-1,this.step3=-1,this.step3b=-1}var n,o,a;return n=t,(o=[{key:"decompress",value:function(){for(;this.decompressBufferFirst(););for(;this.decompressBufferSecond(););for(;this.decompressDelta(););}},{key:"iterate",value:function(){if(this.step1<=0)this.decompressBufferFirst();else if(this.step2<=0)this.decompressBufferSecond();else if(this.step3<=0)this.decompressDelta();else if(1===this.step3)return!1;return!0}},{key:"decompressBufferFirst",value:function(){if(this.step1>=1)return!1;var t=[new e.BitArray(this.bufferA),new e.BitArray(this.bufferB)];if(-1===this.step1){var n=this.bits.next();this.bufA=t[n],this.bufB=t[1^n],this.fillMode=this.bits.next(),this.fillCount=0,this.step1=0}return!!this.fillBuffer(this.bufA,this.bits,this.xSize,this.size)||(this.step1=1,!1)}},{key:"decompressBufferSecond",value:function(){return!(this.step2>=1)&&(-1===this.step2&&(this.mode=this.bits.next(),1===this.mode&&(this.mode=1+this.bits.next()),this.fillMode=this.bits.next(),this.fillCount=0,this.step2=0),!!this.fillBuffer(this.bufB,this.bits,this.xSize,this.size)||(this.step2=1,!1))}},{key:"decompressDelta",value:function(){switch(this.mode){case 0:if(-1===this.step3b)this.deltaCount=0,this.step3b=0;else if(0===this.step3b)this.deltaFill(this.bufA,this.xSize)||(this.step3b=1);else if(1===this.step3b)this.deltaCount=0,this.step3b=2;else{if(2!==this.step3b)return this.step3=1,!1;this.deltaFill(this.bufB,this.xSize)||(this.step3b=3)}return!0;case 1:if(-1===this.step3b)this.deltaCount=0,this.step3b=0;else if(0===this.step3b)this.deltaFill(this.bufA,this.xSize)||(this.step3b=1);else if(1===this.step3b)this.xorCount=0,this.step3b=2;else{if(2!==this.step3b)return this.step3=1,!1;this.xorFill(this.bufA,this.bufB)||(this.step3b=3)}return!0;case 2:if(-1===this.step3b)this.deltaCount=0,this.step3b=0;else if(0===this.step3b)this.deltaFill(this.bufA,this.xSize)||(this.step3b=1);else if(1===this.step3b)this.deltaCount=0,this.step3b=2;else if(2===this.step3b)this.deltaFill(this.bufB,this.xSize)||(this.step3b=3);else if(3===this.step3b)this.xorCount=0,this.step3b=4;else{if(4!==this.step3b)return this.step3=1,!1;this.xorFill(this.bufA,this.bufB)||(this.step3b=5)}return!0}}},{key:"pixelToRowPixel",value:function(e){var t=this.sideSize*this.tileSize,n=e%2==0,r=Math.floor(e/t);return 2*r+e%t*t+(n?0:-(t-1))}},{key:"xorFill",value:function(e,t){if(this.xorCount>=8*this.buffSize)return!1;var n=e.get(this.xorCount),r=t.get(this.xorCount);return t.set(this.xorCount,n^r),this.xorCount++,!0}},{key:"deltaFill",value:function(e,t){this.deltaCount%(this.sideSize*this.tileSize)==0&&(this.lastBit=0);var n=this.pixelToRowPixel(this.deltaCount);return e.get(n)&&(this.lastBit=1^this.lastBit),e.set(n,this.lastBit),this.deltaCount++,this.deltaCount<8*this.buffSize}},{key:"fillBuffer",value:function(e,t,n,r){var i=8*r;return 0===this.fillMode?(this.rleFill(e,t),this.fillMode=1):1===this.fillMode&&(this.dataFill(e,t,i),this.fillMode=0),this.fillCount<i}},{key:"rleFill",value:function(e,t){for(var n=0,r="";r=t.next();)r,n++;for(var i=(2<<n)-1+t.next(n+1),o=0;o<i;o++)this.fillCount++,this.fillCount++}},{key:"dataFill",value:function(e,t,n){for(var r=[];this.fillCount<n;){var i=t.next(),o=t.next();if(0===i&&0===o)break;r.push(i,o),i&&e.set(this.fillCount,i),this.fillCount++,o&&e.set(this.fillCount,o),this.fillCount++}}}])&&r(n.prototype,o),a&&r(n,a),t}();t.RleDelta=o}()}),require.register("pokemon-parser/factory/fsRom.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){r.default.exists(e,function(i){if(!i)return n("Rom file does not exist.");r.default.stat(e,function(i,o){if(i)return n(i);r.default.open(e,"r",function(e,i){if(e)return n(e);r.default.read(i,new Uint8Array(o.size),null,o.size,0,function(e,r,i){if(e)return n(e);t(i)})})})})})};var e,r=(e=n("fs"))&&e.__esModule?e:{default:e};n("../base/Rom")}()}),require.register("pokemon-parser/gameboy/GbcLicensees.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GbcLicensees=void 0;t.GbcLicensees={"00":"none","01":"nintendo","08":"capcom",13:"electronic arts",18:"hudsonsoft",19:"b-ai",20:"kss",22:"pow",24:"pcm complete",25:"san-x",28:"kemco japan",29:"seta",30:"viacom",31:"nintendo",32:"bandia",33:"ocean/acclaim",34:"konami",35:"hector",37:"taito",38:"hudson",39:"banpresto",41:"ubi soft",42:"atlus",44:"malibu",46:"angel",47:"pullet-proof",49:"irem",50:"absolute",51:"acclaim",52:"activision",53:"american sammy",54:"konami",55:"hi tech entertainment",56:"ljn",57:"matchbox",58:"mattel",59:"milton bradley",60:"titus",61:"virgin",64:"lucasarts",67:"ocean",69:"electronic arts",70:"infogrames",71:"interplay",72:"broderbund",73:"sculptured",75:"sci",78:"t*hq",79:"accolade",80:"misawa",83:"lozc",86:"tokuma shoten i*",87:"tsukuda ori*",91:"chun soft",92:"video system",93:"ocean/acclaim",95:"varie",96:"yonezawa/s'pal",97:"kaneko",99:"pack in soft"}}()}),require.register("pokemon-parser/gameboy/Licensees.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Licensees=void 0;t.Licensees={"00":"none","01":"nintendo","08":"capcom","09":"hot-b","0A":"jaleco","0B":"coconuts","0C":"elite systems",13:"electronic arts",18:"hudsonsoft",19:"itc entertainment","1A":"yanoman","1D":"clary","1F":"virgin",20:"KSS",24:"pcm complete",25:"san-x",28:"kotobuki systems",29:"seta",30:"infogrames",31:"nintendo",32:"bandai",33:"GBC - see above",34:"konami",35:"hector",38:"Capcom",39:"Banpresto","3C":"*entertainment i","3E":"gremlin",41:"Ubisoft",42:"Atlus",44:"Malibu",46:"angel",47:"spectrum holoby",49:"irem","4A":"virgin","4D":"malibu","4F":"u.s. gold",50:"absolute",51:"acclaim",52:"activision",53:"american sammy",54:"gametek",55:"park place",56:"ljn",57:"matchbox",59:"milton bradley","5A":"mindscape","5B":"romstar","5C":"naxat soft","5D":"tradewest",60:"titus",61:"virgin",67:"ocean",69:"electronic arts","6E":"elite systems","6F":"electro brain",70:"Infogrammes",71:"Interplay",72:"broderbund",73:"sculptered soft",75:"the sales curve",78:"t*hq",79:"accolade","7A":"triffix entertainment","7C":"microprose","7F":"kemco",80:"misawa entertainment",83:"lozc",86:"tokuma shoten intermedia","8B":"bullet-proof software","8C":"vic tokai","8E":"ape","8F":"i'max",91:"chun soft",92:"video system",93:"tsuburava",95:"varie",96:"yonezawa/s'pal",97:"kaneko",99:"arc","9A":"nihon bussan","9B":"Tecmo","9C":"imagineer","9D":"Banpresto","9F":"nova",A1:"Hori electric",A2:"Bandai",A4:"Konami",A6:"kawada",A7:"takara",A9:"technos japan",AA:"broderbund",AC:"Toei animation",AD:"toho",AF:"Namco",B0:"Acclaim",B1:"ascii or nexoft",B2:"Bandai",B4:"Enix",B6:"HAL",B7:"SNK",B9:"pony canyon",BA:"*culture brain o",BB:"Sunsoft",BD:"Sony imagesoft",BF:"sammy",C0:"Taito",C2:"Kemco",C3:"Squaresoft",C4:"tokuma shoten intermedia",C5:"data east",C6:"tonkin house",C8:"koei",C9:"ufl",CA:"ultra",CB:"vap",CC:"use",CD:"meldac",CE:"*pony canyon or",CF:"angel",D0:"Taito",D1:"sofel",D2:"quest",D3:"sigma enterprises",D4:"ask kodansha",D6:"naxat soft",D7:"copya systems",D9:"Banpresto",DA:"tomy",DB:"ljn",DD:"ncs",DE:"human",DF:"altron",E0:"jaleco",E1:"towachiki",E2:"uutaka",E3:"varie",E5:"epoch",E7:"athena",E8:"asmik",E9:"natsume",EA:"king records",EB:"atlus",EC:"Epic/Sony records",EE:"igs",F0:"a wave",F3:"extreme entertainment",FF:"ljn"}}()}),require.register("pokemon-parser/gameboy/Rom.js",function(t,n,r){n=e(n,{},"pokemon-parser"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Rom=void 0;var r=n("../base/Rom"),i=n("./Licensees");n("./GbcLicensees");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=c(t);if(n){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,r.Rom);var t,n,a,c=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=c.call(this,e)).index={blank:0,entryPoint:256,nintendoLogo:260,title:308,manufacturer:319,colorGameboy:323,licensee:324,superGameboy:326,cartrigeType:327,romSize:328,ramSize:329,destination:330,gbcLicensee:331,romVersion:332,headerCheck:333,globalCheck:334,_:336},t}return t=f,(n=[{key:"title",get:function(){return o(this.buffer.slice(this.index.title,this.index.title+15)).map(function(e){return e>0?String.fromCharCode(e):""}).join("")}},{key:"manufacturer",get:function(){return o(this.buffer.slice(this.index.manufacturer,this.index.manufacturer+4)).map(function(e){return e>0?String.fromCharCode(e):""}).join("")}},{key:"licensee",get:function(){var e,t=o(this.buffer.slice(this.index.manufacturer,this.index.manufacturer+2)).map(function(e){return e.toString(16)}).join("");return null!==(e=i.Licensees[t])&&void 0!==e?e:void 0}},{key:"deref",value:function(e,t,n){for(var r=[],i=e;i<this.buffer.length;i+=1){if(this.buffer[i]===t||r.length>=n)return new Uint8Array(r);r.push(this.buffer[i])}return r}},{key:"makeRef",value:function(e,t){return(e<<14)+(16383&this.byteVal(t))}},{key:"formatRef",value:function(e,t){var n=this.makeRef(e,t);return{bank:e,pointer:this.byteVal(t),offset:n}}}])&&u(t.prototype,n),a&&u(t,a),f}();t.Rom=f}()}),require.register("process/browser.js",function(t,n,r){n=e(n,{},"process"),function(){var e,t,n=r.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var u,s=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?s=u.concat(s):c=-1,s.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var n=s.length;n;){for(u=s,s=[];++c<n;)u&&u[c].run();c=-1,n=s.length}u=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new v(e,t)),1!==s.length||l||a(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}()}),require.register("Format.js",function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Format=void 0;var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"tileWidth",1),i(this,"tileHeight",1),i(this,"outputPos",0),i(this,"inputPos",0),i(this,"depth",1),this.inputBuffer=t,this.outputBuffer=n,this.width=r}var t,n,o;return t=e,(n=[{key:"next",value:function(){console.warn("Error: ".concat(this.constructor.name,"::next() has not been implemented."))}}])&&r(t.prototype,n),o&&r(t,o),e}();e.Format=o}),require.register("Processor.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Processor=void 0;var i=t("curvature/base/Mixin"),o=t("curvature/base/View"),a=t("./panel/Panelable");function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return l(e)}(this,n)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,o.View);var t=s(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),i=t.call(this,e,r),Object.assign(i.panel.args,{widgets:[l(i)]}),i.args.bindTo("input",function(e){e&&(i.args.inputName=e.args.input?e.args.input.name:e.args.title,i.args.offset=Number(e.args.firstByte),i.args.length=Number(e.args.buffer.length)-i.args.offset)}),i}return n}();e.Processor=f,i.Mixin.to(f,a.Panelable)}),require.register("canvas/Canvas.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var i=t("curvature/base/Mixin"),o=t("curvature/base/View"),a=(t("../menu/Menu"),t("../panel/Panelable")),u=(t("../panel/Panel"),t("../format/BytePerPixel")),s=t("../format/BitPerPixel"),l=t("../format/Gameboy1bpp"),c=t("../format/Gameboy2bpp"),f=t("../format/Gameboy1bppCol"),p=t("pokemon-parser/PokemonRom"),v=(t("../processor/Invert"),t("../processor/Slice")),h=t("../processor/RLE");function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return S(e)}(this,n)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,o.View);var n,r,i,a=w(b);function b(e,n){var r,i,o,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),r=a.call(this,e,n),i=S(r),o="template",u=t("./canvas.html"),o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,r.args.height=e.height||64,r.args.width=e.width||128,r.args.scale=e.scale||2,r.args.tileArea=1,r.args.offset=0,r.scrollDelta=1,r.args.decoder=e.decoder||"gameboy",r.args.showSettings=!1,r.args.input=e.input||!1,r.args.firstByte="0000",r.panel.args.widgets=[S(r)],r.args.name=e.input&&e.input.name||e.title||"Canvas",r.args.bindTo("name",function(e){r.panel.args.title=e,r.args.input&&(r.args.input.name=e)});var s=r.args.panel,l=S(r);return r.args.toolBar=[{icon:"gear",action:function(e){return r.toggleSettings(e)}},{icon:"run",action:function(e){return s.panels.add(new h.RLE({input:l,panel:s},S(r)).panel)}},{icon:"slice",action:function(e){return s.panels.add(new v.Slice({input:l,panel:s},S(r)).panel)}},{icon:"save",action:function(e){return r.save(e)}}],r}return n=b,(r=[{key:"onRendered",value:function(){var e=this,t={"--scale":this.args.scale,"--width":this.args.width,"--height":this.args.height};this.args.bindTo("offset",function(t,n){e.args.buffer&&e.tags.canvas&&e.drawDots(e.args.buffer)},{wait:0}),this.args.bindTo("scale",function(n,r){e.tags.canvas&&(t["--scale"]=n,e.tags.canvas.style(t)),e.args.buffer&&e.drawDots(e.args.buffer)},{wait:0}),this.args.bindTo("width",function(n,r){n=Number(n),e.tags.canvas&&(t["--width"]=n,e.tags.canvas.width=n,e.tags.canvas.style(t)),e.args.buffer&&e.drawDots(e.args.buffer)},{wait:0}),this.args.bindTo("height",function(n,r){n=Number(n),e.tags.canvas&&(t["--height"]=n,e.tags.canvas.height=n,e.tags.canvas.style(t)),e.args.buffer&&e.drawDots(e.args.buffer)},{wait:0}),this.args.bindTo("input",function(t){t&&(e.args.height=Math.ceil(new Uint8Array(t.buffer).length/16)||e.args.height,e.args.height=Math.min(160,e.args.height),console.log(t.buffer),e.args.filename=t.name,e.args.buffer=new Uint8Array(t.buffer),e.onTimeout(0,function(){e.drawDots(e.args.buffer)}),crypto.subtle.digest("SHA-256",e.args.input.buffer).then(function(t){var n=Array.from(new Uint8Array(t)).map(function(e){return e.toString(16).padStart(2,"0")}).join("");if(["5ca7ba01642a3b27b0cc0b5349b52792795b62d3ed977e98a09390659af96b7b","2a951313c2640e8c2cb21f25d1db019ae6245d9c7121f754fa61afd7bee6452d"].includes(n)){var r=new p.PokemonRom;e.args.spriteOffsets={},r.preload(e.args.buffer).then(function(){r.getAllPokemon().then(function(t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(t=t.filter(function(e){return e.number}).sort(function(e,t){return e.number-t.number}));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.sprites.front.offset+":"+i.sprites.front.length,a=i.sprites.back.offset+":"+i.sprites.back.length,u=i.number.toString().padStart("0",3),s=i.name;e.args.spriteOffsets[o]="# ".concat(u," ").concat(s," FRONT"),e.args.spriteOffsets[a]="# ".concat(u," ").concat(s," BACK")}}catch(e){r.e(e)}finally{r.f()}})})}}))}),this.args.bindTo("decoder",function(t){e.args.buffer&&e.drawDots(e.args.buffer)},{frame:!0})}},{key:"wheel",value:function(e){e.preventDefault(),e.deltaY<1&&this.args.offset>0?this.args.offset-=this.args.width*this.depth:e.deltaY>1&&(this.args.offset+=this.args.width*this.depth),0>this.args.offset&&(this.args.offset=0)}},{key:"keydown",value:function(e){"PageDown"===e.key?(this.args.offset+=this.args.width*this.args.height*(this.depth/8),this.drawDots()):"PageUp"===e.key?(this.args.offset-=this.args.width*this.args.height*(this.depth/8),this.args.offset<0&&(this.args.offset=0),this.drawDots()):"ArrowDown"===e.key?(e.ctrlKey?this.args.offset+=this.depth:e.shiftKey?this.args.offset+=this.args.width*this.depth*2:this.args.offset+=this.args.width*this.depth,this.drawDots()):"ArrowUp"===e.key?(e.ctrlKey?this.args.offset-=this.depth:e.shiftKey?this.args.offset-=this.args.width*this.depth*2:this.args.offset-=this.args.width*this.depth,this.args.offset<0&&(this.args.offset=0),this.drawDots()):"ArrowRight"===e.key?(e.ctrlKey?this.args.offset++:e.shiftKey?this.args.offset+=this.tileArea*(this.depth/8)*2:this.args.offset+=this.tileArea*(this.depth/8),this.drawDots()):"ArrowLeft"===e.key?(e.ctrlKey?this.args.offset--:e.shiftKey?this.args.offset-=this.tileArea*(this.depth/8)*2:this.args.offset-=this.tileArea*(this.depth/8),this.args.offset<0&&(this.args.offset=0),this.drawDots()):"Home"===e.key?(this.args.offset=0,this.drawDots()):"End"===e.key&&(this.args.offset=this.args.buffer.length,this.drawDots())}},{key:"drawDots",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.willDraw&&cancelAnimationFrame(this.willDraw),this.willDraw=requestAnimationFrame(function(){void 0===t&&(t=e.args.buffer);var n=e.tags.canvas,r=n.getContext("2d");requestAnimationFrame(function(){return r.clearRect(0,0,n.width,n.height)});var i=null;switch(e.args.decoder){case"bytes":i=u.BytePerPixel;break;case"bits":i=s.BitPerPixel;break;case"gameboy":i=c.Gameboy2bpp;break;case"gameboy-1bit":i=l.Gameboy1bpp;break;case"gameboy-1bit-cols":i=f.Gameboy1bppCol}e.format(i,t)})}},{key:"format",value:function(e,t){var n=this.tags.canvas.getContext("2d"),r=t.slice(this.args.offset),i=n.createImageData(this.args.width,this.args.height),o=new e(r,i.data,this.args.width);for(this.tileArea=o.tileWidth*o.tileHeight,this.depth=o.depth;o.next(););requestAnimationFrame(function(){return n.putImageData(i,0,0)})}},{key:"toggleSettings",value:function(){this.args.showSettings=!this.args.showSettings}},{key:"zoomIn",value:function(){this.args.scale++}},{key:"zoomOut",value:function(){this.args.scale--}},{key:"jump",value:function(e){var t=y(e.target.value.split(":"),2),n=t[0],r=t[1];this.args.offset=Number(n),this.args.length=Number(r)}},{key:"save",value:function(e){var t=document.createElement("a"),n=new Blob([this.args.buffer]),r=URL.createObjectURL(n);t.setAttribute("download",this.args.name),t.setAttribute("href",r),console.log(this.args.buffer),t.click()}},{key:"runAction",value:function(e,t){t.action(e)}},{key:"hex",value:function(e){return Number(e).toString(16).padStart(4,"0")}}])&&m(n.prototype,r),i&&m(n,i),b}();e.Canvas=O,i.Mixin.to(O,a.Panelable)}),require.register("canvas/canvas.html",function(e,t,n){n.exports='<div data-module = "canvas [[module]]">\n\n\t<p>[[name]]</p>\n\n\t<label cv-if = "buffer">\n\t\t<div>\n\t\t\t<div class = "tool-bar" cv-each = "toolBar:button">\n\t\t\t\t<div class = "icon inline-icon [[button.icon]]-icon" cv-on = "click:runAction(event, button)"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!--\n\t\t\t<div>\n\t\t\t\t<div class = "icon inline-icon goto-address-icon" cv-on = "click:goto(event)"></div>\n\t\t\t</div>\n\t\t\t--\x3e\n\t\t\t\x3c!--\n\t\t\t<div>\n\t\t\t\t<div class = "icon inline-icon gear-icon" cv-on = "click:toggleSettings(event)"></div>\n\t\t\t\t<div class = "icon inline-icon run-icon" cv-on = "click:run(event)"></div>\n\t\t\t\t<div class = "icon inline-icon save-icon"cv-on = "click:save(event)"></div>\n\t\t\t</div>\n \t\t\t--\x3e\n \t\t\t<div cv-if = "loading" class = "right">\n\t\t\t\t<div class = "icon inline-icon loading-icon right"></div>\n\t\t\t</div>\n\t\t\t\x3c!-- <div class = "icon inline-icon folder-icon"></div> --\x3e\n\t\t</div>\n\t</label>\n\n\t<span cv-if = "showSettings">\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>name</p>\n\t\t\t<input cv-bind = "name" type = "text">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>width</p>\n\t\t\t<input cv-bind = "width" type = "number" min = "0">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>height</p>\n\t\t\t<input cv-bind = "height" type = "number" min = "0">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>scale</p>\n\t\t\t<input cv-bind = "scale" type = "number" min = "1">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>row</p>\n\t\t\t<input cv-bind = "offset" type = "number" min = "0">\n\t\t</label>\n\t</span>\n\n\t<label cv-if = "!buffer">\n\t\t<input type = "file" cv-bind = "input">\n\t</label>\n\n\t<div class = "row">\n\n\t\t<label cv-if = "spriteOffsets">\n\t\t\t<p>offsets</p>\n\t\t\t<div class = "canvas-window">\n\t\t\t\t<select multiple="multiple"  cv-on = "change:jump(event)">\n\t\t\t\t\t<optgroup label = "tiles">\n\t\t\t\t\t\t<option value = "65536">OVERWORLD CHARACTERS 1</option>\n\t\t\t\t\t\t<option value = "81920">OVERWORLD CHARACTERS 2</option>\n\t\t\t\t\t\t<option value = "70784">TITLESCREEN GRAPHICS</option>\n\t\t\t\t\t\t<option value = "0x11a80">FONTS (1BPP)</option>\n\t\t\t\t\t\t<option value = "0x64000">MAP TILES</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t\t<optgroup label = "sprites" cv-each = "spriteOffsets:name:offset">\n\t\t\t\t\t\t<option value = "[[offset]]">[[name]]</option>\n\t\t\t\t\t</optgroup>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</label>\n\n\t\t<label cv-if = "buffer" for="">\n\t\t\t<p>buffer</p>\n\t\t\t<div class = "canvas-window">\n\t\t\t\t<label cv-if = "buffer">\n\t\t\t\t\t<p>encoding</p>\n\t\t\t\t\t<select cv-bind = "decoder">\n\t\t\t\t\t\t<optgroup label = "raw">\n\t\t\t\t\t\t\t<option value = "bytes">8 bit greyscale</option>\n\t\t\t\t\t\t\t<option value = "bits">1 bit black & white</option>\n\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t<optgroup label = "gameboy data">\n\t\t\t\t\t\t\t<option value = "gameboy">2bpp - 2 bit 8x8 tiles</option>\n\t\t\t\t\t\t\t<option value = "gameboy-1bit">1bpp - 1 bit 8x8 tiles</option>\n\t\t\t\t\t\t\t<option value = "gameboy-1bit-cols">1bpp - 1 bit columns</option>\n\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t\t<canvas tabindex = "0" cv-ref = "canvas" cv-on = "wheel(event);keydown(event)"></canvas>\n\t\t\t\t<div class = "row">\n\t\t\t\t\t<div><code>0x[[offset|hex]]</code></div>\n\t\t\t\t\t<div class = "right">\n\t\t\t\t\t\t<div class = "icon inline-icon zoom-out-icon" cv-on = "click:zoomOut(event)"></div>\n\t\t\t\t\t\t<div class = "icon inline-icon zoom-in-icon" cv-on = "click:zoomIn(event)"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</label>\n\n\t\t[[mergeWidget]]\n\n\t</div>\n</div>\n'}),require.register("file/Drop.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Drop=void 0;t("curvature/base/Bindable");var i=t("curvature/base/View"),o=(t("../panel/Panel"),t("../canvas/Canvas")),a=(t("./Icon"),t("./FileDatabase")),u=t("./FileModel"),s=t("pokemon-parser/PokemonRom");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(b,i.View);var n,r,f,d=h(b);function b(e,n){var r,i,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),r=d.call(this,e,n),i=y(r),o="template",u=t("./drop.html"),o in i?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,r.args.files=[],r.fileDb=a.FileDatabase.open("files",1),r.refresh(),r}return n=b,(r=[{key:"refresh",value:function(){var e=this,t={store:"files",index:"name",type:u.FileModel};this.args.files=[],this.fileDb.then(function(n){return n.select(t).each(function(t){t&&e.args.files.push(t)})})}},{key:"drop",value:function(e){e.preventDefault(),this.importFiles(e.dataTransfer.files)}},{key:"dragover",value:function(e){e.preventDefault()}},{key:"iconClicked",value:function(e,t){this.openCanvasPanel(t)}},{key:"importFile",value:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.addEventListener("change",function(n){console.log(n),e.importFiles(t.files)},{once:!0}),t.click()}},{key:"importFiles",value:function(e){var t,n=this,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(e);try{var i=function(){var e=t.value,r=e.arrayBuffer(),i=n.fileDb;Promise.all([r,i]).then(function(t){var r=l(t,2),i=r[0],o=r[1],a={store:"files",index:"name",range:e.name,type:u.FileModel},s={name:e.name,lastModified:e.lastModified,size:e.size,type:e.type,buffer:i};o.select(a).one().then(function(e){var t=e.record;t?(t.consume(s),o.update("files",t)):(t=u.FileModel.from(s),o.insert("files",t)),n.args.files.push(t),n.openCanvasPanel(t)})})};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}},{key:"openCanvasPanel",value:function(e){var t=this.args.panel,n=new o.Canvas({input:e,panel:t}),r=new s.PokemonRom;r.preload(new Uint8Array(e.buffer)),console.log(r.title),t.panels.add(n.panel)}}])&&p(n.prototype,r),f&&p(n,f),b}();e.Drop=b}),require.register("file/FileDatabase.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileDatabase=void 0;var i=t("curvature/model/Database");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,i.Database);var t,n,r,s=u(l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.apply(this,arguments)}return t=l,(n=[{key:"_version_1",value:function(e){this.createObjectStore("files",{keyPath:"name"}).createIndex("name","name",{unique:!0})}}])&&o(t.prototype,n),r&&o(t,r),l}();e.FileDatabase=l}),require.register("file/FileModel.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FileModel=void 0;var i=t("curvature/model/Model");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,i.Model);var t=a(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return l(u(e=t.call.apply(t,[this].concat(i))),"lastModified",void 0),l(u(e),"buffer",void 0),l(u(e),"name",void 0),l(u(e),"size",void 0),l(u(e),"type",void 0),e}return n}();e.FileModel=c,l(c,"keyProps",["name"])}),require.register("file/Icon.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Icon=void 0;var i=t("curvature/base/View");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return u(e)}(this,n)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,i.View);var n=a(r);function r(e,i){var o,a,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o=n.call(this,e,i),a=u(o),s="template",l=t("./icon.html"),s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,o}return r}();e.Icon=l}),require.register("file/drop.html",function(e,t,n){n.exports='<div data-module = "file-drop" cv-on = "drop(event);dragover(event);contextmenu(event, file, $parent);">\n\tdrop files here.\n</div>\n\n<div data-module = "file-list" cv-each = "files:file" cv-view = "/file/Icon">\n\t<div tabindex = "0" class = "file" cv-on = "dblclick:iconClicked(event, file); contextmenu(event, file, $parent);">\n\t\t<img src = "/gameboy.ico">\n\t\t<span>[[file.name]]</span>\n\t</div>\n</div>\n'}),require.register("file/icon.html",function(e,t,n){n.exports='<div class = "file" tabindex = "0">\n\t<img src = "/gameboy.ico">\n\t<span>[[file.name]]</span>\n</div>\n'}),require.register("format/BitPerPixel.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BitPerPixel=void 0;var i=t("../Format");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,i.Format);var t,n,r,l=u(c);function c(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=l.call.apply(l,[this].concat(o)),t=s(e),r=1,(n="depth")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=c,(n=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){for(var e=this.inputBuffer[this.inputPos++],t=0,n=[(128&e)>>7,(64&e)>>6,(32&e)>>5,(16&e)>>4,(8&e)>>3,(4&e)>>2,(2&e)>>1,(1&e)>>0];t<n.length;t++){var r=n[t],i=4*this.outputPos;this.outputBuffer[i+0]=255*r,this.outputBuffer[i+1]=255*r,this.outputBuffer[i+2]=255*r,this.outputBuffer[i+3]=255,this.outputPos++}return 4*this.outputPos<this.outputBuffer.length}}}])&&o(t.prototype,n),r&&o(t,r),c}();e.BitPerPixel=c}),require.register("format/BytePerPixel.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BytePerPixel=void 0;var i=t("../Format");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,i.Format);var t,n,r,l=u(c);function c(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=l.call.apply(l,[this].concat(o)),t=s(e),r=8,(n="depth")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=c,(n=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){var e=this.inputBuffer[this.inputPos++],t=4*this.outputPos;return this.outputBuffer[t+0]=e,this.outputBuffer[t+1]=e,this.outputBuffer[t+2]=e,this.outputBuffer[t+3]=255,this.outputPos++,t<this.outputBuffer.length}}}])&&o(t.prototype,n),r&&o(t,r),c}();e.BytePerPixel=c}),require.register("format/Gameboy1bpp.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gameboy1bpp=void 0;var i=t("../Format");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,i.Format);var t,n,r,l=u(f);function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(s(e=l.call.apply(l,[this].concat(n))),"tileWidth",8),c(s(e),"tileHeight",8),c(s(e),"depth",1),e}return t=f,(n=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){var e=[[255,255,255],[68,68,68],[204,204,204],[0,0,0]],t=this.inputBuffer[this.inputPos++],n=Math.floor(this.width/this.tileWidth),r=[(1&t)>>0,(2&t)>>1,(4&t)>>2,(8&t)>>3,(16&t)>>4,(32&t)>>5,(64&t)>>6,(128&t)>>7],i=this.tileWidth*this.tileHeight;for(var o in r){var a=Math.floor(this.outputPos/i),u=a%n,s=Math.floor(a/n),l=this.outputPos%i,c=Math.floor(l/this.tileWidth),f=this.tileWidth-l%this.tileWidth,p=u*this.tileWidth+f,v=s*this.tileHeight+c,h=n*this.tileWidth*v+p;this.outputBuffer[4*h+0]=e[r[o]][0],this.outputBuffer[4*h+1]=e[r[o]][1],this.outputBuffer[4*h+2]=e[r[o]][2],this.outputBuffer[4*h+3]=255,this.outputPos++}return 4*this.outputPos<this.outputBuffer.length}}}])&&o(t.prototype,n),r&&o(t,r),f}();e.Gameboy1bpp=f}),require.register("format/Gameboy1bppCol.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gameboy1bppCol=void 0;var i=t("./Gameboy1bpp");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,i.Gameboy1bpp);var t,n,r,l=u(f);function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c(s(e=l.call.apply(l,[this].concat(n))),"tileWidth",2),c(s(e),"tileHeight",2),c(s(e),"depth",1),e}return t=f,(n=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){var e=this.inputBuffer[this.inputPos++],t=Math.floor(this.width/this.tileWidth),n=[(1&e)>>0,(2&e)>>1,(4&e)>>2,(8&e)>>3,(16&e)>>4,(32&e)>>5,(64&e)>>6,(128&e)>>7],r=this.tileWidth*this.tileHeight;for(var i in n){var o=Math.floor(this.outputPos/r),a=o%t,u=Math.floor(o/t),s=this.outputPos%Math.pow(this.tileWidth,2),l=Math.floor(s/this.tileWidth),c=s%this.tileHeight,f=a*this.tileWidth+l,p=u*this.tileHeight+c,v=4*(this.width*p+f);this.outputBuffer[v+0]=n[i]?255:0,this.outputBuffer[v+1]=n[i]?255:0,this.outputBuffer[v+2]=n[i]?255:0,this.outputBuffer[v+3]=255,this.outputPos++}return 4*this.outputPos<this.outputBuffer.length}}}])&&o(t.prototype,n),r&&o(t,r),f}();e.Gameboy1bppCol=f}),require.register("format/Gameboy2bpp.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Gameboy2bpp=void 0;var i=t("../Format");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,i.Format);var t,n,r,l=u(f);function f(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),c(s(r=l.call(this)),"tileWidth",8),c(s(r),"tileHeight",8),c(s(r),"depth",2),r.inputBuffer=e,r.outputBuffer=t,r.width=n,r}return t=f,(n=[{key:"next",value:function(){if(!(this.inputPos>=this.inputBuffer.length)){var e=[[255,255,255],[51,51,51],[153,153,153],[0,0,0]],t=this.inputBuffer[this.inputPos++],n=this.inputBuffer[this.inputPos++],r=Math.floor(this.width/this.tileWidth),i=[((128&t)<<1|128&n)>>7,((64&t)<<1|64&n)>>6,((32&t)<<1|32&n)>>5,((16&t)<<1|16&n)>>4,((8&t)<<1|8&n)>>3,((4&t)<<1|4&n)>>2,((2&t)<<1|2&n)>>1,((1&t)<<1|1&n)>>0],o=this.tileWidth*this.tileHeight;for(var a in i){var u=Math.floor(this.outputPos/o),s=u%r,l=Math.floor(u/r),c=this.outputPos%o,f=Math.floor(c/this.tileWidth),p=c%this.tileWidth,v=s*this.tileWidth+p,h=l*this.tileHeight+f,y=r*this.tileWidth*h+v;this.outputBuffer[4*y+0]=e[i[a]][0],this.outputBuffer[4*y+1]=e[i[a]][1],this.outputBuffer[4*y+2]=e[i[a]][2],this.outputBuffer[4*y+3]=255,this.outputPos++}return 4*this.outputPos<this.outputBuffer.length}}}])&&o(t.prototype,n),r&&o(t,r),f}();e.Gameboy2bpp=f}),require.register("initialize.js",function(e,t,n){"use strict";t("curvature/base/View"),t("curvature/base/Tag");var r=t("./panel/Panel"),i=t("./file/Drop"),o=t("./file/FileDatabase"),a=t("./file/FileModel"),u=t("curvature/net/Elicit");function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){u=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}document.addEventListener("DOMContentLoaded",function(){var e=new i.Drop,t=new r.Panel({contextMenu:[],widgets:[e],type:"root"});e.args.panel=t,t.render(document.body);var n={store:"files",index:"name",type:a.FileModel};o.FileDatabase.open("files",1).then(function(t){t.select(n).then(function(n){n.index;Promise.all(["squirtle_front.bin","wartortle_front.bin","blastoise_front.bin","charmander_front.bin","charmeleon_front.bin","charizard_front.bin","bulbasaur_front.bin","ivysaur_front.bin","venusaur_front.bin"].map(function(e){var t=new u.Elicit("/samples/"+e,{defer:!0});return u.Elicit.pool(t),t.then(function(){return t.blob()}).then(function(e){return e.arrayBuffer()}).then(function(t){return[e,new Uint8Array(t).buffer]})})).then(function(n){var r=n.map(function(e){var n=s(e,2),r=n[0],i=n[1];console.log(r,i);var o={store:"files",index:"name",range:[r],type:a.FileModel},u={name:r,id:r,lastModified:Date.now(),size:i.length,type:"bin",buffer:i};return t.select(o).one().then(function(e){var n=e.mapped;return n?(n.consume(u),n.id=n.name,t.update("files",n)):((n=a.FileModel.from(u)).id=n.name,t.insert("files",n))})});Promise.all(r).then(function(){return e.refresh()})})})})})}),require.register("menu/Menu.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;var i=t("curvature/base/Mixin"),o=t("curvature/base/View"),a=t("../processor/Invert"),u=t("../processor/Slice"),s=t("../processor/RLE"),l=t("../panel/Panelable");t("../panel/Panel");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,o.View);var n,r,i,l=p(h);function h(e,n){var r,i,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),r=l.call(this,e,n),i=v(r),o="template",c=t("./menu.html"),o in i?Object.defineProperty(i,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[o]=c,r.args.links={Invert:a.Invert,Slice:u.Slice,RLE:s.RLE},Object.assign(r.panel.args,{title:"Select a Processor",widgets:[v(r)]}),r}return n=h,(r=[{key:"click",value:function(e,t,n){var r=this.args.panel,i=new t({input:this.args.input,panel:r});r.panels.add(i.panel),this.remove()}}])&&c(n.prototype,r),i&&c(n,i),h}();e.Menu=y,i.Mixin.to(y,l.Panelable)}),require.register("menu/menu.html",function(e,t,n){n.exports='<div data-module = "menu">\n\t<ul cv-each = "links:processor:title">\n\t\t<li>\n\t\t\t<a cv-link = "/process/[[title]]" cv-on = "click(event, processor, title)">\n\t\t\t\t[[title]]\n\t\t\t</a>\n\t\t</lu>\n\t</ul>\n</div>\n'}),require.register("panel/Panel.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Panel=void 0;var r=t("curvature/base/Bindable"),i=t("curvature/base/View"),o=t("curvature/base/Bag"),a=t("../processor/DeleteConfirm");function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(b,i.View);var n,l,h,d=p(b);function b(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),y(v(i=d.call(this,e,n)),"template",t("./panel.html")),i.host=null,i.openLeft=0,i.openTop=0,i.args.widgets=r.Bindable.make(i.args.widgets||[]),i.args.title=i.args.title||null,i.args.widget=i.args.widget||null,i.args.left=0,i.args.top=0,i.args.z=0,i.panels=new o.Bag(function(e,t,n){n===o.Bag.ITEM_ADDED&&(e.host=v(i),i.openLeft+=57,i.openTop+=93,e.args.left=i.openLeft,e.args.top=i.openTop,e.args.z=Object.values(i.panels.list).length,i.openLeft%=Math.floor(window.innerWidth/2),i.openTop%=Math.floor(window.innerHeight/2),e.onRemove(function(){return i.panels.remove(e)}))}),i.args.widgets.bindTo(function(e,t){e.parent=v(i)}),i.args.panels=i.panels.list,i}return n=b,(l=[{key:"onAttached",value:function(e){var t=this;this.args.bindTo(["left","top","contextMenuXL","contextMenuXR","contextMenuYT","contextMenuYB"],function(e,n){var r=t.tags.panel;if(r){var i=document.body,o=i.clientWidth-r.clientWidth,a=i.clientHeight-r.clientHeight;"left"===n&&e>o&&(e=o),"top"===n&&e>a&&(e=a),e<0&&(e=0),t.args[n]=e,e==Number(e)&&(e+="px"),t.tags.panel.style(y({},"--".concat(n),"".concat(e)))}}),this.args.bindTo("z",function(e,n){t.tags.panel.style(y({},"--".concat(n),"".concat(e)))})}},{key:"mousedown",value:function(e){if(this.host){var t=Object.values(this.host.panels.list).sort(function(e,t){return t.z>e.z});for(var n in t)if(t[n]!==this)t[n].args.z>this.args.z&&t[n].args.z--;else if(0===n)break;this.args.z=t.length}}},{key:"contextmenu",value:function(e,t,n){var r=this;if(e.stopPropagation(),e.preventDefault(),"root"===this.args.type){this.args.contextMenu=t?[{title:"open",callback:function(){return n.openCanvasPanel(t)}},{title:"delete",callback:function(){return r.openDeleteDialog(t,n)}}]:[{title:"import",callback:function(){n.args.widgets[0].importFile(),r.args.contextMenu=[]}}],this.args.contextMenuX=e.pageX;var i=document.body.offsetWidth,o=document.body.offsetHeight;e.pageX>.5*i?(this.args.contextMenuXR=i-e.pageX+"px",this.args.contextMenuXL="initial"):(this.args.contextMenuXR="initial",this.args.contextMenuXL=e.pageX+"px"),e.pageY>.5*o?(this.args.contextMenuYB=o-e.pageY+"px",this.args.contextMenuYT="initial"):(this.args.contextMenuYT=e.pageY+"px",this.args.contextMenuYB="initial")}}},{key:"contextmenuClicked",value:function(e,t,n){t.callback(e,n),console.log(e,t,n),this.args.contextMenu=[]}},{key:"openDeleteDialog",value:function(e,t){var n=new a.DeleteConfirm({panel:this,file:e,icon:t});this.panels.add(n.panel)}},{key:"startFollow",value:function(){var e=this,t=this.listen(window,"mousemove",function(t){e.args.left=t.pageX-10,e.args.top=t.pageY-10,e.args.moving="moving"});this.listen(window,"mouseup",function(n){e.args.moving="",t()})}},{key:"close",value:function(){if(this.args.widgets){var e,t=s(this.args.widgets);try{for(t.s();!(e=t.n()).done;){var n=e.value;"object"==u(n)&&"function"==typeof n.remove&&n.remove()}}catch(e){t.e(e)}finally{t.f()}}this.remove()}}])&&c(n.prototype,l),h&&c(n,h),b}();e.Panel=d}),require.register("panel/Panelable.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Panelable=void 0;var r=t("./Panel");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=Symbol("MyPanel"),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"panel",get:function(){return this[o]||(this[o]=new r.Panel({},this))}}])&&i(t.prototype,n),a&&i(t,a),e}();e.Panelable=a}),require.register("panel/panel.html",function(e,t,n){n.exports='<div\n\tdata-module = "panel"\n\tclass = "[[moving]]"\n\tdata-panel-type = "[[type]]"\n\tcv-ref = "panel"\n\tcv-on = "mousedown(event):c;contextmenu(event)"\n>\n\t<div class = "titlebar" cv-on = "mousedown:startFollow(event)" cv-if = "title">\n\t\t<span class = "icon inline-icon"></span>\n\t\t<span>[[title]]</span>\n\t\t<div class = "right">\n\t\t\t<div class = "icon inline-icon x-icon" cv-on = "click:close(event)"></div>\n\t\t</div>\n\t</div>\n\t<div class = "widget" cv-each = "widgets:widget">[[widget]]</div>\n\t<div class = "panels" cv-each = "panels:panel">[[panel]]</div>\n\n\t<div class = "context-menu">\n\t\t<div class = "v-container" cv-each = "contextMenu:item:key">\n\t\t\t<div cv-on = "click:contextmenuClicked(event,item,key)">[[item.title]]</div>\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("processor/DeleteConfirm.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteConfirm=void 0;t("curvature/base/View"),t("../panel/Panel"),t("../canvas/Canvas"),t("../file/FileModel");var i=t("../file/FileDatabase"),o=t("../Processor");function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,o.Processor);var n,r,u,p=c(h);function h(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),v(f(r=p.call(this,e,n)),"template",t("./delete-confirm.html")),v(f(r),"table1",a(Array(16)).map(function(e,t){return(2<<t)-1})),Object.assign(r.panel.args,{title:"Delete?"}),r}return n=h,(r=[{key:"run",value:function(){var e=this,t=i.FileDatabase.open("files",1);this.args.file.id=this.args.file.name,console.log(this.args.file),t.then(function(t){return t.delete("files",e.args.file)}).then(function(){e.args.icon.refresh(),e.panel.close()})}},{key:"close",value:function(){this.panel.close()}}])&&s(n.prototype,r),u&&s(n,u),h}();e.DeleteConfirm=h}),require.register("processor/Invert.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0;t("curvature/base/View"),t("../panel/Panel");var i=t("../canvas/Canvas"),o=t("../Processor");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return l(e)}(this,n)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,o.Processor);var n,r,c,f=s(p);function p(e,n){var r,i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),r=f.call(this,e,n),i=l(r),o="template",a=t("./invert.html"),o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,Object.assign(r.panel.args,{title:"Invert"}),r}return n=p,(r=[{key:"run",value:function(){for(var e=this.args.panel,t=Number(this.args.offset),n=Number(this.args.length),r=this.args.input.args.buffer,o=new Uint8Array(n),a=0;a<n;a++)o[a]=255^r[a+t];var u="Inverted "+this.args.inputName,s=new i.Canvas({buffer:o,panel:e,title:u,decoder:this.args.input.args.decoder,height:this.args.input.args.height,width:this.args.input.args.width,scale:this.args.input.args.scale});e.panels.add(s.panel),this.remove()}}])&&a(n.prototype,r),c&&a(n,c),p}();e.Invert=f}),require.register("processor/RLE.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RLE=void 0;t("curvature/base/View"),t("../panel/Panel");var i=t("../canvas/Canvas"),o=t("../Processor"),a=t("pokemon-parser/decompress/RleDelta"),u=t("pokemon-parser/decompress/Merge");function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return v(e)}(this,n)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,o.Processor);var n,r,l,h=p(d);function d(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),y(v(r=h.call(this,e,n)),"template",t("./rle.html")),y(v(r),"table1",s(Array(16)).map(function(e,t){return(2<<t)-1})),r.sideSize=7,r.tileSize=8,r.args.offset=r.args.input.args.offset,r.args.slow=!1,Object.assign(r.panel.args,{title:"RLE + Delta"}),r}return n=d,(r=[{key:"run",value:function(){var e=this,t=this.openRleWidget(),n=t.rleDelta,r=t.rleWidget;r.args.loading=!0;var i=this.openMergeWidget(n,r),o=i.merge,a=i.mergeWidget;r.panel.args.widgets.push(a),a.rendered.then(function(){return e.runRle(n,r)}).then(function(){return a.args.loading=!0,r.args.loading=!1,e.runMerge(o,a)}).then(function(){a.args.loading=!1}),this.remove()}},{key:"openRleWidget",value:function(){var e=this.args.input.args.buffer,t=this.args.panel,n=e.slice(this.args.offset),r=new a.RleDelta(n),o=this.args.offset,u=this.args.inputName,s=new i.Canvas({buffer:r.buffer,scale:3,panel:t,title:"".concat(u,"@0x").concat(o.toString(16).toUpperCase(),"_rle_delta.bin"),decoder:"gameboy-1bit-cols",width:r.xSize,height:2*r.xSize});return t.panels.add(s.panel),{rleDelta:r,rleWidget:s}}},{key:"runRle",value:function(e,t){if(this.args.slow){return new Promise(function n(r){e.iterate()?setTimeout(function(){return n(r)},0):r(),t.drawDots()})}return e.decompress(),t.drawDots(),Promise.resolve()}},{key:"openMergeWidget",value:function(e,t){var n=this.args.panel,r=new u.Merge(e.buffer,e.xSize),o=this.args.inputName,a=this.args.offset,s="".concat(o,"@0x").concat(a.toString(16).toUpperCase(),"_rle_delta_merged.bin");return{merge:r,mergeWidget:new i.Canvas({buffer:r.buffer,panel:n,title:s,width:e.xSize,height:e.xSize,scale:6,decoder:"bytes"})}}},{key:"runMerge",value:function(e,t){if(this.args.slow){return new Promise(function n(r){e.iterate()?setTimeout(function(){return n(r)},0):r(),t.drawDots()})}return e.decompress(),t.drawDots(),Promise.resolve()}}])&&c(n.prototype,r),l&&c(n,l),d}();e.RLE=d}),require.register("processor/Slice.js",function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Slice=void 0;t("curvature/base/View"),t("../panel/Panel");var i=t("../canvas/Canvas"),o=t("../Processor");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;return l(e)}(this,n)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,o.Processor);var n,r,c,f=s(p);function p(e,n){var r,i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),r=f.call(this,e,n),i=l(r),o="template",a=t("./slice.html"),o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a,Object.assign(r.panel.args,{title:"Slice"});var u=r.args.input.args.offset,s=r.args.input.args.length;return r.args.start=u,r.args.end=u+s,r}return n=p,(r=[{key:"run",value:function(){for(var e=this.args.panel,t=Number(this.args.start),n=Number(this.args.end),r=this.args.input.args.buffer,o=n-t,a=new Uint8Array(o),u=0;u<o;u++)a[u]=r[u+t];var s=this.args.inputName,l=t.toString(16).toUpperCase(),c=(n.toString(16).toUpperCase(),"".concat(s,"@0x").concat(l,".bin")),f=new i.Canvas({buffer:a,panel:e,title:c,decoder:this.args.input.args.decoder,height:32,width:128,scale:2});e.panels.add(f.panel),this.remove()}}])&&a(n.prototype,r),c&&a(n,c),p}();e.Slice=f}),require.register("processor/delete-confirm.html",function(e,t,n){n.exports='<div data-module = "canvas invert">\n\t<div class = "column">\n\n\t\t<label><p>Are you sure?</p></label>\n\n\t\t<div class = "row right">\n\t\t\t<button cv-on = "click:run()">yes</button>\n\t\t\t<button cv-on = "click:close()">no</button>\n\t\t</div>\n\n\t</div>\n</div>\n'}),require.register("processor/invert.html",function(e,t,n){n.exports='<div data-module = "canvas invert">\n\t<div class = "column">\n\t\t<label><p>input buffer: [[inputName]]</p></label>\n\t\t<label class = "column">\n\t\t\t<p>offset</p>\n\t\t\t<input type = "number" cv-bind = "offset">\n\t\t</label>\n\t\t<label class = "column">\n\t\t\t<p>length</p>\n\t\t\t<input type = "number" cv-bind = "length">\n\t\t</label>\n\t\t<div class = "row right">\n\t\t\t<button cv-on = "click:run(event)">invert</button>\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("processor/rle.html",function(e,t,n){n.exports='<div data-module = "canvas invert">\n\t<div class = "column">\n\n\t\t<label><p>input buffer: [[inputName]]</p></label>\n\n\t\t<label class = "column">\n\t\t\t<p>offset</p>\n\t\t\t<input cv-bind = "offset">\n\t\t</label>\n\n\t\t<label class = "column">\n\t\t\t<p>slow</p>\n\t\t\t<input cv-bind = "slow" type = "checkbox"  value = "1">\n\n\t\t</label>\n\n\t\t<div class = "row right">\n\t\t\t<button cv-on = "click:run(event)">decompress</button>\n\t\t</div>\n\n\t</div>\n</div>\n'}),require.register("processor/slice.html",function(e,t,n){n.exports='<div data-module = "canvas invert">\n\t<div class = "column">\n\t\t<label><p>input buffer: [[inputName]]</p></label>\n\t\t<label class = "column">\n\t\t\t<p>start</p>\n\t\t\t<input cv-bind = "start">\n\t\t</label>\n\t\t<label class = "column">\n\t\t\t<p>end</p>\n\t\t\t<input cv-bind = "end">\n\t\t</label>\n\t\t<div class = "row right">\n\t\t\t<button cv-on = "click:run(event)">slice</button>\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("sprite-decoder/SpriteDecoder.js",function(e,t,n){"use strict"}),require.alias("process/browser.js","process"),require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
