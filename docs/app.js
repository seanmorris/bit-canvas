!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)".."===(n=i[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var i,o={id:t,exports:{},hot:d&&d.createHot(t)};return n[t]=o,r(o.exports,(i=t,function(t){var n=a(u(i),t);return e.require(n,i)}),o),o.exports},c=function(e){var t=r[e];return t&&e!==t?c(t):e},l=function(e,r){null==r&&(r="/");var o=c(e);if(i.call(n,o))return n[o].exports;if(i.call(t,o))return s(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&l.register(a,e[a]);else t[e]=o,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");i.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var d=e._hmr&&new e._hmr(function(e,t){return c(a(u(e),t))},l,t,n);l._cache=n,l.hmr=d&&d.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},i=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var o=n.split("/"),a=o.lastIndexOf("node_modules"),u=o.slice(0,a).join("/");return i(t,u)}}return r};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&n){var a=i(o,n);if(a!==r)return a}return e(o)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.meta=Symbol("meta"),this.content=new Map,this.list=e.Bindable.makeBindable({}),this.current=0,this.type=void 0,this.changeCallback=n}var n,i;return n=t,(i=[{key:"add",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(!this.content.has(e)){var n,r=(n=this.current++,Number(n).toString(36));this.content.set(e,r),this.list[r]=e,this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_ADDED,r)}}},{key:"remove",value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var n=this.content.get(e);return delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,t.ITEM_REMOVED,n),e}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&r(n.prototype,i),t}();t.Bag=i,Object.defineProperty(i,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(i,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,n,r){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(i,n.prototype),i}).apply(null,arguments)}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var a,u,s,c=Symbol("ref"),l=Symbol("original"),f=Symbol("deck"),v=Symbol("binding"),d=Symbol("subBinding"),p=Symbol("bindingAll"),h=Symbol("isBindable"),b=Symbol("wrapping"),y=Symbol("executing"),m=Symbol("stack"),g=(Symbol("object"),Symbol("wrapped")),w=Symbol("unwrapped"),_=Symbol("getProto"),O=Symbol("onGet"),k=Symbol("onAllGet"),j=Object.getPrototypeOf(Int8Array),P=window||{},T=[P.Node,P.File,P.Map,P.Set,P.ResizeObserver,P.MutationObserver,P.PerformanceObserver,P.IntersectionObserver].filter(function(e){return"function"==typeof e}),S=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,a;return r=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[h])&&e[h]===t}},{key:"onDeck",value:function(e,t){return e[f][t]||!1}},{key:"ref",value:function(e){return e[c]||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"make",value:function(r){var o=this;if(!r||!["function","object"].includes(i(r)))return r;if(T.filter(function(e){return r instanceof e}).length||Object.isSealed(r)||!Object.isExtensible(r))return r;if(r[c])return r;if(r[v])return r;Object.defineProperty(r,c,{configurable:!0,enumerable:!1,writable:!0,value:r}),Object.defineProperty(r,l,{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(r,f,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,v,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,d,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(r,p,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,h,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(r,y,{enumerable:!1,writable:!0}),Object.defineProperty(r,b,{enumerable:!1,writable:!0}),Object.defineProperty(r,m,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,"___before___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,"___after___",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(r,g,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,w,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(r,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(n)){var c=n.map(function(t){return e(t,a,u)});return function(){return c.map(function(e){return e()})}}if(n instanceof Function&&(u=a||{},a=n,s=!0),u.delay>=0&&(a=o.wrapDelayCallback(a,u.delay)),u.throttle>=0&&(a=o.wrapThrottleCallback(a,u.throttle)),u.wait>=0&&(a=o.wrapWaitCallback(a,u.wait)),u.frame&&(a=o.wrapFrameCallback(a,u.frame)),u.idle&&(a=o.wrapIdleCallback(a)),s){var l=r[p].length;if(r[p].push(a),!("now"in u)||u.now)for(var f in r)a(r[f],f,r,!1);return function(){delete r[p][l]}}r[v][n]||(r[v][n]=[]);var h=r[v][n].length;if(u.children){var b=a;a=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],s=r[d].get(b);if(s&&(r[d].delete(b),s()),"object"===i(a)){var c=t.make(a);r[d].set(b,c.bindTo(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b.apply(void 0,n.concat(t))},Object.assign({},u,{children:!1}))),b.apply(void 0,n)}else b.apply(void 0,n)}}r[v][n].push(a),"now"in u&&!u.now||a(r[n],n,r,!1);var y=!1,m=function(){var e=r[d].get(a);e&&(r[d].delete(a),e()),y||(y=!0,r[v][n]&&delete r[v][n][h])};return u.removeWith&&u.removeWith instanceof View&&u.removeWith.onRemove(function(){return m}),m}}),Object.defineProperty(r,"bindChain",{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var n=e.split("."),i=n.shift(),a=n.slice(0),u=[];return u.push(r.bindTo(i,function(e,n,r,i){var s=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=o.makeBindable({})),u=u.concat(e.bindChain(s,t))):t(e,n,r,i)})),function(){return u.map(function(e){return e()})}}}),Object.defineProperty(r,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r.___before___.length;r.___before___.push(e);var n=!1;return function(){n||(n=!0,delete r.___before___[t])}}}),Object.defineProperty(r,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=r.___after___.length;r.___after___.push(e);var n=!1;return function(){n||(n=!0,delete r.___after___[t])}}}),Object.defineProperty(r,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in r[p])if(r[p][e])return!0;for(var t in r[v])for(var n in r[v][t])if(r[v][t][n])return!0;return!1}});var a=function(e){r[e]&&r[e]instanceof Object&&!r[e]instanceof Promise&&(T.filter(function(t){return r[e]instanceof t}).length||!Object.isExtensible(r[e])||Object.isSealed(r[e])||(r[e]=t.make(r[e])))};for(var u in r)a(u);return Object.defineProperty(r,c,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(r,{get:function(n,i){if(i===c||i===l||"apply"===i||"isBound"===i||"bindTo"===i||"__proto__"===i)return n[i];var o=Object.getOwnPropertyDescriptor(r,i);return!o||o.configurable||o.writable?r[k]?r[k](i):!r[O]||i in r?n[g][i]?n[g][i]:!o||o.configurable||o.writable?"function"==typeof n[i]?(Object.defineProperty(n[w],i,{configurable:!1,enumerable:!1,writable:!1,value:n[i]}),n[g][i]=t.make(function(){var t,o=r instanceof Promise||r instanceof Map||r instanceof Set||"function"==typeof j&&r instanceof j||"function"==typeof EventTarget&&r instanceof EventTarget||"function"==typeof ResizeObserver&&r instanceof ResizeObserver||"function"==typeof MutationObserver&&r instanceof MutationObserver||"function"==typeof PerformanceObserver&&r instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&r instanceof IntersectionObserver?r:r[c];n[y]=i,n[m].unshift(i);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];for(var l in n.___before___)n.___before___[l](n,i,n[m],r,u);new.target?t=e(n[w][i],u):t=Object.getPrototypeOf(n)[i]===n[i]?n[i].apply(o||r,u):n[i].apply(n,u);for(var f in n.___after___)n.___after___[f](n,i,n[m],r,u);return n[y]=null,n[m].shift(),t}),n[g][i]):n[i]:(n[g][i]=n[i],n[g][i]):r[O](i):n[i]},set:function(e,n,i){if(n===l)return!0;if(void 0!==r[f][n]&&r[f][n]===i)return!0;if("string"==typeof n&&"___"===n.substring(0,3)&&"___"===n.slice(-3))return!0;if(e[n]===i)return!0;for(var o in i&&i instanceof Object&&(T.filter(function(e){return r instanceof e}).length||!Object.isExtensible(r)||Object.isSealed(r)||(i=t.makeBindable(i))),r[f][n]=i,r[p])r[p][o]&&r[p][o](i,n,e,!1);var a=!1;if(n in r[v])for(var u in r[v][n])r[v][n]&&r[v][n][u]&&!1===r[v][n][u](i,n,e,!1,e[n])&&(a=!0);if(delete r[f][n],!a){var s=Object.getOwnPropertyDescriptor(e,n);e instanceof File&&"lastModifiedDate"==n||s&&!s.writable||e[n]!==i||(e[n]=i)}return Reflect.set(e,n,i)},construct:function(r,i){var o="constructor";for(var a in r.___before___)r.___before___[a](r,o,r[m],void 0,i);var u=t.make(e(r[l],n(i)));for(var s in r.___after___)r.___after___[s](r,o,r[m],u,i);return u},getPrototypeOf:function(e){return _ in r?r[_]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){if(!(t in e))return!0;for(var n in r[p])r[p][n](void 0,t,e,!0,e[t]);if(t in r[v])for(var i in r[v][t])r[v][t][i]&&r[v][t][i](void 0,t,e,!0,e[t]);return delete e[t],!0}})}),r[c]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[g],e[v],e[p],e.___after___,e.___before___)}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(r&&1===i.length)return[this.makeBindable(e),i.shift(),o];!(!(n=i.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.makeBindable(e[n])}return[this.makeBindable(e),n,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(e){return function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}(e)}},{key:"wrapWaitCallback",value:function(e,t){var n=!1;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n&&(clearTimeout(n),n=!1),n=setTimeout(function(){return e.apply(void 0,i)},t)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],null&&o(r.prototype,null),a&&o(r,a),t}();t.Bindable=S,a=S,u="throttles",s=new WeakMap,u in a?Object.defineProperty(a,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[u]=s,Object.defineProperty(S,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(S,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:_}),Object.defineProperty(S,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:k})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.bucket||(this.bucket={}),this.bucket[r]||(this.bucket[r]={}),this.bucket[r][e]={expiration:i,value:t}}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard";return this.bucket&&this.bucket[n]&&this.bucket[n][e]&&(0==this.bucket[n][e].expiration||this.bucket[n][e].expiration>(new Date).getTime())?this.bucket[n][e].value:t}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Cache=n}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var r={};try{r=n("/Config").Config||{}}catch(e){!0===window.devMode&&console.error(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var i=t[r];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Config=i,Object.defineProperty(i,"configs",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"mapTags",value:function(e,t,n,r,i){var o=[],a=!0;r&&(a=!1);for(var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);s.nextNode();)o.push(n(s.currentNode,s));return o}},{key:"dispatchEvent",value:function(e,n){e.dispatchEvent(n),t.mapTags(e,!1,function(e){e.dispatchEvent(n)})}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Dom=n}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=Symbol("constructor"),h=(Symbol("mixinList"),function(){function t(){v(this,t)}return function(e,t,n){n&&d(e,n)}(t,0,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e){s(a,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}(a);function a(){var e;v(this,a);for(var u=arguments.length,s=new Array(u),c=0;c<u;c++)s[c]=arguments[c];e=n.call.apply(n,[this].concat(s));var f,d=o(r);try{for(d.s();!(f=d.n()).done;){var p=f.value;switch(p[t.Constructor]&&p[t.Constructor].apply(l(e)),i(p)){case"object":t.mixObject(p,l(e))}}}catch(e){d.e(e)}finally{d.f()}return e}return a}(e)}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[Object].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.prototype[i]=e.prototype[i].bind(t.prototype)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e.prototype));try{for(u.s();!(a=u.n()).done;){var s=a.value;t.prototype[s]=e.prototype[s].bind(t.prototype)}}catch(e){u.e(e)}finally{u.f()}var c,l=o(Object.getOwnPropertyNames(e));try{var f=function(){var n=c.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(l.s();!(c=l.n()).done;)f()}catch(e){l.e(e)}finally{l.f()}var v,d=o(Object.getOwnPropertySymbols(e));try{var p=function(){var n=v.value;if("function"!=typeof e[n])return"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(d.s();!(v=d.n()).done;)p()}catch(e){d.e(e)}finally{d.f()}}},{key:"mix",value:function(t){for(var n={},i={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,c=o(Object.getOwnPropertyNames(e));try{var l=function(){var i=t.value,o=i.match(s);if(o){switch(o[1]){case"before":a.___before(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))})}return"continue"}return n[i]||"function"!=typeof e[i]?"continue":void(n[i]=e[i])};for(c.s();!(t=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}var f,v=o(u);try{var d=function(){var t=f.value,n=t.match(s);if(n){switch(n[1]){case"before":a.___before(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))})}return"continue"}return i[t]||"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)d()}catch(e){v.e(e)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var c in n)t[c]=n[c].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i[e].apply(this,n)}};for(var f in i)l(f);return a}}]),t}());t.Mixin=h,h.Constructor=p}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e=n("./View"),r=(n("./Cache"),n("./Config")),i=n("./Routes");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Symbol("NotFound"),c=Symbol("Internal"),l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a;return n=t,a=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.routes=n,Object.assign(this.query,this.queryOver({}));var r=function(n){for(var r in n.preventDefault(),n.state&&"routedId"in n.state?n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e),t.query)delete t.query[r];Object.assign(t.query,t.queryOver({}))};window.addEventListener("popstate",r),window.addEventListener("cvUrlChanged",r);var i="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(i+=location.hash),this.go(!1!==i?i:"/")}},{key:"go",value:function(e,t){var n=r.Config.get("title");for(var i in n&&(document.title=n),"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState({routedId:this.routeCount,prev:this.prevPath,url:location.pathname},null,e):location.pathname!==e&&history.pushState({routedId:++this.routeCount,prev:this.prevPath,url:location.pathname},null,e),t||(!1===t&&(this.path=null),"#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged"))),this.query)delete this.query[i];Object.assign(this.query,this.queryOver({})),this.prevPath=e}},{key:"match",value:function(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.path!==t||o){this.queryString=location.search,this.path=t;var a=this.prevPath,u=n.args.content,c=this.routes||n.routes||i.Routes.dump();for(var l in new URLSearchParams(location.search),this.query)delete this.query[l];Object.assign(this.query,this.queryOver({}));var f={},v=!1,d="";for(var p in t=t.substr(1).split("/"),this.query)f[p]=this.query[p];e:for(var h in c){var b=h.split("/");if(!(b.length<t.length&&"*"!==b[b.length-1])){for(var y in b)if("%"==b[y].substr(0,1)){var m=null,g=/^%(\w+)\??/.exec(b[y]);if(g&&g[1]&&(m=g[1]),!m)throw new Error("".concat(b[y],' is not a valid argument segment in route "').concat(h,'"'));if(t[y])f[m]=t[y];else{if("?"!=b[y].substr(b[y].length-1,1))continue e;f[m]=""}}else if("*"!==b[y]&&t[y]!==b[y])continue e;v=h,d=c[h],"*"===b[b.length-1]&&(f.pathparts=t.slice(b.length-1));break}}var w=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:t,prev:a,root:n,selected:v,routes:c}});if(document.dispatchEvent(w)){if(!o&&n&&u&&d instanceof Object&&u instanceof d&&!(d instanceof Promise)&&u.update(f))return n.args.content=u,!0;try{v in c||(c[v]=c[s]);var _=function(t){return"function"==typeof c[t]?c[t].prototype instanceof e.View?new c[t](f):c[t](f):c[t]};return!1===(d=_(v))&&(d=_(s)),d instanceof Promise?d.then(function(e){r.update(n,t,e,c,v,f,o)}).catch(function(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),r.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,o),e}):this.update(n,t,d,c,v,f,o)}catch(e){throw document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:t,prev:a,view:n,routes:c,selected:v}})),this.update(n,t,window.devMode?String(e):"Error: 500",c,v,f,o),e}}}}},{key:"update",value:function(t,n,r,i,o,a,u){if(t){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:i,selected:o}});!1!==r&&(t.args.content instanceof e.View&&(t.args.content.pause(!0),t.args.content.remove()),document.dispatchEvent(c)&&(t.args.content=r),r instanceof e.View&&(r.pause(!1),r.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:r,path:n,prev:s,view:t,routes:i,selected:o}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},i=o(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var a=e.value;r[a[0]]=a[1]}}catch(e){i.e(e)}finally{i.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var i in t||(r=this.queryOver(e)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var i=this.queryToString(r,!0);this.go(location.pathname+(i?"?"+i:""),n)}}],null&&u(n.prototype,null),a&&u(n,a),t}();t.Router=l,Object.defineProperty(l,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(l,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(l,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(l,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(l,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:c}),Object.defineProperty(l,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:s})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r={};try{Object.assign(r,n("Routes").Routes||{})}catch(e){!0===window.devMode&&console.warn(e)}var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,r;return n=t,r=[{key:"get",value:function(e){return this.routes[e]}},{key:"dump",value:function(){return this.routes}}],null&&e(n.prototype,null),r&&e(n,r),t}();t.Routes=i,Object.defineProperty(i,"routes",{configurable:!1,enumerable:!1,writable:!1,value:r})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0,n("./Dom");var e=n("./Tag"),r=n("./View");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,o,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var o,a=this.globalRules[n][r],u=this.wrap(e,a,t),s=i(e.querySelectorAll(n));try{for(s.s();!(o=s.n()).done;){u(o.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(n=function(e){return function(){return e}}(n)),function(t){for(var o in void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:[]}),t.___cvApplied___)if(n==t.___cvApplied___[o])return;var a,u;i&&(a=u=i,i.viewList&&(u=i.viewList.parent)),u&&u.onRemove(function(){return t.___cvApplied___.splice(0)});var s,c=new e.Tag(t,u,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,v=n(c);if(!1!==v&&t.___cvApplied___.push(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(c.element)){for(;c.element.firstChild;)v.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},i)),v instanceof r.View&&(i&&(i.cleanup.push((s=v,function(){s.remove()})),i.cleanup.push(i.args.bindTo(function(e,t,n){n[t]=e,v.args[t]=e})),i.cleanup.push(v.args.bindTo(function(e,t,n,r){n[t]=e,i.args[t]=e}))),c.clear(),v.render(c.element))}}}],(o=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var o in this.rules[r]){var a,u=this.rules[r][o],s=t.wrap(e,u,n),c=i(e.querySelectorAll(r));try{for(c.s();!(a=c.n()).done;){s(a.value)}}catch(e){c.e(e)}finally{c.f()}}}}])&&a(n.prototype,o),u&&a(n,u),t}();t.RuleSet=u}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function t(n,r,i,o,a){var u,s=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var c=document.createRange().createContextualFragment(n);n=c.firstChild}return this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=a,this.ref=i,this.index=o,this.cleanup=[],this[e.Bindable.OnAllGet]=function(e){return"function"==typeof s[e]?s[e]:s.node&&"function"==typeof s.node[e]?function(){var t;return(t=s.node)[e].apply(t,arguments)}:s.node&&e in s.node?s.node[e]:s[e]},this.style=(u=this,e.Bindable.make(function(e){if(u.node){var t=new CustomEvent("cvStyle",{detail:{styles:e}});if(u.node.dispatchEvent(t))for(var n in e)"-"===n[0]&&u.node.style.setProperty(n,e[n]),u.node.style[n]=e[n]}})),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t){s.element.style[t]=e}),this.proxy.bindTo(function(e,t){return t in n&&(n[t]=e),!1}),this.proxy}var n,i;return n=t,(i=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t])}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var i=function(){r.removeEventListener(e,t,n)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return o()}),o}}])&&r(n.prototype,i),t}();t.Tag=i}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),i=n("./Router"),o=n("./Dom"),a=n("./Tag"),u=n("./Bag"),s=n("./RuleSet"),c=n("./Mixin"),l=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=Symbol("dontParse"),j=Symbol("expandBind"),P=Symbol("uuid"),T=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(l,t);var c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}(l);function l(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=c.call(this),Object.defineProperty(_(t),"args",{value:e.Bindable.make(n)}),Object.defineProperty(_(t),P,{value:t.uuid()}),Object.defineProperty(_(t),"attach",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(_(t),"detach",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(_(t),"_onRemove",{value:new u.Bag(function(e,t,n){})}),Object.defineProperty(_(t),"cleanup",{value:[]}),Object.defineProperty(_(t),"parent",{value:r}),Object.defineProperty(_(t),"views",{value:new Map}),Object.defineProperty(_(t),"viewLists",{value:new Map}),Object.defineProperty(_(t),"withViews",{value:new Map}),Object.defineProperty(_(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(_(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(_(t),"intervals",{value:[]}),Object.defineProperty(_(t),"timeouts",{value:[]}),Object.defineProperty(_(t),"frames",{value:[]}),Object.defineProperty(_(t),"ruleSet",{value:new s.RuleSet}),Object.defineProperty(_(t),"preRuleSet",{value:new s.RuleSet}),Object.defineProperty(_(t),"subBindings",{value:{}}),Object.defineProperty(_(t),"templates",{value:{}}),Object.defineProperty(_(t),"eventCleanup",{value:[]}),Object.defineProperty(_(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(_(t),"rendered",{value:new Promise(function(e,n){return Object.defineProperty(_(t),"renderComplete",{value:e})})}),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,w(t,e.Bindable.make(_(t)))}return m(l,[{key:"_id",get:function(){return this[P]}}],[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}}]),m(l,[{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(i){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r=function(){n.timeouts[o].fired=!0,n.timeouts[o].callback=null,t()},i=setTimeout(r,e),o=this.timeouts.length;return this.timeouts.push({timeout:i,callback:r,time:e,fired:!1,created:(new Date).getTime(),paused:!1}),i}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.timeouts)e===this.timeouts[t].timeout&&(clearTimeout(this.timeouts[t].timeout),delete this.timeouts[t])})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){for(var t in this.timeouts)this.timeouts[t].fired?delete this.timeouts[t]:clearTimeout(this.timeouts[t].timeout);for(var n in this.intervals)clearInterval(this.intervals[n].timeout)}else{for(var r in this.timeouts)this.timeouts[r].timeout.paused&&(this.timeouts[r].fired?delete this.timeouts[r]:this.timeouts[r].timeout=setTimeout(this.timeouts[r].callback,this.timeouts[r].time));for(var i in this.intervals)this.intervals[i].timeout.paused&&(this.intervals[i].timeout.paused=!1,this.intervals[i].timeout=setInterval(this.intervals[i].callback,this.intervals[i].time))}var o,a=p(this.viewLists);try{for(a.s();!(o=a.n()).done;){var u=d(o.value,2);(u[0],u[1]).pause(!!e)}}catch(e){a.e(e)}finally{a.f()}for(var s in this.tags)if(Array.isArray(this.tags[s]))for(var c in this.tags[s])this.tags[s][c].pause(!!e);else this.tags[s].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof l&&(n=n.firstNode.parentNode),r instanceof l&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):l.templates.has(this.template),o=i?this.template instanceof DocumentFragment?i:l.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||l.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(v(Array.from(o.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode(),u=!1;a.isConnected&&(u=!0),r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(o,this.lastNode),u?(this.attached(a,n),this.dispatchAttached(a,n)):n.addEventListener("cvDomAttached",function(){t.attached(a,n),t.dispatchAttached(a,n)},{once:!0})}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){this.dispatchEvent(new CustomEvent("attached",{target:this}));var n=this.attach.items();for(var r in n)n[r](e,t);this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).map(function(e){e.matches&&(o.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new Event("cvDomAttached",{target:e}))}),e.dispatchEvent(new Event("cvDomAttached",{target:e})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.detach.items();for(var i in r)r[i]()}if(n.append.apply(n,v(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;o.Dom.mapTags(e,!1,function(e,n){e[k]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var n=t[j];n&&(n(),t[j]=!1);var r=d(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),i=r[0],o=r[1];return t.removeAttribute("cv-expand"),i[o]||(i[o]={}),this.onRemove(t[j]=i[o].bindTo(function(e,n,r,i,o){i||void 0===e?t.removeAttribute(n,e):null!==e?t.setAttribute(n,e):t.setAttribute(n,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(n){var r=t.cloneNode(!0),i=r.getAttribute("cv-expand"),o=e.Bindable.make(n.args[i]||{});r.removeAttribute("cv-expand");var a=function(t){if("name"===t||"type"===t)return"continue";var i=o.bindTo(t,function(e,t){return function(n){e.setAttribute(t,n)}}(r,t));n.onRemove(function(){i(),o.isBound()&&e.Bindable.clearBindings(o)})};for(var u in o)a(u);return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(",").map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var i=t.cloneNode(!0),o=function(t){var o=n[t][1]||n[t][0],a=d(e.Bindable.resolve(r.args,o,!0),2),u=a[0],s=a[1],c=n[t][0];r.onRemove(u.bindTo(s,function(e,t,n,r){r||void 0===e?i.removeAttribute(c,e):null!==e?i.setAttribute(c,e):i.setAttribute(c,"")}))};for(var a in n)o(a);return i}}},{key:"mapInterpolatableTag",value:function(t){var n=this,r=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var i=t.nodeValue;if(!this.interpolatable(i))return t;for(var o,u=0,s=function(){var r=o[2],s=!1,c=!1,f=r.split("|"),v=!1;if(f.length>1&&(v=n.stringTransformer(f.slice(1)),r=f[0]),"$$"===r.substr(0,2)&&(s=!0,c=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var p=i.substring(u,o.index);u=o.index+o[1].length;var h=document.createTextNode(p);h[k]=!0,t.parentNode.insertBefore(h,t);var b=void 0;(b=s?document.createElement("div"):document.createTextNode(""))[k]=!0;var y=n.args,m=r;if(r.match(/\./)){var g=d(e.Bindable.resolve(n.args,r,!0),2);y=g[0],m=g[1]}t.parentNode.insertBefore(b,t);var w=y.bindTo(m,function(e,r,i){if(i[r]!==e&&(i[r]instanceof l||i[r]instanceof Node||i[r]instanceof a.Tag)&&(i[r].preserve||i[r].remove()),b.nodeValue="",c&&!(e instanceof l)){var o=e;(e=new l(n.args,n)).template=o}if(v&&(e=v(e)),e instanceof l){var u=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};n.attach.add(u),e.render(t.parentNode,b);var f=function(){e.preserve||e.remove()};n.onRemove(f),e.onRemove(function(){n.attach.remove(u),n._onRemove.remove(f)})}else e instanceof Node?(t.parentNode.insertBefore(e,b),n.onRemove(function(){return e.remove()})):e instanceof a.Tag?(t.parentNode.insertBefore(e.node,b),n.onRemove(function(){return e.remove()})):(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),s?b.innerHTML=e:b.nodeValue=e);b[k]=!0});n.onRemove(w)};o=r.exec(i);)s();var c=i.substring(u),f=document.createTextNode(c);f[k]=!0,t.parentNode.insertBefore(f,t),t.nodeValue=""}if(t.nodeType===Node.ELEMENT_NODE)for(var v=function(i){if(!n.interpolatable(t.attributes[i].value))return"continue";for(var o=0,a=void 0,u=t.attributes[i].value,s=t.attributes[i],c={},l=[];a=r.exec(u);)l.push(u.substring(o,a.index)),c[a[2]]||(c[a[2]]=[]),c[a[2]].push(l.length),l.push(a[1]),o=a.index+a[1].length;l.push(u.substring(o));var f=function(r){var i=n.args,o=r,a=r.split("|"),u=!1,f=r;if(a.length>1&&(u=n.stringTransformer(a.slice(1)),o=a[0]),o.match(/\./)){var v=d(e.Bindable.resolve(n.args,o,!0),2);i=v[0],o=v[1]}c[f],n.onRemove(i.bindTo(o,function(e,n,r,i){for(var a in u&&(e=u(e)),c)for(var v in c[f])l[c[f][v]]=r[a],n===o&&(l[c[f][v]]=e);t.setAttribute(s.name,l.join(""))})),n.onRemove(function(){i.isBound()||e.Bindable.clearBindings(i)})};for(var v in c)f(v)},p=0;p<t.attributes.length;p++)v(p);return t}},{key:"mapRefTag",value:function(e){var t=d(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],i=void 0===r?null:r,o=t[2],u=void 0===o?null:o,s=a.Tag;i&&(s=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new s(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;c;){c.parent;var f=this.args[u];void 0!==f?(c.tags[n]||(c.tags[n]=[]),c.tags[n][f]=l):c.tags[n]=l,c=c.parent}return e}},{key:"mapBindTag",value:function(t){var n=this,r=t.getAttribute("cv-bind"),i=this.args,u=r,s=null;if(r.match(/\./)){var c=d(e.Bindable.resolve(this.args,r,!0),3);i=c[0],u=c[1],s=c[2]}i!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var f=!1;"$"===u.substr(0,1)&&(u=u.substr(1),f=!0);var v=i.bindTo(u,function(e,r,i,u,s){(s instanceof l||s instanceof Node||s instanceof a.Tag)&&s!==e&&s.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var v=t.getAttribute("type");if(v&&"checkbox"===v.toLowerCase())t.checked=!!e,t.dispatchEvent(c);else if(v&&"radio"===v.toLowerCase())t.checked=e==t.value,t.dispatchEvent(c);else if("file"!==v){if("SELECT"===t.tagName){var d=function(n){for(var r=0;r<t.options.length;r++)t.options[r].value==e&&(t.selectedIndex=r)};d(),n.attach.add(d)}else t.value=null==e?"":e;t.dispatchEvent(c)}}else if(e instanceof l){var h,b=p(t.childNodes);try{for(b.s();!(h=b.n()).done;)h.value.remove()}catch(e){b.e(e)}finally{b.f()}var y=function(t){e.dispatchAttach()&&(e.attached(t),e.dispatchAttached())};n.attach.add(y),e.render(t),e.onRemove(function(){return n.attach.remove(y)})}else if(e instanceof Node)t.insert(e);else if(e instanceof a.Tag)t.append(e.node);else if(f){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var m,g=p(t.childNodes);try{for(g.s();!(m=g.n()).done;)m.value.remove()}catch(e){g.e(e)}finally{g.f()}t.innerHTML=e}o.Dom.mapTags(t,!1,function(e){return e[k]=!0})}}else if(t.textContent!==e){var w,_=p(t.childNodes);try{for(_.s();!(w=_.n()).done;)w.value.remove()}catch(e){_.e(e)}finally{_.f()}t.textContent=e}});i!==this.args&&this.subBindings[r].push(v),this.onRemove(v);var h=t.getAttribute("type"),b=t.getAttribute("multiple"),y=function(n){if(n.target===t)if(h&&"checkbox"===h.toLowerCase())t.checked?i[u]=n.target.getAttribute("value"):i[u]=!1;else if(n.target.matches("[contenteditable=true]"))i[u]=n.target.innerHTML;else if("file"===h&&b){var r=Array.from(n.target.files),o=i[u]||e.Bindable.onDeck(i,u);if(o&&r.length){var a=function(e){if(r[e]!==o[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},o[e]=r[e],"break"};for(var s in r)if("break"===a(s))break}else i[u]=r}else if("file"!==h||b)i[u]=n.target.value;else{var c=n.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},i[u]=c}};return"file"===h||"radio"===h?t.addEventListener("change",y):(t.addEventListener("input",y),t.addEventListener("change",y),t.addEventListener("value-changed",y)),this.onRemove(function(){"file"===h||"radio"===h?t.removeEventListener("change",y):(t.removeEventListener("input",y),t.removeEventListener("change",y),t.removeEventListener("value-changed",y))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).map(function(n){var r,i=(n=n.map(function(e){return e.trim()})).length,o=String(n.shift()).trim(),a=String(n.shift()||o).trim(),u=String(n.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c?(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(function(e){return e.trim()})),c.length):s.push("$event"),o&&1!==i||(o=a);for(var l=t;l&&("function"!=typeof l[a]||"break"!==function(){var e=l,t=a;return r=function(){e[t].apply(e,arguments)},"break"}())&&l.parent;)l=l.parent;var f=function(n){var i=s.map(function(r){var i;return parseInt(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(i=/^['"]([\w-]+?)["']$/.exec(r))?i[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,v(i))},d={};switch(u.includes("p")?d.passive=!0:u.includes("P")&&(d.passive=!1),u.includes("c")?d.capture=!0:u.includes("C")&&(d.capture=!1),u.includes("o")?d.once=!0:u.includes("O")&&(d.once=!1),o){case"_init":f();break;case"_attach":t.attach.add(f);break;case"_detach":t.detach.add(f);break;default:e.addEventListener(o,f,d),t.onRemove(function(){e.removeEventListener(o,f,d)})}return[o,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var n=this,r=t.getAttribute("cv-with"),i=t.getAttribute("cv-carry"),o=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):l,u=new DocumentFragment;v(t.childNodes).map(function(e){return u.appendChild(e)});var s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var c=this.args.bindTo(r,function(r,i,o,c){for(n.withViews.has(t)&&n.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},n);n.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var f=function(e){var t=n.args.bindTo(s[e],function(e,t){l.args[t]=e});l.onRemove(t),n.onRemove(function(){t(),l.remove()})};for(var v in s)f(v);var d=function(t){var i=r.bindTo(t,function(e,t){l.args[t]=e});l.args.bindTo(t,function(e,t){r[t]=e}),n.onRemove(function(){i(),r.isBound()||e.Bindable.clearBindings(r),l.remove()}),l.onRemove(function(){i(),r.isBound()||e.Bindable.clearBindings(r)})};for(var p in r)d(p);l.render(t),n.withViews.set(t,l)});return this.onRemove(function(){n.withViews.delete(t),c()}),t}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;v(e.childNodes).map(function(e){return r.appendChild(e)});var i=n.split(":"),o=i.pop()?this.stringToClass(n):l,a=i.shift(),u=new o(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(e){var t=this,n=e.getAttribute("cv-each"),i=e.getAttribute("cv-view");e.removeAttribute("cv-each"),e.removeAttribute("cv-view");var o=i?this.stringToClass(i):l,a=new DocumentFragment;Array.from(e.childNodes).map(function(e){return a.appendChild(e)});var u=d(n.split(":"),3),s=u[0],c=u[1],f=u[2],v=this.args.bindTo(s,function(n,i,u,s,l){t.viewLists.has(e)&&t.viewLists.get(e).remove();var v=new r.ViewList(a,c,n,t,f,o),d=function(){return v.remove()};t.onRemove(d),v.onRemove(function(){return t._onRemove.remove(d)});var p=t.args.bindTo(function(e,t,n,r){"_id"!==t&&(r&&delete v.subArgs[t],v.subArgs[t]=e)}),h=v.args.bindTo(function(e,n,r,i,o){"_id"!==n&&"value"!==n&&"___"!==n.substring(0,3)&&(i&&delete t.args[n],n in t.args&&(t.args[n]=e))});for(v.onRemove(p),v.onRemove(h),t.onRemove(p),t.onRemove(h);e.firstChild;)e.removeChild(e.firstChild);t.viewLists.set(e,v),v.render(e)});return this.onRemove(v),e}},{key:"mapIfTag",value:function(t){var n=this,r=t,i=t.getAttribute("cv-view"),o=r.getAttribute("cv-if"),a=!1,u=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if");var s=i?this.stringToClass(i):l;"!"===o.substr(0,1)&&(o=o.substr(1),a=!0),"?"===o.substr(0,1)&&(o=o.substr(1),u=!0);var c=new DocumentFragment;Array.from(r.childNodes).map(function(e){return c.appendChild(e)});var f=this,v=new DocumentFragment,d=new s(this.args,f);this.onRemove(d.tags.bindTo(function(e,t){console.log(t),n.tags[t]=e})),d.template=c;var p=f.args,h=o;d.render(v);var b=p.bindTo(h,function(e,n){u&&(e=null!=e),Array.isArray(e)&&(e=!!e.length),a&&(e=!e),e?t.appendChild(v):d.nodes.map(function(e){return v.appendChild(e)})},{wait:0,children:Array.isArray(p[h])});f.onRemove(b);var y=function(){p.isBound()||e.Bindable.clearBindings(p)};return f.onRemove(function(){b(),y(),f._onRemove.remove(b),f._onRemove.remove(y)}),this.onRemove(function(){d.remove(),f!==n&&f.remove()}),t}},{key:"compileIfTag",value:function(t){var n=t.getAttribute("cv-if"),r=!1;t.removeAttribute("cv-if"),"!"===n.substr(0,1)&&(n=n.substr(1),r=!0);var i=new DocumentFragment;return Array.from(t.childNodes).map(function(e){return i.appendChild(e.cloneNode(!0))}),function(o){var a=t.cloneNode(),u=new DocumentFragment,s=new l({},o);s.template=i,o.syncBind(s);var c=o.args,f=n;if(n.match(/\./)){var v=d(e.Bindable.resolve(o.args,n,!0),2);c=v[0],f=v[1]}var p=!1,h=c.bindTo(f,function(e,t){if(!p){var n=o.args[f]||r?a:u;return s.render(n),void(p=!0)}Array.isArray(e)&&(e=!!e.length),r&&(e=!e),e?a.appendChild(u):s.nodes.map(function(e){return u.appendChild(e)})});o.onRemove(h);var b=function(){c.isBound()||e.Bindable.clearBindings(c)};return s.onRemove(function(){h(),b(),o._onRemove.remove(h),o._onRemove.remove(b)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var i=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,n,r,i){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),r=e.args.bindTo(function(e,n,r,i,o){if("_id"!==n){var a=e,u=o;a instanceof l&&(a=a.___ref___),u instanceof l&&(u=u.___ref___),a!==u&&u instanceof l&&o.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(r),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(r)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"uuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"remove",value:function(){var e=this,t=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].map(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t():requestAnimationFrame(t);var n,r,i=p(this._onRemove.items());try{for(i.s();!(n=i.n()).done;){var o=n.value;this._onRemove.remove(o),o()}}catch(e){i.e(e)}finally{i.f()}for(;r=this.cleanup.shift();)r&&r();var a,u=p(this.viewLists);try{for(u.s();!(a=u.n()).done;){var s=d(a.value,2);(s[0],s[1]).remove()}}catch(e){u.e(e)}finally{u.f()}for(var c in this.viewLists.clear(),this.timeouts)clearTimeout(this.timeouts[c].timeout),delete this.timeouts[c];for(var l in this.intervals)clearInterval(this.intervals[l].timeout),delete this.intervals[l];for(var l in this.frames)this.frames[l](),delete this.frames[l];this.removed=!0}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new a.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new a.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return v(t.querySelectorAll(e))}).flat().map(function(e){return new a.Tag(e,t,void 0,void 0,t)})}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var i=t,o=e[r];i&&!i[o];)i=i.parent;if(!i)return;n=i[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(l.refClasses.has(e))return l.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],i=n(e);return l.refClasses.set(e,i[r]),i[r]}},{key:"preventParsing",value:function(e){e[k]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var i=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof l)return this.listen(e.nodes,t,n,r);if(Array.isArray(e)){var o=e.map(function(e){return i.listen(e,t,n,r)});return function(){return o.map(function(e){return e()})}}if(e instanceof a.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var u=function(){e.removeEventListener(t,n,r)},s=function(){u(),u=function(){}};return this.onRemove(function(){return s()}),s}}],[{key:"isView",value:function(){return l}}]),l}(c.Mixin.with(l.EventTargetMixin));t.View=T,Object.defineProperty(T,"templates",{value:new Map}),Object.defineProperty(T,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./View"),i=n("./Bag");function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function t(n,o,a,s){var c=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(a||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=f||r.View,this._onRemove=new i.Bag,this.template=n,this.subProperty=o,this.keyProperty=l,this.tag=null,this.paused=!1,this.parent=s,this.rendered=new Promise(function(e,t){Object.defineProperty(c,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,i){"bindTo"!=t&&(c.paused=!0)}),this.args.___after(function(e,t,n,r,i){"bindTo"!=t&&(c.paused=n.length>1,c.reRender())});var v=this.args.value.bindTo(function(e,t,n,r){if(!c.paused){var i=t;if("symbol"!==u(t))if(isNaN(t)&&(i="_"+t),r)for(var o in c.views[i]&&c.views[i].remove(),delete c.views[i],c.views)c.views[o].args[c.keyProperty]="string"!=typeof o?o:o.substr(1);else c.views[i]||c.willReRender?c.views[i]&&c.views[i].args&&(c.views[i].args[c.keyProperty]=t,c.views[i].args[c.subProperty]=e):(cancelAnimationFrame(c.willReRender),c.willReRender=requestAnimationFrame(function(){c.reRender()}))}});this._onRemove.add(v)}var n,a;return n=t,(a=[{key:"render",value:function(e){var t,n=this,r=[],i=o(this.views);try{var a=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)})}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[];for(var n in this.views)t[n]=this.views[n];var r=[];this.upDebind&&this.upDebind.map(function(e){return e&&e()}),this.downDebind&&this.downDebind.map(function(e){return e&&e()}),this.upDebind=[],this.downDebind=[];var i=1/0,o=1/0,a=function(n){var a=!1,u=n;isNaN(u)?u="_"+n:String(u).length&&(u=Number(u));for(var s=t.length-1;s>=0;s--)if(t[s]&&void 0!==e.args.value[n]&&e.args.value[n]===t[s].args[e.subProperty]){a=!0,r[u]=t[s],isNaN(u)||(i=Math.min(i,u),u>0&&(o=Math.min(o,u))),r[u].args[e.keyProperty]=n,delete t[s];break}if(!a){var c={},l=r[u]=new e.viewClass(c,e.parent);isNaN(u)||(i=Math.min(i,u),u>0&&(o=Math.min(o,u))),r[u].template=(e.template,e.template),r[u].viewList=e,r[u].args[e.keyProperty]=n,r[u].args[e.subProperty]=e.args.value[n],e.upDebind[u]=c.bindTo(e.subProperty,function(t,n,r,i){var o=c[e.keyProperty];i?delete e.args.value[o]:e.args.value[o]=t}),e.downDebind[u]=e.subArgs.bindTo(function(e,t,n,r){r?delete c[t]:c[t]=e}),l.onRemove(function(){e.upDebind[u]&&e.upDebind[u](),e.downDebind[u]&&e.downDebind[u](),delete e.downDebind[u],delete e.upDebind[u]}),e._onRemove.add(function(){e.upDebind.filter(function(e){return e}).map(function(e){return e()}),e.upDebind.splice(0)}),e._onRemove.add(function(){e.downDebind.filter(function(e){return e}).map(function(e){return e()}),e.downDebind.splice(0)}),c[e.subProperty]=e.args.value[n]}};for(var u in this.args.value)a(u);for(var s in t){var c=!1;for(var l in r)if(t[s]===r[l]){c=!0;break}c||t[s].remove()}if(Array.isArray(this.args.value)){var f=0===i&&void 0!==r[1]&&r.length>1||o===1/0?i:o;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=r.length-n-1;i>f&&void 0===r[i];)i--;return i<f?Promise.resolve():r[i]===e.views[i]?r[i].firstNode?t(Number(n)+1):(r[i].render(e.tag,r[i+1]),r[i].rendered.then(function(){return t(Number(n)+1)})):(r[i].render(e.tag,r[i+1]),e.views.splice(i,0,r[i]),r[i].rendered.then(function(){return t(Number(n)+1)}))}()}else{var v=[],d=Object.assign({},r),p=function(t){if(delete d[t],r[t].firstNode&&r[t]===e.views[t])return"continue";r[t].render(e.tag),v.push(r[t].rendered.then(function(){return r[t]}))};for(var h in r)p(h);for(var b in d)delete this.args.views[b],d.remove();this.rendered=Promise.all(v)}for(var y in this.views=r,r)isNaN(y)?r[y].args[this.keyProperty]=y.substr(1):r[y].args[this.keyProperty]=y;this.willReRender=!1}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(n.prototype,a),t}();t.ViewList=c}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var e,r=n("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Symbol("Target"),a=(i(e={},r.Mixin.Constructor,function(){try{this[o]=new EventTarget}catch(e){this[o]=document.createDocumentFragment()}}),i(e,"dispatchEvent",function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];(e=this[o]).dispatchEvent.apply(e,n);var a="on".concat(i.type[0].toUpperCase()+i.type.slice(1));return"function"==typeof this[a]&&this[a](i),i.returnValue}),i(e,"addEventListener",function(){var e;(e=this[o]).addEventListener.apply(e,arguments)}),i(e,"removeEventListener",function(){var e;(e=this[o]).removeEventListener.apply(e,arguments)}),e);t.EventTargetMixin=a}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Symbol("Promise"),a=Symbol("Accept"),u=Symbol("Reject"),s=(i(e={},r.Mixin.Constructor,function(){var e=this;this[o]=new Promise(function(t,n){e[a]=t,e[u]=n})}),i(e,"then",function(){var e;return(e=this[o]).then.apply(e,arguments)}),i(e,"catch",function(){var e;return(e=this[o]).catch.apply(e,arguments)}),i(e,"finally",function(){var e;return(e=this[o]).finally.apply(e,arguments)}),e);t.PromiseMixin=s,Object.defineProperty(s,"Reject",{value:u}),Object.defineProperty(s,"Accept",{value:a})}()}),require.register("canvas/Canvas.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;var i=t("curvature/base/View"),o=t("../menu/Menu"),a=t("../panel/Panel");function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t("../processor/Invert");var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var n,r,i=f(s);function s(e,n){var r,o,a,u;return function(e,t){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),o=d(r=i.call(this,e,n)),a="template",u=t("./canvas.html"),a in o?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,r.args.width=128,r.args.height=128,r.args.offset=0,r.args.scale=2,r.scrollDelta=1,r.args.decoder="gameboy",r.args.showSettings=!1,r.args.buffer=r.args.buffer||!1,r.args.firstByte="0000",r}return n=s,(r=[{key:"onRendered",value:function(){var e=this,t={"--scale":this.args.scale,"--width":this.args.width,"--height":this.args.height};this.args.bindTo("offset",function(t,n){e.args.offset=t,e.args.buffer&&e.tags.canvas&&e.drawDots(e.args.buffer)},{wait:0}),this.args.bindTo("scale",function(n,r){e.tags.canvas&&(t["--scale"]=n,e.tags.canvas.style(t)),e.args.buffer&&e.drawDots(e.args.buffer)}),this.args.bindTo("width",function(n,r){e.tags.canvas&&(t["--width"]=n,e.tags.canvas.style(t),e.tags.canvas.width=n),e.args.buffer&&e.drawDots(e.args.buffer)}),this.args.bindTo("height",function(n,r){e.tags.canvas&&(t["--height"]=n,e.tags.canvas.style(t),e.tags.canvas.height=n),e.args.buffer&&e.drawDots(e.args.buffer)}),this.args.bindTo("input",function(t){if(t){e.args.filename=t.name;var n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(){e.args.buffer=new Uint8Array(n.result),e.onTimeout(0,function(){e.drawDots(e.args.buffer)})}}}),this.args.bindTo("decoder",function(t){e.args.buffer&&e.drawDots(e.args.buffer)},{frame:!0})}},{key:"wheel",value:function(e){e.preventDefault(),e.deltaY<1&&this.args.offset>0?this.args.offset=Number(this.args.offset)-this.scrollDelta:e.deltaY>1&&(this.args.offset=Number(this.args.offset)+this.scrollDelta),0>this.args.offset&&(this.args.offset=0)}},{key:"drawDots",value:function(e){var t=this.tags.canvas,n=t.getContext("2d");switch(requestAnimationFrame(function(){return n.clearRect(0,0,t.width,t.height)}),this.args.decoder){case"bytes":this.bytePerPixel(e);break;case"gameboy":this.nin2bit(e);break;case"gameboy-1bit":this.nin1bit(e);break;case"bits":this.bitPerPixel(e)}}},{key:"nin1bit",value:function(e){this.scrollDelta=1;var t=this.tags.canvas.getContext("2d"),n=0,r=Math.floor(this.args.width/8),i=8*Math.ceil(this.args.height/8),o=this.args.offset,a=this.args.width,u=[];this.args.firstByte=(o*r*8).toString(16).padStart(4,"0");for(var s=0;s<e.length;s+=1){var c=e[s];if(n<o*r*8)n++;else{if(n>i*a+o*(8*r))break;var l=[(128&c)>>7,(64&c)>>6,(32&c)>>5,(16&c)>>4,(8&c)>>3,(4&c)>>2,(2&c)>>1,(1&c)>>0];for(var f in l){var v=n-o*r*8,d=Math.floor(v/64),p=d%r,h=Math.floor(d/r),b=v%64,y=Math.floor(b/8),m=b%8;u[h]||(u[h]=t.createImageData(8*r,8));var g=u[h],w=4*(8*r*y+(8*p+m));g.data[w+0]=255,g.data[w+1]=255,g.data[w+2]=255,g.data[w+3]=196*l[f],n++}}}var _=function(e){requestAnimationFrame(function(){return t.putImageData(u[e],0,8*e)})};for(var O in u)_(O)}},{key:"nin2bit",value:function(e){this.scrollDelta=1;var t=[[255,255,255],[68,68,68],[204,204,204],[0,0,0]],n=this.tags.canvas.getContext("2d"),r=0,i=Math.floor(this.args.width/8),o=8*Math.ceil(this.args.height/8),a=this.args.offset,u=this.args.width,s=[];this.args.firstByte=(a*i*8).toString(16).padStart(4,"0");for(var c=0;c<e.length;c+=2){var l=e[c],f=e[c+1];if(r<a*i*8)r++;else{if(r>o*u+a*(8*i))break;var v=[((128&l)<<1|128&f)>>7,((64&l)<<1|64&f)>>6,((32&l)<<1|32&f)>>5,((16&l)<<1|16&f)>>4,((8&l)<<1|8&f)>>3,((4&l)<<1|4&f)>>2,((2&l)<<1|2&f)>>1,((1&l)<<1|1&f)>>0];for(var d in v){var p=r-a*i*8,h=Math.floor(p/64),b=h%i,y=Math.floor(h/i),m=p%64,g=Math.floor(m/8),w=m%8;s[y]||(s[y]=n.createImageData(8*i,8));var _=s[y],O=4*(8*i*g+(8*b+w));_.data[O+0]=t[v[d]][0],_.data[O+1]=t[v[d]][1],_.data[O+2]=t[v[d]][2],_.data[O+3]=127,r++}}}var k=function(e){requestAnimationFrame(function(){return n.putImageData(s[e],0,8*e)})};for(var j in s)k(j)}},{key:"bytePerPixel",value:function(e){console.log(e),this.scrollDelta=8;var t=this.tags.canvas.getContext("2d"),n=0,r=this.args.offset*this.args.width;this.args.firstByte=r.toString(16).padStart(4,"0");var i,o=[],a=[],s=u(e.slice(r));try{for(s.s();!(i=s.n()).done;){var c=i.value,l=Math.floor(n/this.args.width),f=Math.floor(l/8),v=Math.floor(this.args.offset/this.args.width);if(++n>this.args.height*this.args.width+v)break;o[f]||(o[f]=t.createImageData(t.canvas.width,8),a[f]=0);var d=o[f];d.data[a[f]++]=255,d.data[a[f]++]=255,d.data[a[f]++]=255,d.data[a[f]++]=c}}catch(e){s.e(e)}finally{s.f()}var p=function(e){requestAnimationFrame(function(){return t.putImageData(o[e],0,8*e)})};for(var h in o)p(h)}},{key:"bitPerPixel",value:function(e){console.log(e),this.scrollDelta=8;var t=this.tags.canvas.getContext("2d"),n=0,r=0,i=8*this.args.offset*this.args.width;this.args.firstByte=i.toString(16).padStart(4,"0");var o,a=[],s=[],c=u(e);try{e:for(c.s();!(o=c.n()).done;)for(var l=o.value,f=0,v=[(128&l)>>7,(64&l)>>6,(32&l)>>5,(16&l)>>4,(8&l)>>3,(4&l)>>2,(2&l)>>1,(1&l)>>0];f<v.length;f++){var d=v[f],p=Math.floor(r/this.args.width),h=Math.floor(p/8);if(Math.floor(this.args.offset/this.args.width),a[h]||(a[h]=t.createImageData(t.canvas.width,8),s[h]=0),n<this.args.offset*this.args.width)n++;else{if(n++,r>this.args.height*this.args.width)break e;r++;var b=a[h];b.data[s[h]++]=255,b.data[s[h]++]=255,b.data[s[h]++]=255,b.data[s[h]++]=255*d}}}catch(e){c.e(e)}finally{c.f()}var y=function(e){requestAnimationFrame(function(){return t.putImageData(a[e],0,8*e)})};for(var m in a)y(m)}},{key:"toggleSettings",value:function(){this.args.showSettings=!this.args.showSettings}},{key:"zoomIn",value:function(){this.args.scale++}},{key:"zoomOut",value:function(){this.args.scale--}},{key:"run",value:function(e){var t=this.args.panel,n=new a.Panel({title:"Select a Processor",widget:new o.Menu({input:this,panel:t})});t.args.panels.push(n)}}])&&c(n.prototype,r),s}(i.View);e.Canvas=h}),require.register("canvas/canvas.html",function(e,t,n){n.exports='<div data-module = "canvas">\n\n\t<label cv-if = "buffer">\n\t\t<div>\n\t\t\t<div class = "icon inline-icon gear-icon" cv-on = "click:toggleSettings(event)"></div>\n\t\t\t<div class = "icon inline-icon save-icon"cv-on = "click:save(event)"></div>\n\t\t\t<div class = "icon inline-icon run-icon" cv-on = "click:run(event)"></div>\n\t\t\t\x3c!-- <div class = "icon inline-icon folder-icon"></div> --\x3e\n\t\t</div>\n\t</label>\n\n\t<span cv-if = "showSettings">\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>width</p>\n\t\t\t<input cv-bind = "width" type = "number" min = "0">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>height</p>\n\t\t\t<input cv-bind = "height" type = "number" min = "0">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>scale</p>\n\t\t\t<input cv-bind = "scale" type = "number" min = "1">\n\t\t</label>\n\n\t\t<label cv-if = "buffer">\n\t\t\t<p>row</p>\n\t\t\t<input cv-bind = "offset" type = "number" min = "0">\n\t\t</label>\n\t</span>\n\n\t<label cv-if = "!buffer">\n\t\t<input type = "file" cv-bind = "input">\n\t</label>\n\n\t<label cv-if = "buffer">\n\t\t<p>encoding</p>\n\t\t<select cv-bind = "decoder">\n\t\t\t<optgroup label = "streams">\n\t\t\t\t\x3c!-- <option value = "">32 bit color (R,G,B,A...)*</option> --\x3e\n\t\t\t\t\x3c!-- <option value = "">24 bit color (R,G,B...)*</option> --\x3e\n\t\t\t\t\x3c!-- <option value = "">16 bit greyscale*</option> --\x3e\n\t\t\t\t<option value = "bytes">8 bit greyscale</option>\n\t\t\t\t\x3c!-- <option value = "">4 bit greyscale*</option> --\x3e\n\t\t\t\t\x3c!-- <option value = "">2 bit greyscale*</option> --\x3e\n\t\t\t\t<option value = "bits">1 bit black & white</option>\n\t\t\t</optgroup>\n\t\t\t<optgroup label = "tiles">\n\t\t\t\t<option value = "gameboy">2 bit gameboy (2bpp)</option>\n\t\t\t\t<option value = "gameboy-1bit">1 bit gameboy (1bpp)</option>\n\t\t\t</optgroup>\n\t\t</select>\n\t</label>\n\n\t<label cv-if = "buffer">\n\t\t<p>buffer</p>\n\t\t<div class = "canvas-window">\n\t\t\t<canvas cv-ref = "canvas" cv-on = "wheel(event)"></canvas>\n\t\t\t<div class = "row">\n\t\t\t\t<div><code>0x[[firstByte]]</code></div>\n\t\t\t\t<div class = "right">\n\t\t\t\t\t<div class = "icon inline-icon zoom-out-icon" cv-on = "click:zoomOut(event)"></div>\n\t\t\t\t\t<div class = "icon inline-icon zoom-in-icon" cv-on = "click:zoomIn(event)"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</label>\n</div>\n'}),require.register("file/Drop.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Drop=void 0;var i=t("curvature/base/View"),o=t("../panel/Panel"),a=t("../canvas/Canvas");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var n,r,i=c(l);function l(e,n){var r,o,a,u;return function(e,t){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),o=f(r=i.call(this,e,n)),a="template",u=t("./drop.html"),a in o?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,r.args.files=[],r}return n=l,(r=[{key:"drop",value:function(e){e.preventDefault();var t=this.args.panel,n=e.dataTransfer.files[0],r=n.name,i=new a.Canvas({input:n,panel:t});t.args.panels.push(new o.Panel({title:r,widget:i}))}},{key:"dragover",value:function(e){e.preventDefault()}}])&&u(n.prototype,r),l}(i.View);e.Drop=d}),require.register("file/drop.html",function(e,t,n){n.exports='<div data-module = "file-drop" cv-on = "drop(event);dragover(event)">\n\tdrop files here.\n</div>\n\n\n<div data-module = "panels" cv-each = "files:file">[[file]]</div>\n'}),require.register("initialize.js",function(e,t,n){"use strict";t("curvature/base/View"),t("curvature/base/Tag");var r=t("./panel/Panel"),i=t("./file/Drop");document.addEventListener("DOMContentLoaded",function(){var e=new i.Drop,t=new r.Panel({type:"root",widget:e});e.args.panel=t,t.render(document.body)})}),require.register("menu/Menu.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;var i=t("curvature/base/View"),o=t("../panel/Panel"),a=t("../processor/Invert");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var n,r,i=c(l);function l(e,n){var r,o,u,s;return function(e,t){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),o=f(r=i.call(this,e,n)),u="template",s=t("./menu.html"),u in o?Object.defineProperty(o,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[u]=s,r.args.links={Invert:a.Invert},r}return n=l,(r=[{key:"click",value:function(e,t){var n=this.args.panel,r=new t({input:this.args.input,panel:n}),i=new o.Panel({title:"Invert",widget:r});n.args.panels.push(i),console.log(this),this.remove()}}])&&u(n.prototype,r),l}(i.View);e.Menu=d}),require.register("menu/menu.html",function(e,t,n){n.exports='<div data-module = "menu" cv-each = "links:processor:title">\n\t<div><a cv-link = "/process/[[title]]" cv-on = "click(event, processor)">[[title]]</a>\n</div>\n'}),require.register("panel/Panel.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Panel=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,t("curvature/base/View").View);var n,u,c=a(f);function f(e,n){var r;return function(e,t){if(!(e instanceof f))throw new TypeError("Cannot call a class as a function")}(this),l(s(r=c.call(this,e,n)),"template",t("./panel.html")),r.args.title=r.args.title||null,r.args.widget=r.args.widget||null,r.args.panels=[],r.args.left=0,r.args.top=0,r.style={"--left":0,"--top":0},r}return n=f,(u=[{key:"onAttached",value:function(e){var t=this;this.args.bindTo(["left","top"],function(e,n){var r=t.tags.panel,i=document.body,o=i.clientWidth-r.clientWidth,a=i.clientHeight-r.clientHeight;"left"===n&&e>o&&(e=o),"top"===n&&e>a&&(e=a),e<0&&(e=0),t.tags.panel.style(l({},"--".concat(n),"".concat(e,"px")))})}},{key:"startFollow",value:function(){var e=this;this.stopMoving=this.listen(document,"mousemove",function(t){e.args.left+=t.movementX,e.args.top+=t.movementY}),this.listen(document,"mouseup",function(t){e.stopMoving(),e.stopMoving=!1},{once:!0})}},{key:"close",value:function(){"object"==r(this.args.widget)&&"function"==typeof this.args.widget.remove&&this.args.widget.remove(),this.remove()}}])&&i(n.prototype,u),f}();e.Panel=f}),require.register("panel/panel.html",function(e,t,n){n.exports='<div data-module = "panel" data-panel-type = "[[type]]" cv-ref = "panel">\n\t<div class = "titlebar" cv-on = "mousedown:startFollow(event)" cv-if = "title">\n\t\t<span class = "icon inline-icon"></span>\n\t\t<span>[[title]]</span>\n\t\t<div class = "right">\n\t\t\t<div class = "icon inline-icon x-icon" cv-on = "click:close(event)"></div>\n\t\t</div>\n\t</div>\n\t<div class = "widget">[[widget]]</div>\n\t<div class = "panels" cv-each = "panels:panel">[[panel]]</div>\n</div>\n'}),require.register("processor/Invert.js",function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0;var i=t("curvature/base/View"),o=t("../panel/Panel"),a=t("../canvas/Canvas");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var n,r,i=c(l);function l(e,n){var r,o,a,u;return function(e,t){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),o=f(r=i.call(this,e,n)),a="template",u=t("./invert.html"),a in o?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u,r.args.bindTo("input",function(e){e&&(r.args.inputName=e.args.input?e.args.input.name:e.args.title,r.args.offset=e.args.offset,r.args.length=e.args.buffer.length)}),r}return n=l,(r=[{key:"run",value:function(){for(var e=this.args.panel,t=(Number(this.args.offset),Number(this.args.length)||0),n=this.args.input.args.buffer,r=new Uint8Array(t),i=0;i<n.length;i++)r[i]=255^n[i];var u="Inverted "+this.args.inputName,s=new a.Canvas({buffer:r,panel:e,title:u});s.panel=e,e.args.panels.push(new o.Panel({title:u,widget:s}))}}])&&u(n.prototype,r),l}(i.View);e.Invert=d}),require.register("processor/invert.html",function(e,t,n){n.exports='<div data-module = "canvas invert">\n\t<div class = "column">\n\t\t<label><p>input buffer: [[inputName]]</p></label>\n\t\t<label class = "column">\n\t\t\t<p>offset</p>\n\t\t\t<input cv-bind = "offset">\n\t\t</label>\n\t\t<label class = "column">\n\t\t\t<p>length</p>\n\t\t\t<input cv-bind = "length">\n\t\t</label>\n\t\t<div class = "row right">\n\t\t\t<button cv-on = "click:run(event)">invert</button>\n\t\t</div>\n\t</div>\n</div>\n'}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
